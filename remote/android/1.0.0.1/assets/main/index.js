System.register("chunks:///_virtual/AudioEffect.ts",["cc","./Oops.ts"],(function(e){var s,t,i,r,c,o;return{setters:[function(e){s=e.cclegacy,t=e.AudioSource,i=e.AudioClip,r=e.error,c=e._decorator},function(e){o=e.oops}],execute:function(){var f;s._RF.push({},"05775eUvYJCKIT7OnaHnuf1","AudioEffect",void 0);const{ccclass:u}=c;e("AudioEffect",u("AudioEffect")(f=class extends t{constructor(...e){super(...e),this.effects=new Map,this._progress=0}get progress(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress}set progress(e){this._progress=e,this.currentTime=e*this.duration}load(e,s,t){if(null==t&&(t=o.res.defaultBundleName),e instanceof i)this.effects.set(e.uuid,{source:!0,ac:e}),this.playOneShot(e,this.volume),s&&s();else if(0==this.effects.has(e))o.res.load(t,e,i,((i,c)=>{if(i)return void r(i);let o=`${t}:${e}`;this.effects.set(o,{source:!1,bundle:t,path:e,ac:c}),this.playOneShot(c,this.volume),s&&s()}));else{const t=this.effects.get(e);this.playOneShot(t.ac,this.volume),s&&s()}}releaseAll(){for(let e in this.effects){const s=this.effects.get(e);s.source?this.release(s.ac):this.release(s.path,s.bundle)}this.effects.clear()}release(e,s){null==s&&(s=o.res.defaultBundleName);var t=void 0;if(e instanceof i)t=e,this.effects.has(t.uuid)&&(this.effects.delete(t.uuid),t.decRef());else{const t=`${s}:${e}`,i=this.effects.get(t);i&&(this.effects.delete(t),o.res.release(i.path,i.bundle))}}})||f);s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc","./Oops.ts","./AudioEffect.ts","./AudioMusic.ts"],(function(t){var s,i,e,c,u;return{setters:[function(t){s=t.cclegacy,i=t.Component},function(t){e=t.oops},function(t){c=t.AudioEffect},function(t){u=t.AudioMusic}],execute:function(){s._RF.push({},"7f458l13nhEI6UJYKnHPJnu","AudioManager",void 0);const h="game_audio";t("AudioManager",class extends i{constructor(...t){super(...t),this.music=null,this.effect=null,this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0}setMusicComplete(t=null){this.music.onComplete=t}playMusic(t,s,i){this._switch_music&&(this.music.loop=!1,this.music.load(t,s,i))}playMusicLoop(t,s){this._switch_music&&(this.music.loop=!0,this.music.load(t,null,s))}stopMusic(){this._switch_music&&this.music.playing&&this.music.stop()}get progressMusic(){return this.music.progress}set progressMusic(t){this.music.progress=t}get volumeMusic(){return this._volume_music}set volumeMusic(t){this._volume_music=t,this.music.volume=t}get switchMusic(){return this._switch_music}set switchMusic(t){this._switch_music=t,0==t&&this.music.stop()}playEffect(t,s,i){this._switch_effect&&this.effect.load(t,s,i)}releaseEffect(t,s){this.effect.release(t,s)}get volumeEffect(){return this._volume_effect}set volumeEffect(t){this._volume_effect=t,this.effect.volume=t}get switchEffect(){return this._switch_effect}set switchEffect(t){this._switch_effect=t,0==t&&this.effect.stop()}resumeAll(){this.music&&(!this.music.playing&&this.music.progress>0&&this.music.play(),!this.effect.playing&&this.effect.progress>0&&this.effect.play())}pauseAll(){this.music&&(this.music.playing&&this.music.pause(),this.effect.playing&&this.effect.pause())}stopAll(){this.music&&(this.music.stop(),this.effect.stop())}save(){this.local_data.volume_music=this._volume_music,this.local_data.volume_effect=this._volume_effect,this.local_data.switch_music=this._switch_music,this.local_data.switch_effect=this._switch_effect,e.storage.set(h,this.local_data)}load(){if(this.music=this.getComponent(u)||this.addComponent(u),this.effect=this.getComponent(c)||this.addComponent(c),this.local_data=e.storage.getJson(h),this.local_data)try{this.setState()}catch(t){this.setStateDefault()}else this.setStateDefault();this.music&&(this.music.volume=this._volume_music),this.effect&&(this.effect.volume=this._volume_effect)}setState(){this._volume_music=this.local_data.volume_music,this._volume_effect=this.local_data.volume_effect,this._switch_music=this.local_data.switch_music,this._switch_effect=this.local_data.switch_effect}setStateDefault(){this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["cc","./Oops.ts"],(function(s){var t,e,i,l,n;return{setters:[function(s){t=s.cclegacy,e=s.AudioSource,i=s.AudioClip,l=s._decorator},function(s){n=s.oops}],execute:function(){var u;t._RF.push({},"c2094quRnRC2qvDeFMwFgU4","AudioMusic",void 0);const{ccclass:r,menu:h}=l;s("AudioMusic",r("AudioMusic")(u=class extends e{constructor(...s){super(...s),this.onComplete=null,this._progress=0,this._isLoading=!1,this._bundleName=null,this._url=null,this._bundleName_next=null,this._url_next=null}get progress(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress}set progress(s){this._progress=s,this.currentTime=s*this.duration}async load(s,t,e){if(null==e&&(e=n.res.defaultBundleName),this._isLoading)return this._bundleName_next=e,void(this._url_next=s);this._isLoading=!0;var l=await n.res.loadAsync(e,s,i);l&&(this._isLoading=!1,null!=this._url_next?(this.release(),this.load(this._url_next,t,this._bundleName_next),this._bundleName_next=this._url_next=null):(t&&t(),this.playPrepare(e,s,l)))}playPrepare(s,t,e){this.playing&&this.stop(),this.release(),this.enabled=!0,this.clip=e,this.play(),this._bundleName=s,this._url=t}update(s){0==this.playing&&0==this.progress&&(this.enabled=!1,this.clip=null,this._bundleName=this._url=null,this.onComplete&&this.onComplete())}release(){this._url&&(this.stop(),this.clip=null,n.res.release(this._url,this._bundleName)),this._bundleName=this._url=null}})||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,h,g,a,c,p,C,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t._decorator,l=t.Component,r=t.Color,h=t.Canvas,g=t.UITransform,a=t.instantiate,c=t.Label,p=t.RichText,C=t.Toggle,d=t.Button,m=t.director}],execute:function(){var u,L,M,b,T,f,x,S,E;i._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);const{ccclass:v,property:I}=s;t("DebugViewRuntimeControl",(u=v("internal.DebugViewRuntimeControl"),L=I(n),M=I(n),b=I(n),u((x=e((f=class extends l{constructor(...t){super(...t),o(this,"compositeModeToggle",x,this),o(this,"singleModeToggle",S,this),o(this,"EnableAllCompositeModeButton",E,this),this._single=0,this.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],this.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],this.strMisc=["CSM Layer Coloration","Lighting With Albedo"],this.compositeModeToggleList=[],this.singleModeToggleList=[],this.miscModeToggleList=[],this.textComponentList=[],this.labelComponentList=[],this.textContentList=[],this.hideButtonLabel=void 0,this._currentColorIndex=0,this.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],this.color=[r.WHITE,r.BLACK,r.RED,r.GREEN,r.BLUE]}start(){if(!this.node.parent.getComponent(h))return void console.error("debug-view-runtime-control should be child of Canvas");const t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height;let i=.1*e-e,n=o-.1*o;const s=this.node.getChildByName("MiscMode"),l=a(s);l.parent=this.node,l.name="Buttons";const m=a(s);m.parent=this.node,m.name="Titles";for(let t=0;t<2;t++){const e=a(this.EnableAllCompositeModeButton.getChildByName("Label"));e.setPosition(i+(t>0?450:150),n,0),e.setScale(.75,.75,.75),e.parent=m;const o=e.getComponent(c);o.string=t?"----------Composite Mode----------":"----------Single Mode----------",o.color=r.WHITE,o.overflow=0,this.labelComponentList[this.labelComponentList.length]=o}n-=20;let u=0;for(let t=0;t<this.strSingle.length;t++,u++){t===this.strSingle.length>>1&&(i+=200,u=0);const e=t?a(this.singleModeToggle):this.singleModeToggle;e.setPosition(i,n-20*u,0),e.setScale(.5,.5,.5),e.parent=this.singleModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strSingle[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[t]=e}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(d.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;let L=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=L;const M=a(this.EnableAllCompositeModeButton);M.setPosition(i+90,n,0),M.setScale(.5,.5,.5),M.on(d.EventType.CLICK,this.changeTextColor,this),M.parent=l,L=M.getComponentInChildren(c),L.string="TextColor",this.labelComponentList[this.labelComponentList.length]=L;const b=a(this.EnableAllCompositeModeButton);b.setPosition(i+200,n,0),b.setScale(.5,.5,.5),b.on(d.EventType.CLICK,this.hideUI,this),b.parent=this.node.parent,L=b.getComponentInChildren(c),L.string="Hide UI",this.labelComponentList[this.labelComponentList.length]=L,this.hideButtonLabel=L,n-=40;for(let t=0;t<this.strMisc.length;t++){const e=a(this.compositeModeToggle);e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=s;const o=e.getComponentInChildren(p);o.string=this.strMisc[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string;e.getComponent(C).isChecked=!!t,e.on(C.EventType.TOGGLE,t?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[t]=e}n-=150;for(let t=0;t<this.strComposite.length;t++){const e=t?a(this.compositeModeToggle):this.compositeModeToggle;e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=this.compositeModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strComposite[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[t]=e}}isTextMatched(t,e){let o=new String(t);const i=o.search(">");return-1===i?t===e:(o=o.substr(i+1),o=o.substr(0,o.search("<")),o===e)}toggleSingleMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let t=0;t<this.strSingle.length;t++)this.isTextMatched(o.string,this.strSingle[t])&&(e.singleMode=t)}toggleCompositeMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)}toggleLightingWithAlbedo(t){m.root.debugView.lightingWithAlbedo=t.isChecked}toggleCSMColoration(t){m.root.debugView.csmLayerColoration=t.isChecked}enableAllCompositeMode(t){const e=m.root.debugView;e.enableAllCompositeMode(!0);for(let t=0;t<this.compositeModeToggleList.length;t++){this.compositeModeToggleList[t].getComponent(C).isChecked=!0}let o=this.miscModeToggleList[0].getComponent(C);o.isChecked=!1,e.csmLayerColoration=!1,o=this.miscModeToggleList[1].getComponent(C),o.isChecked=!0,e.lightingWithAlbedo=!0}hideUI(t){const e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}changeTextColor(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(let t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(let t=0;t<this.labelComponentList.length;t++)this.labelComponentList[t].color=this.color[this._currentColorIndex]}onLoad(){}update(t){}}).prototype,"compositeModeToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(f.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(f.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(s){var n;return{setters:[function(s){n=s.cclegacy}],execute:function(){n._RF.push({},"100a6mBjXNII4GS3xF4QKNn","Defines",void 0);s("ViewParams",class{constructor(){this.config=null,this.params=null,this.callbacks=null,this.valid=!0,this.node=null}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["cc","./Oops.ts"],(function(e){var o,n,t,s;return{setters:[function(e){o=e.cclegacy,n=e.Component,t=e._decorator},function(e){s=e.oops}],execute:function(){var i;o._RF.push({},"51c3eGR1dVB3qbyicFaZ3xD","DelegateComponent",void 0);const{ccclass:a}=t;e("DelegateComponent",a("DelegateComponent")(i=class extends n{constructor(...e){super(...e),this.vp=null,this.onCloseWindow=null}add(){this.applyComponentsFunction(this.node,"onAdded",this.vp.params),"function"==typeof this.vp.callbacks.onAdded&&this.vp.callbacks.onAdded(this.node,this.vp.params)}remove(e){this.vp.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",this.vp.params),"function"==typeof this.vp.callbacks.onBeforeRemove?this.vp.callbacks.onBeforeRemove(this.node,this.onBeforeRemoveNext.bind(this,e)):this.removed(this.vp,e))}onBeforeRemoveNext(e){this.removed(this.vp,e)}removed(e,o){e.valid=!1,e.callbacks&&"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),this.onCloseWindow&&this.onCloseWindow(e),o?(this.node.destroy(),s.res.release(e.config.prefab)):this.node.removeFromParent()}onDestroy(){this.applyComponentsFunction(this.node,"onRemoved",this.vp.params),this.vp=null}applyComponentsFunction(e,o,n){for(let t=0;t<e.components.length;t++){let s=e.components[t],i=s[o];i&&i.call(s,n)}}})||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/EncryptUtil.ts",["cc","./index.js"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default}],execute:function(){e._RF.push({},"dd271gVXURE+Y1LpkIv2lrA","EncryptUtil",void 0);class r{static md5(t){return i.MD5(t).toString()}static initCrypto(t,e){this.key=t,this.iv=i.enc.Hex.parse(e)}static aesEncrypt(t,e,r){return i.AES.encrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString()}static aesDecrypt(t,e,r){return i.AES.decrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString(i.enc.Utf8)}}t("EncryptUtil",r),r.key=null,r.iv=null,r.JsonFormatter={stringify:function(t){const e={ct:t.ciphertext.toString(i.enc.Base64)};return t.iv&&(e.iv=t.iv.toString()),t.salt&&(e.s=t.salt.toString()),JSON.stringify(e)},parse:function(t){const e=JSON.parse(t),r=i.lib.CipherParams.create({ciphertext:i.enc.Base64.parse(e.ct)});return e.iv&&(r.iv=i.enc.Hex.parse(e.iv)),e.s&&(r.salt=i.enc.Hex.parse(e.s)),r}},e._RF.pop()}}}));

System.register("chunks:///_virtual/EventDispatcher.ts",["cc","./MessageManager.ts"],(function(s){var t,e;return{setters:[function(s){t=s.cclegacy},function(s){e=s.MessageEventData}],execute:function(){t._RF.push({},"b8b6aZClDJJR7OIKu5HOA15","EventDispatcher",void 0);s("EventDispatcher",class{constructor(){this._msg=null}on(s,t,n){null==this._msg&&(this._msg=new e),this._msg.on(s,t,n)}off(s){this._msg&&this._msg.off(s)}dispatchEvent(s,...t){null==this._msg&&(this._msg=new e),this._msg.dispatchEvent(s,...t)}destroy(){this._msg&&this._msg.clear(),this._msg=null}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["cc"],(function(E){var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){e._RF.push({},"ac99ax/W7ZKRbHsw2Uvkjoh","EventMessage",void 0);E("EventMessage",function(E){return E.GAME_SHOW="GAME_ENTER",E.GAME_HIDE="GAME_EXIT",E.GAME_RESIZE="GAME_RESIZE",E.GAME_FULL_SCREEN="GAME_FULL_SCREEN",E.GAME_ORIENTATION="GAME_ORIENTATION",E}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GUI.ts",["cc","./Oops.ts"],(function(t){var i,e,s,o,r,n,h,a,g;return{setters:[function(t){i=t.cclegacy,e=t.Component,s=t.UITransform,o=t.view,r=t.math,n=t.screen,h=t.ResolutionPolicy,a=t._decorator},function(t){g=t.oops}],execute:function(){var l;i._RF.push({},"995a5UjgLBIjobJ8q0/S/e4","GUI",void 0);const{ccclass:c}=a;t("GUI",c("GUI")(l=class extends e{constructor(...t){super(...t),this.portrait=void 0,this.portraitDrz=null,this.landscapeDrz=null,this.transform=null}onLoad(){this.init()}init(){this.transform=this.getComponent(s),o.getDesignResolutionSize().width>o.getDesignResolutionSize().height?(this.landscapeDrz=o.getDesignResolutionSize(),this.portraitDrz=new r.Size(this.landscapeDrz.height,this.landscapeDrz.width)):(this.portraitDrz=o.getDesignResolutionSize(),this.landscapeDrz=new r.Size(this.portraitDrz.height,this.portraitDrz.width)),this.resize()}resize(){var t;t=o.getDesignResolutionSize().width>o.getDesignResolutionSize().height?this.landscapeDrz:this.portraitDrz;var i=n.windowSize,e=i.width,s=i.height,r=e,a=s;e/s>t.width/t.height?(r=(a=t.height)*e/s,this.portrait=!1):(a=(r=t.width)*s/e,this.portrait=!0),o.setDesignResolutionSize(r,a,h.UNKNOWN),this.transform.width=r,this.transform.height=a,g.log.logView(t,"设计尺寸"),g.log.logView(i,"屏幕尺寸")}})||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./ResLoader.ts"],(function(e){var s,t,n;return{setters:[function(e){s=e.cclegacy,t=e.JsonAsset},function(e){n=e.resLoader}],execute:function(){s._RF.push({},"92590UCu09DGb9od0SixV6W","JsonUtil",void 0);var a="config/game/",o=new Map;e("JsonUtil",class{static get(e){if(o.has(e))return o.get(e)}static load(e,s){if(o.has(e))s(o.get(e));else{var r=a+e;n.load(r,t,((t,n)=>{t?(console.warn(t.message),s(null)):(o.set(e,n.json),s(n.json))}))}}static loadAsync(e){return new Promise(((s,r)=>{if(o.has(e))s(o.get(e));else{var l=a+e;n.load(l,t,((t,n)=>{t?(console.warn(t.message),s(null)):(o.set(e,n.json),s(n.json))}))}}))}static release(e){var s=a+e;o.delete(e),n.release(s)}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["cc","./Logger.ts","./LanguageData.ts","./LanguagePack.ts"],(function(e){var a,g,t,n;return{setters:[function(e){a=e.cclegacy},function(e){g=e.Logger},function(e){t=e.LanguageData},function(e){n=e.LanguagePack}],execute:function(){a._RF.push({},"97efdh3Ze5FoJqjvHM6zQO2","Language",void 0);e("LanguageManager",class{constructor(){this._languages=["zh","en","tr"],this._languagePack=new n,this._defaultLanguage="zh"}get languages(){return this._languages}set languages(e){this._languages=e}set default(e){this._defaultLanguage=e||"zh"}get current(){return t.current}get pack(){return this._languagePack}isExist(e){return this.languages.indexOf(e)>-1}getNextLang(){let e=this.languages,a=e.indexOf(t.current);return e[(a+1)%e.length]}setLanguage(e,a){e=null==e||""==e?this._defaultLanguage:e.toLowerCase(),this.languages.indexOf(e)<0&&(console.log(`当前不支持【${e}】语言，将自动切换到【${this._defaultLanguage}】语言`),e=this._defaultLanguage),e!==t.current?this.loadLanguageAssets(e,(n=>{g.logConfig(`当前语言为【${e}】`);var s=t.current;t.current=e,this._languagePack.updateLanguage(e),this._languagePack.releaseLanguageAssets(s),a(!0)})):a(!1)}getLangByID(e){return t.getLangByID(e)}loadLanguageAssets(e,a){return e=e.toLowerCase(),this._languagePack.loadLanguageAssets(e,a)}releaseLanguageAssets(e){e=e.toLowerCase(),this._languagePack.releaseLanguageAssets(e)}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"149fd75XQ9Nao8jHNiimMkL","LanguageData",void 0);class a{static getLangByID(e){var t=this.json[e];if(t)return t;if(this.excel){var a=this.excel[e];if(a)return a[this.current]}return e}}e("LanguageData",a),a.path_json="language/json",a.path_texture="language/texture",a.path_spine="language/spine",a.current="",a.json={},a.excel=null,a.font=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(t){var e,a,i,n,r,s,o,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.CCString,r=t._decorator,s=t.Component,o=t.warn,p=t.Label,l=t.RichText},function(t){u=t.LanguageData}],execute:function(){var g,c,h,d,m,y,b,_,L,f,D,I,z,v;i._RF.push({},"3d12fHrIW5FuoZVmxcDvV0E","LanguageLabel",void 0);const{ccclass:S,property:F,menu:w}=r;let U=t("LangLabelParamsItem",S("LangLabelParamsItem")((h=e((c=class{constructor(){a(this,"key",h,this),a(this,"value",d,this)}}).prototype,"key",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(c.prototype,"value",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=c))||g);t("LanguageLabel",(m=S("LanguageLabel"),y=w("ui/language/LanguageLabel"),b=F({type:U,displayName:"params"}),_=F({type:U,displayName:"params"}),L=F({serializable:!0}),f=F({type:n,serializable:!0}),m(D=y((z=e((I=class extends s{constructor(...t){super(...t),a(this,"_params",z,this),a(this,"_dataID",v,this),this.initFontSize=0,this._needUpdate=!1}set params(t){this._params=t,this._needUpdate=!0}get params(){return this._params||[]}get dataID(){return this._dataID||""}set dataID(t){this._dataID=t,this._needUpdate=!0}get string(){let t=u.getLangByID(this._dataID);return t&&this._params.length>0&&this._params.forEach((e=>{t=t.replace(`%{${e.key}}`,e.value)})),t||(o("[LanguageLabel] 未找到语言标识，使用dataID替换"),t=this._dataID),t}language(){this._needUpdate=!0}onLoad(){this._needUpdate=!0}setVars(t,e){let a=!1;for(let i=0;i<this._params.length;i++){let n=this._params[i];n.key===t&&(n.value=e,a=!0)}if(!a){let a=new U;a.key=t,a.value=e,this._params.push(a)}this._needUpdate=!0}update(){this._needUpdate&&(this.updateContent(),this._needUpdate=!1)}updateContent(){var t=this.getComponent(p),e=this.getComponent(l),a=u.font;t?(a&&!t.useSystemFont&&(t.font=a),t.string=this.string,this.initFontSize=t.fontSize):e?(a&&!e.useSystemFont&&(e.font=a),this.initFontSize=e.fontSize,e.string=this.string,this.initFontSize=e.fontSize):o("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件")}}).prototype,"_params",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(I.prototype,"params",[_],Object.getOwnPropertyDescriptor(I.prototype,"params"),I.prototype),v=e(I.prototype,"_dataID",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(I.prototype,"dataID",[f],Object.getOwnPropertyDescriptor(I.prototype,"dataID"),I.prototype),D=I))||D)||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePack.ts",["cc","./ResLoader.ts","./Logger.ts","./JsonUtil.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguageSpine.ts","./LanguageSprite.ts"],(function(e){var n,a,t,o,l,g,s,i,u,r,c,d;return{setters:[function(e){n=e.cclegacy,a=e.director,t=e.error,o=e.JsonAsset,l=e.TTFFont},function(e){g=e.resLoader},function(e){s=e.Logger},function(e){i=e.JsonUtil},function(e){u=e.LanguageData},function(e){r=e.LanguageLabel},function(e){c=e.LanguageSpine},function(e){d=e.LanguageSprite}],execute:function(){n._RF.push({},"1d9adCW731FQ4yP1hojpFIL","LanguagePack",void 0);e("LanguagePack",class{updateLanguage(e){let n=a.getScene().children;for(let e=0;e<n.length;++e){let a=n[e].getComponentsInChildren(r);for(let e=0;e<a.length;e++)a[e].language();let t=n[e].getComponentsInChildren(d);for(let e=0;e<t.length;e++)t[e].language();let o=n[e].getComponentsInChildren(c);for(let e=0;e<o.length;e++)o[e].language()}}async loadLanguageAssets(e,n){await this.loadTexture(e),await this.loadSpine(e),await this.loadJson(e),await this.loadTable(e),n(e)}loadTable(e){return new Promise((async(e,n)=>{u.excel=await i.loadAsync("Language"),u.excel&&s.logConfig("config/game/Language","下载语言包 table 资源"),e(null)}))}loadTexture(e){return new Promise(((n,a)=>{const o=`${u.path_texture}/${e}`;g.loadDir(o,((e,a)=>{if(e)return t(e),void n(null);s.logConfig(o,"下载语言包 textures 资源"),n(null)}))}))}loadJson(e){return new Promise((async(n,a)=>{const t=`${u.path_json}/${e}`,i=await g.loadAsync(t,o);i?(u.json=i.json,s.logConfig(t,"下载语言包 json 资源"),s.logConfig(u.json,"LanguageData.json="),g.load(t,l,((e,a)=>{null==e&&s.logConfig(t,"下载语言包 ttf 资源"),u.font=a,n(null)}))):n(null)}))}loadSpine(e){return new Promise((async(n,a)=>{const o=`${u.path_spine}/${e}`;g.loadDir(o,((e,a)=>{if(e)return t(e),void n(null);s.logConfig(o,"下载语言包 spine 资源"),n(null)}))}))}releaseLanguageAssets(e){let n=`${u.path_texture}/${e}`;g.releaseDir(n);let a=`${u.path_json}/${e}`,t=g.get(a,o);t&&t.decRef();let s=g.get(a,l);s&&s.decRef();let i=`${u.path_spine}/${e}`;g.release(i)}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,a,n,i,o,r,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.CCString,o=e._decorator,r=e.Component,s=e.sp},function(e){p=e.resLoader},function(e){u=e.LanguageData}],execute:function(){var l,g,c,d,D,h,S;n._RF.push({},"d4c086BnshISrkEW6ul50q3","LanguageSpine",void 0);const{ccclass:f,property:L,menu:m}=o;e("LanguageSpine",(l=f("LanguageSpine"),g=m("ui/language/LanguageSpine"),c=L({serializable:!0}),d=L({type:i,serializable:!0}),l(D=g((S=t((h=class extends r{constructor(...e){super(...e),a(this,"_dataID",S,this),this._defaultAnimation=""}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this.updateSpine()}onLoad(){let e=this.getComponent(s.Skeleton);this._defaultAnimation=e.animation}start(){this.updateSpine()}language(){this.updateSpine()}updateSpine(){let e=`language/spine/${u.current}/${this.dataID}`,t=p.get(e,s.SkeletonData);if(t){let e=this.getComponent(s.Skeleton);e.skeletonData=t,e.setAnimation(0,this._defaultAnimation,!0)}else console.error("[LanguageSpine] 资源不存在 "+e)}}).prototype,"_dataID",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(h.prototype,"dataID",[d],Object.getOwnPropertyDescriptor(h.prototype,"dataID"),h.prototype),D=h))||D)||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,a,r,i,n,o,s,p,u,g,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.CCString,n=e._decorator,o=e.Component,s=e.SpriteFrame,p=e.Sprite,u=e.UITransform},function(e){g=e.resLoader},function(e){l=e.LanguageData}],execute:function(){var c,d,S,f,D,h,y,m,I;r._RF.push({},"9ec48WHdoJG0oI/Nxf9s0fx","LanguageSprite",void 0);const{ccclass:L,property:b,menu:z}=n;e("LanguageSprite",(c=L("LanguageSprite"),d=z("ui/language/LanguageSprite"),S=b({serializable:!0}),f=b({type:i,serializable:!0}),D=b({tooltip:"是否设置为图片原始资源大小"}),c(h=d((m=t((y=class extends o{constructor(...e){super(...e),a(this,"_dataID",m,this),a(this,"isRawSize",I,this)}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this.updateSprite()}start(){this.updateSprite()}language(){this.updateSprite()}updateSprite(){let e=`language/texture/${l.current}/${this.dataID}/spriteFrame`,t=g.get(e,s);if(t){let e=this.getComponent(p);if(e.spriteFrame=t,this.isRawSize){let a=t._originalSize;e.getComponent(u)?.setContentSize(a)}}else console.error("[LanguageSprite] 资源不存在 "+e)}}).prototype,"_dataID",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(y.prototype,"dataID",[f],Object.getOwnPropertyDescriptor(y.prototype,"dataID"),y.prototype),I=t(y.prototype,"isRawSize",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=y))||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["cc","./Defines.ts","./LayerPopup.ts"],(function(s){var a,e,t;return{setters:[function(s){a=s.cclegacy},function(s){e=s.ViewParams},function(s){t=s.LayerPopUp}],execute:function(){a._RF.push({},"d4037phLL9JgLdd8gNZcz1t","LayerDialog",void 0);s("LayerDialog",class extends t{constructor(...s){super(...s),this.params=[]}add(s,a,e){this.ui_nodes.size>0?this.params.push({config:s,params:a,callbacks:e}):(this.black.enabled=!0,this.show(s,a,e))}show(s,a,t){var i=this.ui_cache.get(s.prefab);return null==i&&((i=new e).valid=!0,i.config=s),i.params=a||{},i.callbacks=t??{},this.ui_nodes.set(i.config.prefab,i),this.load(i,s.bundle),s.prefab}onCloseWindow(s){super.onCloseWindow(s),setTimeout(this.next.bind(this),0)}setBlackDisable(){0==this.params.length&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())}next(){if(this.params.length>0){let s=this.params.shift();this.show(s.config,s.params,s.callbacks)}}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["cc","./GUI.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts"],(function(e){var i,t,a,s,o,r,n,p,h,l,c,d,u;return{setters:[function(e){i=e.cclegacy,t=e.warn,a=e.Node,s=e.Camera,o=e.Layers,r=e.Widget},function(e){n=e.GUI},function(e){p=e.DelegateComponent},function(e){h=e.LayerDialog},function(e){l=e.LayerNotify},function(e){c=e.LayerPopUp},function(e){d=e.LayerUI},function(e){u=e.UIMap}],execute:function(){i._RF.push({},"af46bjCOd5GbrrXZWNSd1jL","LayerManager",void 0);let f=e("LayerType",function(e){return e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e}({}));e("LayerManager",class{get portrait(){return this.root.getComponent(n).portrait}init(e){this.configs=e}toast(e,i=!1){this.notify.toast(e,i)}waitOpen(){this.notify.waitOpen()}waitClose(){this.notify.waitClose()}setConfig(e,i){this.configs[e]=i}setUIMap(e){null==this.uiMap&&(this.uiMap=new u),this.uiMap.init(this,e)}open(e,i=null,a){var s=this.configs[e];if(null!=s)switch(s.layer){case f.UI:this.ui.add(s,i,a);break;case f.PopUp:this.popup.add(s,i,a);break;case f.Dialog:this.dialog.add(s,i,a);break;case f.System:this.system.add(s,i,a)}else t(`打开编号为【${e}】的界面失败，配置信息不存在`)}async openAsync(e,i=null){return new Promise(((t,a)=>{var s={onAdded:(e,i)=>{t(e)},onLoadFailure:()=>{t(null)}};this.open(e,i,s)}))}replace(e,i,t=null){this.open(i,t),this.remove(e)}replaceAsync(e,i,t=null){return new Promise((async(a,s)=>{var o=await this.openAsync(i,t);this.remove(e),a(o)}))}has(e){var i=this.configs[e];if(null==i)return t(`编号为【${e}】的界面配置不存在，配置信息不存在`),!1;var a=!1;switch(i.layer){case f.UI:a=this.ui.has(i.prefab);break;case f.PopUp:a=this.popup.has(i.prefab);break;case f.Dialog:a=this.dialog.has(i.prefab);break;case f.System:a=this.system.has(i.prefab)}return a}get(e){var i=this.configs[e];if(null==i)return t(`编号为【${e}】的界面配置不存在，配置信息不存在`),null;var a=null;switch(i.layer){case f.UI:a=this.ui.get(i.prefab);break;case f.PopUp:a=this.popup.get(i.prefab);break;case f.Dialog:a=this.dialog.get(i.prefab);break;case f.System:a=this.system.get(i.prefab)}return a}remove(e,i){var a=this.configs[e];if(null!=a)switch(a.layer){case f.UI:this.ui.remove(a.prefab,i);break;case f.PopUp:this.popup.remove(a.prefab,i);break;case f.Dialog:this.dialog.remove(a.prefab,i);break;case f.System:this.system.remove(a.prefab,i)}else t(`删除编号为【${e}】的界面失败，配置信息不存在`)}removeByNode(e,i){if(e instanceof a){let a=e.getComponent(p);if(a&&a.vp){if(e.parent)e.parent.remove(a.vp.config.prefab,i);else if(i)switch(a.vp.config.layer){case f.UI:this.ui.removeCache(a.vp.config.prefab);break;case f.PopUp:this.popup.removeCache(a.vp.config.prefab);break;case f.Dialog:this.dialog.removeCache(a.vp.config.prefab);break;case f.System:this.system.removeCache(a.vp.config.prefab)}}else t("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy()}}clear(e=!1){this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.system.clear(e)}constructor(e){this.root=void 0,this.camera=void 0,this.game=void 0,this.guide=void 0,this.uiMap=void 0,this.ui=void 0,this.popup=void 0,this.dialog=void 0,this.system=void 0,this.notify=void 0,this.configs={},this.root=e,this.camera=this.root.getComponentInChildren(s),this.game=this.create_node(f.Game),this.ui=new d(f.UI),this.popup=new c(f.PopUp),this.dialog=new h(f.Dialog),this.system=new h(f.System),this.notify=new l(f.Notify),this.guide=this.create_node(f.Guide),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.system),e.addChild(this.notify),e.addChild(this.guide)}create_node(e){var i=new a(e);i.layer=o.Enum.UI_2D;var t=i.addComponent(r);return t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0,i}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["cc","./ViewUtil.ts","./Notify.ts"],(function(t){var i,n,e,o,s,a,l,h,r;return{setters:[function(t){i=t.cclegacy,n=t.Node,e=t.Widget,o=t.Layers,s=t.BlockInputEvents,a=t.find,l=t.instantiate},function(t){h=t.ViewUtil},function(t){r=t.Notify}],execute:function(){i._RF.push({},"289b1Zx8X1Msbcc/T4Tk8MV","LayerNotify",void 0);t("LayerNotify",class extends n{constructor(t){super(t),this.black=void 0,this.wait=null,this.notify=null,this.notifyItem=null;var i=this.addComponent(e);i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,this.init()}init(){this.layer=o.Enum.UI_2D,this.black=this.addComponent(s),this.black.enabled=!1}waitOpen(){null==this.wait&&(this.wait=h.createPrefabNode("common/prefab/wait")),null==this.wait.parent&&(this.wait.parent=this,this.black.enabled=!0)}waitClose(){this.wait.parent&&(this.wait.parent=null,this.black.enabled=!1)}toast(t,i){null==this.notify&&(this.notify=h.createPrefabNode("common/prefab/notify"),this.notifyItem=a("item",this.notify),this.notifyItem.parent=null),this.notify.parent=this;let n=l(this.notifyItem),e=n.getChildByName("prompt").getComponent(r);n.parent=this.notify,e.onComplete=()=>{0==this.notify.children.length&&(this.notify.parent=null)},e.toast(t,i),this.notify.children.length>3&&this.notify.children[0].destroy()}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["cc","./ViewUtil.ts","./LayerUI.ts"],(function(e){var s,i,t,a,n,o;return{setters:[function(e){s=e.cclegacy,i=e.Layers,t=e.BlockInputEvents,a=e.Node},function(e){n=e.ViewUtil},function(e){o=e.LayerUI}],execute:function(){s._RF.push({},"945a63oU41ENoYIq/DMuOVp","LayerPopup",void 0);e("LayerPopUp",class extends o{constructor(e){super(e),this.black=void 0,this.mask=void 0,this.init()}init(){this.layer=i.Enum.UI_2D,this.black=this.addComponent(t),this.black.enabled=!1}showUi(e){super.showUi(e),this.openVacancyRemove(e.config),this.black.enabled=!0}onCloseWindow(e){super.onCloseWindow(e),this.setBlackDisable()}setBlackDisable(){0==this.ui_nodes.size&&(this.black.enabled=!1),this.closeVacancyRemove(),this.closeMask()}closeMask(){var e=!0;for(var s of this.ui_nodes.values())if(s.config.mask){e=!1;break}e&&(this.mask.parent=null)}openVacancyRemove(e){this.hasEventListener(a.EventType.TOUCH_END,this.onTouchEnd,this)||this.on(a.EventType.TOUCH_END,this.onTouchEnd,this),null==this.mask&&(this.mask=n.createPrefabNode("common/prefab/mask")),e.mask&&(this.mask.parent=this,this.mask.setSiblingIndex(0))}closeVacancyRemove(){var e=!0;for(var s of this.ui_nodes.values())if(s.config.vacancy){e=!1;break}e&&this.hasEventListener(a.EventType.TOUCH_END,this.onTouchEnd,this)&&this.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}onTouchEnd(e){e.target===this&&this.ui_nodes.forEach((e=>{e.valid&&e.config.vacancy&&this.remove(e.config.prefab,e.config.destroy)}))}clear(e){super.clear(e),this.black.enabled=!1,this.active=!1,this.closeVacancyRemove(),this.closeMask()}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["cc","./Oops.ts","./Defines.ts","./DelegateComponent.ts"],(function(e){var o,i,t,n,s,a,d;return{setters:[function(e){o=e.cclegacy,i=e.Node,t=e.Widget,n=e.instantiate},function(e){s=e.oops},function(e){a=e.ViewParams},function(e){d=e.DelegateComponent}],execute:function(){o._RF.push({},"fc9c2xwP2JHFaPKKv7QNMcI","LayerUI",void 0);e("LayerUI",class extends i{constructor(e){super(e),this.ui_nodes=new Map,this.ui_cache=new Map;var o=this.addComponent(t);o.isAlignLeft=o.isAlignRight=o.isAlignTop=o.isAlignBottom=!0,o.left=o.right=o.top=o.bottom=0,o.alignMode=2,o.enabled=!0}add(e,o,i){if(this.ui_nodes.has(e.prefab))console.warn(`路径为【${e.prefab}】的预制重复加载`);else{var t=this.ui_cache.get(e.prefab);null==t&&((t=new a).config=e),this.ui_nodes.set(e.prefab,t),t.params=o??{},t.callbacks=i??{},t.valid=!0,this.load(t,e.bundle)}}load(e,o){e&&e.node?this.showUi(e):(o=o||s.res.defaultBundleName,s.res.load(o,e.config.prefab,((o,i)=>{if(o)return this.ui_nodes.delete(e.config.prefab),console.warn(`路径为【${e.config.prefab}】的预制加载失败`),void(e.callbacks&&e.callbacks.onLoadFailure&&e.callbacks.onLoadFailure());let t=n(i);e.node=t;let s=t.addComponent(d);s.vp=e,s.onCloseWindow=this.onCloseWindow.bind(this),this.showUi(e)})))}onCloseWindow(e){this.ui_nodes.delete(e.config.prefab)}showUi(e){e.node.getComponent(d).add(),e.node.parent=this,e.valid=!0}remove(e,o){var i=void 0;void 0!==o&&(i=o);var t=this.ui_nodes.get(e);t&&(void 0===i&&(i=void 0===t.config.destroy||t.config.destroy),!1===i&&this.ui_cache.set(t.config.prefab,t),t.node.getComponent(d).remove(i));!0===i&&this.removeCache(e)}removeCache(e){let o=this.ui_cache.get(e);o&&(this.ui_nodes.delete(o.config.prefab),this.ui_cache.delete(e),o.node.destroy())}get(e){var o=this.ui_nodes.get(e);return o?o.node:null}has(e){return this.ui_nodes.has(e)}clear(e){this.ui_nodes.forEach(((o,i)=>{this.remove(o.config.prefab,e),o.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach(((e,o)=>{this.removeCache(o)}))}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,r,a;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){e=t.cclegacy,n=t.Node,r=t._decorator,a=t.Component}],execute:function(){var c,s,l,d,u;e._RF.push({},"372c8RqjztKG7oYPW8LkSjd","LoadingIndicator",void 0);const{ccclass:g,property:p}=r;t("LoadingIndicator",(c=g("LoadingIndicator"),s=p(n),c((u=o((d=class extends a{constructor(...t){super(...t),i(this,"loading",u,this),this.loading_rotate=0}update(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)}}).prototype,"loading",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=d))||l));e._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(t){var s,e;return{setters:[function(t){s=t.cclegacy,e=t.log}],execute:function(){s._RF.push({},"fb9ccDtf8dGRaNroxFJs7q9","Logger",void 0);let i=t("LogType",function(t){return t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace",t}({}));var n={1:"网络日志",2:"数据日志",4:"业务日志",8:"视图日志",16:"配置日志",32:"标准日志"};class r{static init(){this.tags=i.Net|i.Model|i.Business|i.View|i.Config|i.Trace}static setTags(t=null){t&&(this.tags=t)}static start(t="Time"){console.time(t)}static end(t="Time"){console.timeEnd(t)}static table(t,s){this.isOpen(i.Trace)&&console.table(t)}static trace(t,s="color:#ffffff;"){this.isOpen(i.Trace)&&(console.log||e).call(null,"%c%s%s",s,this.getDateString(),t)}static logNet(t,s){this.orange(i.Net,t,s)}static logModel(t,s){this.violet(i.Model,t,s)}static logBusiness(t,s){this.blue(i.Business,t,s)}static logView(t,s){this.green(i.View,t,s)}static logConfig(t,s){this.gray(i.Config,t,s)}static orange(t,s,e){this.print(t,s,"color:#ee7700;",e)}static violet(t,s,e){this.print(t,s,"color:Violet;",e)}static blue(t,s,e){this.print(t,s,"color:#3a5fcd;",e)}static green(t,s,e){this.print(t,s,"color:green;",e)}static gray(t,s,e){this.print(t,s,"color:gray;",e)}static isOpen(t){return 0!=(this.tags&t)}static print(t,s,i,r){if(this.isOpen(t)){var a=console.log||e,l=n[t];r?a.call(null,"%c%s%s%s:%s%o",i,this.getDateString(),"["+l+"]",this.stack(5),r,s):a.call(null,"%c%s%s%s:%o",i,this.getDateString(),"["+l+"]",this.stack(5),s)}}static stack(t){var s=(new Error).stack.split("\n"),e=[];s.forEach((t=>{var s=(t=t.substring(7)).split(" ");s.length<2?e.push(s[0]):e.push({[s[0]]:s[1]})}));var i,n=[],r=[];if(t<e.length-1)for(var a in e[t]){if(2==(r=a.split(".")).length)n=r.concat();else{var l=(i=e[t][a]).lastIndexOf("/"),o=i.lastIndexOf(".");if(l>-1&&o>-1){var c=i.substring(l+1,o);n.push(c)}else n.push(i)}}return 1==n.length?"["+n[0]+".ts]":2==n.length?"["+n[0]+".ts->"+n[1]+"]":""}static getDateString(){let t=new Date,s=t.getHours().toString(),e="";return e+=(1==s.length?"0"+s:s)+":",s=t.getMinutes().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getSeconds().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getMilliseconds().toString(),1==s.length&&(s="00"+s),2==s.length&&(s="0"+s),e+=s,e="["+e+"]",e}}t("Logger",r),r.tags=0,r.init(),s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Oops.ts","./Root.ts","./AudioEffect.ts","./AudioManager.ts","./AudioMusic.ts","./EventDispatcher.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./Logger.ts","./StorageManager.ts","./Timer.ts","./TimerManager.ts","./GUI.ts","./Defines.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerManager.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts","./LoadingIndicator.ts","./Notify.ts","./EncryptUtil.ts","./JsonUtil.ts","./StringUtil.ts","./ViewUtil.ts","./Language.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguagePack.ts","./LanguageSpine.ts","./LanguageSprite.ts","./Main.ts","./UIConfig.ts","./UIHotUpView.ts","./UpdatePanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./Oops.ts","./Root.ts","./UIConfig.ts"],(function(t){var n,o,a,s,e,i;return{setters:[function(t){n=t.cclegacy,o=t._decorator},function(t){a=t.oops},function(t){s=t.Root},function(t){e=t.UIConfigData,i=t.UIID}],execute:function(){var c;n._RF.push({},"1071bqexddL7LaK3yvX8TIG","Main",void 0);const{ccclass:u,property:r}=o;t("Main",u("Main")(c=class extends s{start(){a.language.setLanguage("zh",(()=>{a.res.loadDir("common",(()=>{a.gui.toast("加载组件完成"),a.gui.init(e),a.gui.open(i.HotUp)}))}))}update(t){}})||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["cc"],(function(e){var t,s,n;return{setters:[function(e){t=e.cclegacy,s=e.warn,n=e.log}],execute:function(){t._RF.push({},"c2dc3TRu75Kv4RnCL82z+Z9","MessageManager",void 0);class l{constructor(){this.event=void 0,this.listener=void 0,this.object=void 0}}e("MessageEventData",class{constructor(){this.events=new Map}on(e,t,s){let n=this.events.get(e);null==n&&(n=[],this.events.set(e,n));let i=new l;i.event=e,i.listener=t,i.object=s,n.push(i),o.on(e,t,s)}off(e){let t=this.events.get(e);if(t){for(let s of t)o.off(e,s.listener,s.object);this.events.delete(e)}}dispatchEvent(e,...t){o.dispatchEvent(e,...t)}clear(){for(let e in this.events)this.off(e)}});class i{constructor(){this.events=new Map}on(e,t,n){if(!e||!t)return void s(`注册【${e}】事件的侦听器函数为空`);let i=this.events.get(e);null==i&&(i=[],this.events.set(e,i));let o=i.length;for(let l=0;l<o;l++){let o=i[l];o.listener==t&&o.object==n&&s(`名为【${e}】的事件重复注册侦听器`)}let c=new l;c.event=e,c.listener=t,c.object=n,i.push(c)}once(e,t,s){let n=(l,...i)=>{this.off(e,n,s),n=null,t.call(s,l,i)};this.on(e,n,s)}off(e,t,s){let l=this.events.get(e);if(!l)return void n(`名为【${e}】的事件不存在`);let i=l.length;for(let e=0;e<i;e++){let n=l[e];if(n.listener==t&&n.object==s){l.splice(e,1);break}}0==l.length&&this.events.delete(e)}dispatchEvent(e,...t){let s=this.events.get(e);if(null!=s){let n=s.concat(),l=n.length;for(let s=0;s<l;s++){let l=n[s];l.listener.call(l.object,e,...t)}}}}e("MessageManager",i);const o=e("message",new i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts"],(function(t){var n,e,i,o,a,l,r,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,a=t.Animation,l=t._decorator,r=t.Component},function(t){s=t.LanguageLabel}],execute:function(){var c,u,p,h,b,d,f;i._RF.push({},"24748TcuUlCuJyn+4x6NVd/","Notify",void 0);const{ccclass:y,property:m}=l;t("Notify",(c=y("Notify"),u=m(o),p=m(a),c((d=n((b=class extends r{constructor(...t){super(...t),e(this,"lab_content",d,this),e(this,"animation",f,this),this.onComplete=null}onLoad(){this.animation&&this.animation.on(a.EventType.FINISHED,this.onFinished,this)}onFinished(){this.node.destroy(),this.onComplete&&this.onComplete()}toast(t,n){let e=this.lab_content.getComponent(s);n?(e.enabled=!0,e.dataID=t):(e.enabled=!1,this.lab_content.string=t)}}).prototype,"lab_content",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=n(b.prototype,"animation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Oops.ts",["cc","./Language.ts","./Logger.ts"],(function(o){var e,s,g;return{setters:[function(o){e=o.cclegacy},function(o){s=o.LanguageManager},function(o){g=o.Logger}],execute:function(){e._RF.push({},"83fb7HuM/ZJp4c1om3T1ZVK","Oops",void 0);class i{}o("oops",i),i.log=g,i.res=void 0,i.gui=void 0,i.storage=void 0,i.audio=void 0,i.timer=void 0,i.message=void 0,i.language=new s,e._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["cc"],(function(e){var s,l,r,t,a,n,d;return{setters:[function(e){s=e.cclegacy,l=e.assetManager,r=e.error,t=e.warn,a=e.Asset,n=e.js,d=e.resources}],execute:function(){s._RF.push({},"b0e27HQOEdAWI7YW0MzB94O","ResLoader",void 0);class o{constructor(){this.defaultBundleName="resources"}loadRemote(e,...s){var r=null,t=null;2==s.length?(r=s[0],t=s[1]):t=s[0],l.loadRemote(e,r,t)}loadBundle(e,s){return new Promise(((t,a)=>{l.loadBundle(e,{version:s},((e,s)=>{if(e)return r(e);t(s)}))}))}load(e,s,l,r,t){let a=null;"string"==typeof s||s instanceof Array?(a=this.parseLoadResArgs(s,l,r,t),a.bundle=e):(a=this.parseLoadResArgs(e,s,l,r),a.bundle=this.defaultBundleName),this.loadByArgs(a)}loadAsync(e,s,l){return new Promise(((r,a)=>{this.load(e,s,l,((e,s)=>{e&&t(e.message),r(s)}))}))}loadDir(e,s,l,r,t){let a=null;"string"==typeof s?(a=this.parseLoadResArgs(s,l,r,t),a.bundle=e):(a=this.parseLoadResArgs(e,s,l,r),a.bundle=this.defaultBundleName),a.dir=a.paths,this.loadByArgs(a)}release(e,s){null==s&&(s=this.defaultBundleName);var r=l.getBundle(s);if(r){var t=r.get(e);t&&this.releasePrefabtDepsRecursively(t)}}releaseDir(e,s){null==s&&(s=this.defaultBundleName);var r=l.getBundle(s);if(r){var t=r.getDirWithPath(e);t&&t.map((e=>{this.releasePrefabtDepsRecursively(e.uuid)})),""==e&&"resources"!=s&&l.removeBundle(r)}}releasePrefabtDepsRecursively(e){if(e instanceof a)e.decRef();else{var s=l.assets.get(e);s&&s.decRef()}}get(e,s,r){return null==r&&(r=this.defaultBundleName),l.getBundle(r).get(e,s)}dump(){l.assets.forEach(((e,s)=>{console.log(l.assets.get(s))})),console.log(`当前资源总数:${l.assets.count}`)}parseLoadResArgs(e,s,l,r){let t=e,d=s,o=l,u=r;if(void 0===r){const e=n.isChildClassOf(s,a);l?(u=l,e&&(o=null)):void 0!==l||e||(u=s,o=null,d=null),void 0===l||e||(o=s,d=null)}return{paths:t,type:d,onProgress:o,onComplete:u}}loadByBundleAndArgs(e,s){s.dir?e.loadDir(s.paths,s.type,s.onProgress,s.onComplete):(s.paths,e.load(s.paths,s.type,s.onProgress,s.onComplete))}loadByArgs(e){if(e.bundle)if(l.bundles.has(e.bundle)){let s=l.bundles.get(e.bundle);this.loadByBundleAndArgs(s,e)}else l.loadBundle(e.bundle,((s,l)=>{s||this.loadByBundleAndArgs(l,e)}));else this.loadByBundleAndArgs(d,e)}}e("ResLoader",o);e("resLoader",new o);s._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./AudioManager.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./StorageManager.ts","./TimerManager.ts","./GUI.ts","./LayerManager.ts"],(function(e){var t,o,s,i,n,a,r,u,d,c,l,g,p,f,h,m,M,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.Node,n=e._decorator,a=e.Component,r=e.director,u=e.JsonAsset,d=e.game},function(e){c=e.oops},function(e){l=e.AudioManager},function(e){g=e.EventMessage},function(e){p=e.message},function(e){f=e.resLoader},function(e){h=e.StorageManager},function(e){m=e.TimerManager},function(e){M=e.GUI},function(e){R=e.LayerManager}],execute:function(){var y,v,b,A,C;s._RF.push({},"e93878cjjRLfK4lf0Xf0vCu","Root",void 0);const{ccclass:N,property:w}=n;var E=!1;e("Root",(y=w({type:i,tooltip:"游戏层"}),v=w({type:i,tooltip:"界面层"}),A=t((b=class extends a{constructor(...e){super(...e),o(this,"game",A,this),o(this,"gui",C,this),this.persistRootNode=null}onLoad(){E||(E=!0,this.enabled=!1,this.loadConfig())}async loadConfig(){this.persistRootNode=new i("PersistRootNode"),r.addPersistRootNode(this.persistRootNode),c.res=f;const e="config";await c.res.loadAsync(e,u)?(c.storage=new h,c.storage.init("a","b"),c.message=p,c.audio=this.persistRootNode.addComponent(l),c.audio.load(),c.timer=this.persistRootNode.addComponent(m),c.gui=new R(this.gui),this.enabled=!0,this.init(),this.run(),c.res.release(e)):this.loadConfig()}run(){}init(){this.gui.addComponent(M)}start(){}update(e){}onShow(){c.timer.load(),c.audio.resumeAll(),r.resume(),d.resume(),c.message.dispatchEvent(g.GAME_SHOW)}onHide(){c.timer.save(),c.audio.pauseAll(),r.pause(),d.pause(),c.message.dispatchEvent(g.GAME_HIDE)}}).prototype,"game",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(b.prototype,"gui",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b));s._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["cc","./env","./EncryptUtil.ts"],(function(e){var t,r,i,n;return{setters:[function(e){t=e.cclegacy,r=e.sys},function(e){i=e.PREVIEW},function(e){n=e.EncryptUtil}],execute:function(){t._RF.push({},"b4418kGWXVL94oiUB8yRYcS","StorageManager",void 0);e("StorageManager",class{constructor(){this._key=null,this._iv=null,this._id=null}init(e,t){n.initCrypto(e,t),this._key=n.md5(e),this._iv=n.md5(t)}setUser(e){this._id=e}set(e,t){var i=this.getKey(e);if(null!=e){if(this.encrypted&&(i=n.md5(i)),null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error(`解析失败，str = ${t}`)}else"number"==typeof t&&(t+="");this.encrypted&&null!=this._key&&null!=this._iv&&(t=n.aesEncrypt(`${t}`,this._key,this._iv)),r.localStorage.setItem(i,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")}get(e,t=""){if(null==e)return console.error("存储的key不能为空"),null;e=this.getKey(e),this.encrypted&&(e=n.md5(e));let i=r.localStorage.getItem(e);return null!=i&&""!==i&&this.encrypted&&null!=this._key&&null!=this._iv&&(i=n.aesDecrypt(i,this._key,this._iv)),null===i?t:i}getNumber(e,t=0){var r=this.get(e);return"0"==r?Number(r):Number(r)||t}getBoolean(e){return"true"===this.get(e).toLowerCase()}getJson(e,t){var r=this.get(e);return r&&JSON.parse(r)||t}remove(e){if(null!=e){var t=this.getKey(e);this.encrypted&&(t=n.md5(t)),r.localStorage.removeItem(t)}else console.error("存储的key不能为空")}clear(){r.localStorage.clear()}getKey(e){return null==this._id||""==this._id?e:`${this._id}_${e}`}get encrypted(){return!i}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"09b23Qi79RHjr1c6YFtSZZX","StringUtil",void 0);t("StringUtil",class{static guid(){let t="";for(let r=1;r<=32;r++){t+=Math.floor(16*Math.random()).toString(16),8!=r&&12!=r&&16!=r&&20!=r||(t+="-")}return t}static numberTotPermil(t){return t.toLocaleString()}static numberToThousand(t,r=2){var e=1e3;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","K","M","G"][n]}static numberToTenThousand(t,r=2){var e=1e4;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","万","亿","万亿"][n]}static format(t,r){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return r}static stringToArray1(t){return""==t?[]:t.split(",")}static stringToArray2(t){return""==t?[]:t.split("|")}static stringToArray3(t){return""==t?[]:t.split(":")}static stringToArray4(t){return""==t?[]:t.split(";")}static sub(t,r,e=!1){var n=/[^\x00-\xff]/g;if(t.replace(n,"mm").length<=r)return t;for(var a=Math.floor(r/2);a<t.length;a++)if(t.substr(0,a).replace(n,"mm").length>=r)return e?t.substr(0,a)+"...":t.substr(0,a);return t}static stringLen(t){for(var r=0,e=t.length,n=-1,a=0;a<e;a++)r+=(n=t.charCodeAt(a))>=0&&n<=128?1:2;return r}static IsEmpty(t){return null==t||null==t||0==t.length}static substitute(t,...r){if(null==t)return"";var e,n=r.length;1==n&&r[0]instanceof Array?n=(e=r[0]).length:e=r;for(var a=0;a<n;a++)t=t.replace(new RegExp("\\{"+a+"\\}","g"),e[a]);return t}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"b84166hoxVKY77Hf4nVZ5wt","Timer",void 0);e("Timer",class{get elapsedTime(){return this._elapsedTime}get step(){return this._step}set step(e){this._step=e,this._elapsedTime=0}get progress(){return this._elapsedTime/this._step}constructor(e=0){this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}update(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,this.callback?.call(this),!0))}reset(){this._elapsedTime=0}stop(){this._elapsedTime=0,this.step=-1}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["cc","./StringUtil.ts","./Timer.ts"],(function(e){var t,i,s,r,n;return{setters:[function(e){t=e.cclegacy,i=e.Component,s=e.game},function(e){r=e.StringUtil},function(e){n=e.Timer}],execute:function(){t._RF.push({},"9b8d0mLs0tL/r9EicZJUQaL","TimerManager",void 0);e("TimerManager",class extends i{constructor(...e){super(...e),this.times={},this.date_s=new Date,this.date_s_start=new Date,this.polymeric_s=0,this.date_c=new Date}update(e){for(let t in this.times){let i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}}onTimerComplete(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]}register(e,t,i,s){var m=new n;m.step=1;let o={};return o.id=r.guid(),o.timer=m,o.object=e,o.field=t,o.onSecond=i,o.onComplete=s,this.times[o.id]=o,o.id}unRegister(e){this.times[e]&&delete this.times[e]}setServerTime(e){this.polymeric_s=this.getTime(),this.date_s_start.setTime(e)}getServerTime(){return this.date_s_start.getTime()+this.getTime()-this.polymeric_s}getServerDate(){return this.date_s.setTime(this.getServerTime()),this.date_s}getClientTime(){return Date.now()}getClientDate(){return this.date_c.setTime(this.getClientTime()),this.date_c}getTime(){return s.totalTime}save(){for(let e in this.times)this.times[e].startTime=this.getTime()}load(){for(let e in this.times){let t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<=0?(i.object[i.field]=0,this.onTimerComplete(i)):this.times[e].startTime=null}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig.ts",["cc","./LayerManager.ts"],(function(e){var n,o;return{setters:[function(e){n=e.cclegacy},function(e){o=e.LayerType}],execute:function(){n._RF.push({},"84f38KwWwBG8pi4PVdkwrn1","UIConfig",void 0);let a=e("UIID",function(e){return e[e.Loading=1]="Loading",e[e.Window=2]="Window",e[e.Netinstable=3]="Netinstable",e[e.HotUp=4]="HotUp",e}({}));e("UIConfigData",{[a.Loading]:{layer:o.UI,prefab:"loading/prefab/loading",bundle:"resources"},[a.Netinstable]:{layer:o.PopUp,prefab:"common/prefab/netinstable"},[a.Window]:{layer:o.Dialog,prefab:"common/prefab/window"},[a.HotUp]:{layer:o.UI,prefab:"ui/uihotup/uihotupview"}});n._RF.pop()}}}));

System.register("chunks:///_virtual/UIHotUpView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./UpdatePanel.ts"],(function(t){var e,s,a,i,n,r,l,o,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){a=t.cclegacy,i=t._decorator,n=t.Component,r=t.sys,l=t.native},function(t){o=t.oops},function(t){h=t.UpdatePanel}],execute:function(){var p,g,c,f,d,U;a._RF.push({},"e3b5am9addB75Whv64Cmik/","UIHotUpView",void 0);const{ccclass:u,property:M}=i;t("UIHotUpView",(p=u("UIHotUpView"),g=M(h),p(((U=class t extends n{constructor(...e){super(...e),s(this,"panel",d,this),this.manifest="",this.storagePath="",this.assetsMgr=null,this.state=t.State.None}start(){r.isNative&&(this.panel.info.string="",o.res.load("project",((t,e)=>{if(t)this.panel.info.string+="\n【热更新界面】缺少热更新配置文件";else{this.manifest=e.nativeUrl,this.panel.info.string=this.manifest,this.storagePath=`${l.fileUtils.getWritablePath()}remote`,this.assetsMgr=new l.AssetsManager(this.manifest,this.storagePath,((t,e)=>{this.panel.info.string+="【热更新】客户端版本: "+t+", 当前最新版本: "+e;let s=t.split("."),a=e.split(".");for(let t=0;t<s.length;++t){let e=parseInt(s[t]),i=parseInt(a[t]||"0");if(e!==i)return e-i}return a.length>s.length?-1:0})),this.assetsMgr.setVerifyCallback(((t,e)=>{e.compressed,e.md5,e.path,e.size;return!0}));var s=this.assetsMgr.getLocalManifest();this.panel.info.string+="【热更新】热更资源存放路径: "+this.storagePath,this.panel.info.string+="【热更新】本地资源配置路径: "+this.manifest,this.panel.info.string+="【热更新】本地包地址: "+s.getPackageUrl(),this.panel.info.string+="【热更新】远程 project.manifest 地址: "+s.getManifestFileUrl(),this.panel.info.string+="【热更新】远程 version.manifest 地址: "+s.getVersionFileUrl(),this.checkUpdate()}})))}checkUpdate(){this.panel.info.string+="\ncheckUpdate()\n",this.assetsMgr?this.assetsMgr.getState()!==jsb.AssetsManager.State.UNINITED?this.assetsMgr.getLocalManifest().isLoaded()?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=t.State.Check,this.assetsMgr.checkUpdate()):this.panel.info.string+="【热更新】加载本地 manifest 失败 ...":this.panel.info.string+="【热更新】未初始化":this.panel.info.string+="【热更新】请先初始化"}onHotUpdateCallBack(e){let s=e.getEventCode();switch(s){case l.EventAssetsManager.ALREADY_UP_TO_DATE:this.panel.info.string+="【热更新】当前版本与远程版本一致且无须更新";break;case l.EventAssetsManager.NEW_VERSION_FOUND:this.panel.info.string+="【热更新】发现新版本,请更新";break;case l.EventAssetsManager.ASSET_UPDATED:this.panel.info.string+="【热更新】资产更新";break;case l.EventAssetsManager.UPDATE_PROGRESSION:this.state===t.State.Update&&(this.panel.info.string+="【热更新】更新中...",this.panel.fileLabel.string=e.getDownloadedFiles()+"/"+e.getTotalFiles(),this.panel.fileProgress.progress=e.getPercent());break;case l.EventAssetsManager.UPDATE_FINISHED:this.onUpdateFinished();break;default:this.onUpdateFailed(s)}}onUpdateFailed(t){this.assetsMgr.setEventCallback(null)}onUpdateFinished(){this.assetsMgr.setEventCallback(null);let t=l.fileUtils.getSearchPaths(),e=this.assetsMgr.getLocalManifest().getSearchPaths();Array.prototype.unshift.apply(t,e),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),l.fileUtils.setSearchPaths(t),this.panel.info.string+="【热更新】更新成功"}update(t){}}).State={None:0,Check:1,Update:2},d=e((f=U).prototype,"panel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=f))||c));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIMap.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3e627KW+chIcZKt68LgpeNq","UIMap",void 0);class n{constructor(){this.id=void 0,this.pid=void 0,this.parent=null,this.child=[],this.name=void 0,this.panel=void 0}}e("UIMap",class{constructor(){this.manager=void 0,this.nodes=new Map}init(e,t){for(var i in this.manager=e,t){var s=t[i],a=new n;a.id=parseInt(i),a.pid=s.parent,a.name=s.name,a.panel=s.panel,this.nodes.set(a.id,a)}this.nodes.forEach(((e,t)=>{e.parent=this.nodes.get(e.pid),e.parent&&e.parent.child.push(e)}))}pathFinding(e,t){var n=this.nodes.get(e),i=this.nodes.get(t),s=this.findUp(n),a=this.findUp(i);return s.forEach((e=>{this.manager.remove(e.id,!0)})),a.forEach((e=>{this.manager.open(e.id)})),{paths_close:s,paths_open:a}}findUp(e){for(var t=[],n=e;null!=n.parent;)t.push(n),n=n.parent;return t}release(){this.nodes.clear()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/UpdatePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,l,o,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,l=e.ProgressBar,o=e.Node,a=e._decorator,u=e.Component}],execute:function(){var s,c,p,b,f,h,y,g,d,m,z,P,w,B,L,v,U,_,j,k,D;r._RF.push({},"aa727OwajVMBpJT76jW88z3","UpdatePanel",void 0);const{ccclass:x,property:F}=a;e("UpdatePanel",(s=x("UpdatePanel"),c=F(n),p=F(l),b=F(n),f=F(l),h=F(n),y=F(o),g=F(o),d=F(o),m=F(o),s((w=t((P=class extends u{constructor(...e){super(...e),i(this,"info",w,this),i(this,"fileProgress",B,this),i(this,"fileLabel",L,this),i(this,"byteProgress",v,this),i(this,"byteLabel",U,this),i(this,"close",_,this),i(this,"checkBtn",j,this),i(this,"retryBtn",k,this),i(this,"updateBtn",D,this)}onLoad(){}}).prototype,"info",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(P.prototype,"fileProgress",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(P.prototype,"fileLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(P.prototype,"byteProgress",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(P.prototype,"byteLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(P.prototype,"close",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(P.prototype,"checkBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(P.prototype,"retryBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(P.prototype,"updateBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=P))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["cc","./ResLoader.ts"],(function(e){var t,a,n,o,r,i,c,l,s;return{setters:[function(e){t=e.cclegacy,a=e.UITransform,n=e.v3,o=e.Size,r=e.Prefab,i=e.instantiate,c=e.Animation,l=e.AnimationClip},function(e){s=e.resLoader}],execute:function(){t._RF.push({},"433d18oWflP+b23sajcockH","ViewUtil",void 0);class d{static nodeTreeInfoLite(e,t){let a=t||new Map,n=e.children;for(let e=0;e<n.length;e++){let t=n[e];t.name.indexOf(" ")<0&&a.set(t.name,t),d.nodeTreeInfoLite(t,a)}return a}static findNodes(e,t,a){let n=a||[],o=t.children;for(let t=0;t<o.length;t++){let a=o[t].name;e.test(a)&&n.push(o[t]),d.findNodes(e,o[t],n)}return n}static calculateASpaceToBSpacePos(e,t,n){var o=e.getComponent(a).convertToWorldSpaceAR(n);return t.getComponent(a).convertToNodeSpaceAR(o)}static calculateScreenPosToSpacePos(e,t){let o=e.getUILocation(),r=n(o.x,o.y);return t.getComponent(a).convertToNodeSpaceAR(r)}static uniformScale(e,t,a,n){var r,i=a/e,c=n/t;return r=i<c?i:c,new o(Math.floor(e*r),Math.floor(t*r))}static createPrefabNode(e){var t=s.get(e,r);return i(t)}static createPrefabNodeAsync(e){return new Promise((async(t,a)=>{s.load(e,r,((a,n)=>{if(a)console.error(`名为【${e}】的资源加载失败`);else{var o=this.createPrefabNode(e);t(o)}}))}))}static addNodeAnimation(e,t,a=!0,n=!1){if(t&&t.isValid){var o=t.getComponent(c);null==o&&(o=t.addComponent(c));var r=s.get(e,l);if(r&&!(a&&o.getState(r.name)&&o.getState(r.name).isPlaying)){if(n)return o.defaultClip=r,void o.play();o.once(c.EventType.FINISHED,(()=>{o.defaultClip&&o.play()}),this),o.getState(r.name)||o.createState(r,r.name),o.play(r.name)}}}}e("ViewUtil",d),t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});