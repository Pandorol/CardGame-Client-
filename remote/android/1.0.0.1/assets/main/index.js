System.register("chunks:///_virtual/AudioEffect.ts",["cc","./Oops.ts"],(function(e){var s,t,i,r,c,o;return{setters:[function(e){s=e.cclegacy,t=e.AudioSource,i=e.AudioClip,r=e.error,c=e._decorator},function(e){o=e.oops}],execute:function(){var f;s._RF.push({},"05775eUvYJCKIT7OnaHnuf1","AudioEffect",void 0);const{ccclass:u}=c;e("AudioEffect",u("AudioEffect")(f=class extends t{constructor(...e){super(...e),this.effects=new Map,this._progress=0}get progress(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress}set progress(e){this._progress=e,this.currentTime=e*this.duration}load(e,s,t){if(null==t&&(t=o.res.defaultBundleName),e instanceof i)this.effects.set(e.uuid,{source:!0,ac:e}),this.playOneShot(e,this.volume),s&&s();else if(0==this.effects.has(e))o.res.load(t,e,i,((i,c)=>{if(i)return void r(i);let o=`${t}:${e}`;this.effects.set(o,{source:!1,bundle:t,path:e,ac:c}),this.playOneShot(c,this.volume),s&&s()}));else{const t=this.effects.get(e);this.playOneShot(t.ac,this.volume),s&&s()}}releaseAll(){for(let e in this.effects){const s=this.effects.get(e);s.source?this.release(s.ac):this.release(s.path,s.bundle)}this.effects.clear()}release(e,s){null==s&&(s=o.res.defaultBundleName);var t=void 0;if(e instanceof i)t=e,this.effects.has(t.uuid)&&(this.effects.delete(t.uuid),t.decRef());else{const t=`${s}:${e}`,i=this.effects.get(t);i&&(this.effects.delete(t),o.res.release(i.path,i.bundle))}}})||f);s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc","./Oops.ts","./AudioEffect.ts","./AudioMusic.ts"],(function(t){var s,i,e,c,u;return{setters:[function(t){s=t.cclegacy,i=t.Component},function(t){e=t.oops},function(t){c=t.AudioEffect},function(t){u=t.AudioMusic}],execute:function(){s._RF.push({},"7f458l13nhEI6UJYKnHPJnu","AudioManager",void 0);const h="game_audio";t("AudioManager",class extends i{constructor(...t){super(...t),this.music=null,this.effect=null,this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0}setMusicComplete(t=null){this.music.onComplete=t}playMusic(t,s,i){this._switch_music&&(this.music.loop=!1,this.music.load(t,s,i))}playMusicLoop(t,s){this._switch_music&&(this.music.loop=!0,this.music.load(t,null,s))}stopMusic(){this._switch_music&&this.music.playing&&this.music.stop()}get progressMusic(){return this.music.progress}set progressMusic(t){this.music.progress=t}get volumeMusic(){return this._volume_music}set volumeMusic(t){this._volume_music=t,this.music.volume=t}get switchMusic(){return this._switch_music}set switchMusic(t){this._switch_music=t,0==t&&this.music.stop()}playEffect(t,s,i){this._switch_effect&&this.effect.load(t,s,i)}releaseEffect(t,s){this.effect.release(t,s)}get volumeEffect(){return this._volume_effect}set volumeEffect(t){this._volume_effect=t,this.effect.volume=t}get switchEffect(){return this._switch_effect}set switchEffect(t){this._switch_effect=t,0==t&&this.effect.stop()}resumeAll(){this.music&&(!this.music.playing&&this.music.progress>0&&this.music.play(),!this.effect.playing&&this.effect.progress>0&&this.effect.play())}pauseAll(){this.music&&(this.music.playing&&this.music.pause(),this.effect.playing&&this.effect.pause())}stopAll(){this.music&&(this.music.stop(),this.effect.stop())}save(){this.local_data.volume_music=this._volume_music,this.local_data.volume_effect=this._volume_effect,this.local_data.switch_music=this._switch_music,this.local_data.switch_effect=this._switch_effect,e.storage.set(h,this.local_data)}load(){if(this.music=this.getComponent(u)||this.addComponent(u),this.effect=this.getComponent(c)||this.addComponent(c),this.local_data=e.storage.getJson(h),this.local_data)try{this.setState()}catch(t){this.setStateDefault()}else this.setStateDefault();this.music&&(this.music.volume=this._volume_music),this.effect&&(this.effect.volume=this._volume_effect)}setState(){this._volume_music=this.local_data.volume_music,this._volume_effect=this.local_data.volume_effect,this._switch_music=this.local_data.switch_music,this._switch_effect=this.local_data.switch_effect}setStateDefault(){this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["cc","./Oops.ts"],(function(s){var t,e,i,l,n;return{setters:[function(s){t=s.cclegacy,e=s.AudioSource,i=s.AudioClip,l=s._decorator},function(s){n=s.oops}],execute:function(){var u;t._RF.push({},"c2094quRnRC2qvDeFMwFgU4","AudioMusic",void 0);const{ccclass:r,menu:h}=l;s("AudioMusic",r("AudioMusic")(u=class extends e{constructor(...s){super(...s),this.onComplete=null,this._progress=0,this._isLoading=!1,this._bundleName=null,this._url=null,this._bundleName_next=null,this._url_next=null}get progress(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress}set progress(s){this._progress=s,this.currentTime=s*this.duration}async load(s,t,e){if(null==e&&(e=n.res.defaultBundleName),this._isLoading)return this._bundleName_next=e,void(this._url_next=s);this._isLoading=!0;var l=await n.res.loadAsync(e,s,i);l&&(this._isLoading=!1,null!=this._url_next?(this.release(),this.load(this._url_next,t,this._bundleName_next),this._bundleName_next=this._url_next=null):(t&&t(),this.playPrepare(e,s,l)))}playPrepare(s,t,e){this.playing&&this.stop(),this.release(),this.enabled=!0,this.clip=e,this.play(),this._bundleName=s,this._url=t}update(s){0==this.playing&&0==this.progress&&(this.enabled=!1,this.clip=null,this._bundleName=this._url=null,this.onComplete&&this.onComplete())}release(){this._url&&(this.stop(),this.clip=null,n.res.release(this._url,this._bundleName)),this._bundleName=this._url=null}})||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Badge.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,s,o,r,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Enum,o=t._decorator,r=t.Sprite,a=t.Label,c=t.Vec3}],execute:function(){var l,h,u,p,T,d,g,P;n._RF.push({},"fd911TV25hIA7feGwuTWfag","Badge",void 0);const{ccclass:b,property:f}=o;let _=t("Position",function(t){return t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t}({}));s(_);t("Badge",(l=b("Badge"),h=f({tooltip:"内容"}),u=f({type:_,tooltip:"位置\n 0: 左上角 \n 1: 右上角"}),l(((P=class extends r{constructor(...t){super(...t),i(this,"string",d,this),i(this,"position",g,this),this.label=null}get text(){return this.string}set text(t){this.string=t,this.setText(t)}onLoad(){this.label=this.node.getComponentInChildren(a),this.setPosition(this.position)}setPosition(t){const e=this.node.parent.uiTransform.contentSize;switch(t){case _.TOP_LEFT:{const t=-e.width/2,i=e.height/2;this.node.setPosition(new c(t,i,0));break}case _.TOP_RIGHT:{const t=e.width/2,i=e.height/2;this.node.setPosition(new c(t,i,0));break}}}setText(t){this.label&&(this.label.string=t)}}).POSITION=void 0,d=e((T=P).prototype,"string",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"6"}}),g=e(T.prototype,"position",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.TOP_LEFT}}),p=T))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./ButtonSimple.ts"],(function(t){var e,n,o,i,s,a,r,c,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t._decorator,s=t.Sprite,a=t.Animation,r=t.AnimationClip,c=t.Node},function(t){u=t.oops},function(t){l=t.default}],execute:function(){var d,p,f,h,m,y;o._RF.push({},"111a8fdXAJLrIGRi0sXwm3X","ButtonEffect",void 0);const{ccclass:g,property:_,menu:b}=i;t("default",(d=g("ButtonEffect"),p=b("ui/button/ButtonEffect"),f=_({tooltip:"是否开启"}),d(h=p((y=e((m=class extends l{constructor(...t){super(...t),n(this,"disabledEffect",y,this),this.anim=void 0}get grayscale(){return this.node.getComponent(s).grayscale}set grayscale(t){this.node.getComponent(s)&&(this.node.getComponent(s).grayscale=t)}onLoad(){this.anim=this.node.addComponent(a);var t=u.res.get("common/anim/button_scale_start",r),e=u.res.get("common/anim/button_scale_end",r);this.anim.defaultClip=t,this.anim.createState(t,t?.name),this.anim.createState(e,e?.name),this.node.on(c.EventType.TOUCH_START,this.onTouchtStart,this),super.onLoad()}onTouchtStart(t){this.disabledEffect||this.anim.play("button_scale_start")}onTouchEnd(t){this.disabledEffect||this.anim.play("button_scale_end"),super.onTouchEnd(t)}onDestroy(){this.node.off(c.EventType.TOUCH_START,this.onTouchtStart,this),super.onDestroy()}}).prototype,"disabledEffect",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=m))||h)||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonSimple.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,o,i,n,s,u,c,r,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.AudioClip,s=t._decorator,u=t.Component,c=t.Node,r=t.game},function(t){h=t.oops}],execute:function(){var p,l,a,f,d,E,T,m,y,b;i._RF.push({},"fb8faWLFo9E5bzXhJwJYW3x","ButtonSimple",void 0);const{ccclass:C,property:v,menu:g}=s;t("default",(p=C("ButtonSimple"),l=g("ui/button/ButtonSimple"),a=v({tooltip:"是否只触发一次"}),f=v({tooltip:"每次触发间隔"}),d=v({tooltip:"触摸音效",type:n}),p(E=l((m=e((T=class extends u{constructor(...t){super(...t),o(this,"once",m,this),o(this,"interval",y,this),o(this,"effect",b,this),this.touchCount=0,this.touchtEndTime=0}onLoad(){this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchEnd(t){if(this.once){if(this.touchCount>0)return void(t.propagationStopped=!0);this.touchCount++}this.touchtEndTime&&r.totalTime-this.touchtEndTime<this.interval?t.propagationStopped=!0:(this.touchtEndTime=r.totalTime,this.playEffect())}playEffect(){this.effect&&h.audio.playEffect(this.effect)}onDestroy(){this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.effect&&h.audio.releaseEffect(this.effect)}}).prototype,"once",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=e(T.prototype,"interval",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),b=e(T.prototype,"effect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=T))||E)||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonTouchLong.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonEffect.ts"],(function(t){var o,e,i,n,s,u;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.EventHandler,s=t._decorator},function(t){u=t.default}],execute:function(){var c,h,r,a,p,l,T,_;i._RF.push({},"85f2b3kHBJCbaPx79hYoiy3","ButtonTouchLong",void 0);const{ccclass:g,property:m,menu:f}=s;t("ButtonTouchLong",(c=g("ButtonTouchLong"),h=f("ui/button/ButtonTouchLong"),r=m({tooltip:"长按时间（秒）"}),a=m({type:[n],tooltip:"长按时间（秒）"}),c(p=h((T=o((l=class extends u{constructor(...t){super(...t),e(this,"time",T,this),e(this,"clickEvents",_,this),this._passTime=0,this._isTouchLong=!0,this._event=null}onLoad(){this._isTouchLong=!1,super.onLoad()}onTouchtStart(t){this._event=t,this._passTime=0,super.onTouchtStart(t)}onTouchEnd(t){this._passTime>this.time&&(t.propagationStopped=!0),this._event=null,this._passTime=0,this._isTouchLong=!1,super.onTouchEnd(t)}removeTouchLong(){this._event=null,this._isTouchLong=!1}update(t){this._event&&!this._isTouchLong&&(this._passTime+=t,this._passTime>=this.time&&(this._isTouchLong=!0,this.clickEvents.forEach((t=>{t.emit([t.customEventData]),this.playEffect()})),this.removeTouchLong()))}}).prototype,"time",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=o(l.prototype,"clickEvents",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=l))||p)||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/ChatDatas.ts",["cc","./Oops.ts","./StringUtil.ts","./EventMessage_work.ts","./StorageKeys.ts"],(function(s){var e,t,a,r,i;return{setters:[function(s){e=s.cclegacy},function(s){t=s.oops},function(s){a=s.StringUtil},function(s){r=s.EventMessage_work},function(s){i=s.StorageKeys}],execute:function(){e._RF.push({},"34a0d3n2l1BmIQgQRfMi/jb","ChatDatas",void 0);class n{constructor(){this.userid=void 0,this.username=void 0,this.message=void 0,this.time=void 0}}s("OneChatMessage",n);class u{get numusers(){return this._numusers}get allmessages(){return this._allmessages}constructor(){this._numusers=0,this._allmessages=[]}init(){this._allmessages=this.StoragePrase(),t.message.on(r.RecvChatMsg,this.RecvMsg,this),t.message.on(r.RecvChatNumUsers,this.RecvChatNumUsers,this)}RecvChatNumUsers(s,e){this._numusers=e.numUsers}RecvMsg(s,e){let i=new n;i.userid=e.userid?e.userid:"",i.username=e.username?e.username:"",i.message=e.message?e.message:"",i.time=a.format(new Date,"yyyy-MM-dd hh:mm"),this._allmessages.push(i),t.message.dispatchEvent(r.ChatMsgAdded.toString())}StoragePrase(){let s=[],e=t.storage.getJson(i.chathistorys,[]);if(e.length)for(let t=0;t<e.length;t++){let a=e[t],r=new n;r.userid=a.userid?a.userid:"",r.username=a.username?a.username:"",r.message=a.message?a.message:"",r.time=a.time?a.time:"",s.push()}return s}}s("ChatMessageMgr",u);s("chatmgr",new u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc","./Oops.ts"],(function(t){var a,e;return{setters:[function(t){a=t.cclegacy},function(t){e=t.oops}],execute:function(){a._RF.push({},"f89a0d6xLBKdJNpo2jO1w47","Config",void 0);t("Config",class{get frameRate(){return this._data.config.frameRate}get localDataKey(){return this._data.config.localDataKey}get localDataIv(){return this._data.config.localDataIv}get httpServer(){return this._data.config.httpServer}get httpTimeout(){return this._data.config.httpTimeout}get data(){return this._data}constructor(t){this._data=null,this._data=Object.freeze(t.json),e.log.logConfig(this._data,"配置")}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,h,g,a,c,p,C,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t._decorator,l=t.Component,r=t.Color,h=t.Canvas,g=t.UITransform,a=t.instantiate,c=t.Label,p=t.RichText,C=t.Toggle,d=t.Button,m=t.director}],execute:function(){var u,L,M,b,T,f,x,S,E;i._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);const{ccclass:v,property:I}=s;t("DebugViewRuntimeControl",(u=v("internal.DebugViewRuntimeControl"),L=I(n),M=I(n),b=I(n),u((x=e((f=class extends l{constructor(...t){super(...t),o(this,"compositeModeToggle",x,this),o(this,"singleModeToggle",S,this),o(this,"EnableAllCompositeModeButton",E,this),this._single=0,this.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],this.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],this.strMisc=["CSM Layer Coloration","Lighting With Albedo"],this.compositeModeToggleList=[],this.singleModeToggleList=[],this.miscModeToggleList=[],this.textComponentList=[],this.labelComponentList=[],this.textContentList=[],this.hideButtonLabel=void 0,this._currentColorIndex=0,this.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],this.color=[r.WHITE,r.BLACK,r.RED,r.GREEN,r.BLUE]}start(){if(!this.node.parent.getComponent(h))return void console.error("debug-view-runtime-control should be child of Canvas");const t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height;let i=.1*e-e,n=o-.1*o;const s=this.node.getChildByName("MiscMode"),l=a(s);l.parent=this.node,l.name="Buttons";const m=a(s);m.parent=this.node,m.name="Titles";for(let t=0;t<2;t++){const e=a(this.EnableAllCompositeModeButton.getChildByName("Label"));e.setPosition(i+(t>0?450:150),n,0),e.setScale(.75,.75,.75),e.parent=m;const o=e.getComponent(c);o.string=t?"----------Composite Mode----------":"----------Single Mode----------",o.color=r.WHITE,o.overflow=0,this.labelComponentList[this.labelComponentList.length]=o}n-=20;let u=0;for(let t=0;t<this.strSingle.length;t++,u++){t===this.strSingle.length>>1&&(i+=200,u=0);const e=t?a(this.singleModeToggle):this.singleModeToggle;e.setPosition(i,n-20*u,0),e.setScale(.5,.5,.5),e.parent=this.singleModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strSingle[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[t]=e}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(d.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;let L=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=L;const M=a(this.EnableAllCompositeModeButton);M.setPosition(i+90,n,0),M.setScale(.5,.5,.5),M.on(d.EventType.CLICK,this.changeTextColor,this),M.parent=l,L=M.getComponentInChildren(c),L.string="TextColor",this.labelComponentList[this.labelComponentList.length]=L;const b=a(this.EnableAllCompositeModeButton);b.setPosition(i+200,n,0),b.setScale(.5,.5,.5),b.on(d.EventType.CLICK,this.hideUI,this),b.parent=this.node.parent,L=b.getComponentInChildren(c),L.string="Hide UI",this.labelComponentList[this.labelComponentList.length]=L,this.hideButtonLabel=L,n-=40;for(let t=0;t<this.strMisc.length;t++){const e=a(this.compositeModeToggle);e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=s;const o=e.getComponentInChildren(p);o.string=this.strMisc[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string;e.getComponent(C).isChecked=!!t,e.on(C.EventType.TOGGLE,t?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[t]=e}n-=150;for(let t=0;t<this.strComposite.length;t++){const e=t?a(this.compositeModeToggle):this.compositeModeToggle;e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=this.compositeModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strComposite[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[t]=e}}isTextMatched(t,e){let o=new String(t);const i=o.search(">");return-1===i?t===e:(o=o.substr(i+1),o=o.substr(0,o.search("<")),o===e)}toggleSingleMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let t=0;t<this.strSingle.length;t++)this.isTextMatched(o.string,this.strSingle[t])&&(e.singleMode=t)}toggleCompositeMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)}toggleLightingWithAlbedo(t){m.root.debugView.lightingWithAlbedo=t.isChecked}toggleCSMColoration(t){m.root.debugView.csmLayerColoration=t.isChecked}enableAllCompositeMode(t){const e=m.root.debugView;e.enableAllCompositeMode(!0);for(let t=0;t<this.compositeModeToggleList.length;t++){this.compositeModeToggleList[t].getComponent(C).isChecked=!0}let o=this.miscModeToggleList[0].getComponent(C);o.isChecked=!1,e.csmLayerColoration=!1,o=this.miscModeToggleList[1].getComponent(C),o.isChecked=!0,e.lightingWithAlbedo=!0}hideUI(t){const e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}changeTextColor(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(let t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(let t=0;t<this.labelComponentList.length;t++)this.labelComponentList[t].color=this.color[this._currentColorIndex]}onLoad(){}update(t){}}).prototype,"compositeModeToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(f.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(f.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(s){var n;return{setters:[function(s){n=s.cclegacy}],execute:function(){n._RF.push({},"100a6mBjXNII4GS3xF4QKNn","Defines",void 0);s("ViewParams",class{constructor(){this.config=null,this.params=null,this.callbacks=null,this.valid=!0,this.node=null}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["cc","./Oops.ts"],(function(e){var o,n,t,s;return{setters:[function(e){o=e.cclegacy,n=e.Component,t=e._decorator},function(e){s=e.oops}],execute:function(){var i;o._RF.push({},"51c3eGR1dVB3qbyicFaZ3xD","DelegateComponent",void 0);const{ccclass:a}=t;e("DelegateComponent",a("DelegateComponent")(i=class extends n{constructor(...e){super(...e),this.vp=null,this.onCloseWindow=null}add(){this.applyComponentsFunction(this.node,"onAdded",this.vp.params),"function"==typeof this.vp.callbacks.onAdded&&this.vp.callbacks.onAdded(this.node,this.vp.params)}remove(e){this.vp.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",this.vp.params),"function"==typeof this.vp.callbacks.onBeforeRemove?this.vp.callbacks.onBeforeRemove(this.node,this.onBeforeRemoveNext.bind(this,e)):this.removed(this.vp,e))}onBeforeRemoveNext(e){this.removed(this.vp,e)}removed(e,o){e.valid=!1,e.callbacks&&"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),this.onCloseWindow&&this.onCloseWindow(e),o?(this.node.destroy(),s.res.release(e.config.prefab)):this.node.removeFromParent()}onDestroy(){this.applyComponentsFunction(this.node,"onRemoved",this.vp.params),this.vp=null}applyComponentsFunction(e,o,n){for(let t=0;t<e.components.length;t++){let s=e.components[t],i=s[o];i&&i.call(s,n)}}})||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/DirectorExt.ts",["cc"],(function(){var e,t,c,i;return{setters:[function(o){e=o.cclegacy,t=o.Director,c=o.director,i=o.js}],execute:function(){if(e._RF.push({},"42dc9X0fihJ+6Sep8q58wWO","DirectorExt",void 0),!t.prototype["__$cc-director-speed-extension$__"]){t.prototype["__$cc-director-speed-extension$__"]=!0;let e=c.tick.bind(c);c.tick=function(t){t*=c.globalGameTimeScale,e(t)},i.mixin(t.prototype,{globalGameTimeScale:1})}e._RF.pop()}}}));

System.register("chunks:///_virtual/EncryptUtil.ts",["cc","./index.js"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default}],execute:function(){e._RF.push({},"dd271gVXURE+Y1LpkIv2lrA","EncryptUtil",void 0);class r{static md5(t){return i.MD5(t).toString()}static initCrypto(t,e){this.key=t,this.iv=i.enc.Hex.parse(e)}static aesEncrypt(t,e,r){return i.AES.encrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString()}static aesDecrypt(t,e,r){return i.AES.decrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString(i.enc.Utf8)}}t("EncryptUtil",r),r.key=null,r.iv=null,r.JsonFormatter={stringify:function(t){const e={ct:t.ciphertext.toString(i.enc.Base64)};return t.iv&&(e.iv=t.iv.toString()),t.salt&&(e.s=t.salt.toString()),JSON.stringify(e)},parse:function(t){const e=JSON.parse(t),r=i.lib.CipherParams.create({ciphertext:i.enc.Base64.parse(e.ct)});return e.iv&&(r.iv=i.enc.Hex.parse(e.iv)),e.s&&(r.salt=i.enc.Hex.parse(e.s)),r}},e._RF.pop()}}}));

System.register("chunks:///_virtual/EventDispatcher.ts",["cc","./MessageManager.ts"],(function(s){var t,e;return{setters:[function(s){t=s.cclegacy},function(s){e=s.MessageEventData}],execute:function(){t._RF.push({},"b8b6aZClDJJR7OIKu5HOA15","EventDispatcher",void 0);s("EventDispatcher",class{constructor(){this._msg=null}on(s,t,n){null==this._msg&&(this._msg=new e),this._msg.on(s,t,n)}off(s){this._msg&&this._msg.off(s)}dispatchEvent(s,...t){null==this._msg&&(this._msg=new e),this._msg.dispatchEvent(s,...t)}destroy(){this._msg&&this._msg.clear(),this._msg=null}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage_work.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"443c7OppQBM3IPcdT1H0SG+","EventMessage_work",void 0);e("EventMessage_work",function(e){return e.RecvChatMsg="RecvChatMsg",e.ChatMsgAdded="ChatMsgAdded",e.RecvChatNumUsers="RecvChatNumUsers",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["cc"],(function(E){var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){e._RF.push({},"ac99ax/W7ZKRbHsw2Uvkjoh","EventMessage",void 0);E("EventMessage",function(E){return E.GAME_SHOW="GAME_ENTER",E.GAME_HIDE="GAME_EXIT",E.GAME_RESIZE="GAME_RESIZE",E.GAME_FULL_SCREEN="GAME_FULL_SCREEN",E.GAME_ORIENTATION="GAME_ORIENTATION",E}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy,a=e.director}],execute:function(){t._RF.push({},"4ed48FWr7xD5b6pYKtxKlfl","GameManager",void 0);e("GameManager",class{constructor(e){this.root=void 0,this.root=e}setTimeScale(e){a.globalGameTimeScale=e}getTimeScale(){return a.globalGameTimeScale}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/GUI.ts",["cc","./Oops.ts"],(function(t){var i,e,s,o,r,n,h,a,g;return{setters:[function(t){i=t.cclegacy,e=t.Component,s=t.UITransform,o=t.view,r=t.math,n=t.screen,h=t.ResolutionPolicy,a=t._decorator},function(t){g=t.oops}],execute:function(){var l;i._RF.push({},"995a5UjgLBIjobJ8q0/S/e4","GUI",void 0);const{ccclass:c}=a;t("GUI",c("GUI")(l=class extends e{constructor(...t){super(...t),this.portrait=void 0,this.portraitDrz=null,this.landscapeDrz=null,this.transform=null}onLoad(){this.init()}init(){this.transform=this.getComponent(s),o.getDesignResolutionSize().width>o.getDesignResolutionSize().height?(this.landscapeDrz=o.getDesignResolutionSize(),this.portraitDrz=new r.Size(this.landscapeDrz.height,this.landscapeDrz.width)):(this.portraitDrz=o.getDesignResolutionSize(),this.landscapeDrz=new r.Size(this.portraitDrz.height,this.portraitDrz.width)),this.resize()}resize(){var t;t=o.getDesignResolutionSize().width>o.getDesignResolutionSize().height?this.landscapeDrz:this.portraitDrz;var i=n.windowSize,e=i.width,s=i.height,r=e,a=s;e/s>t.width/t.height?(r=(a=t.height)*e/s,this.portrait=!1):(a=(r=t.width)*s/e,this.portrait=!0),o.setDesignResolutionSize(r,a,h.UNKNOWN),this.transform.width=r,this.transform.height=a,g.log.logView(t,"设计尺寸"),g.log.logView(i,"屏幕尺寸")}})||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["cc"],(function(e){var t,r,s;return{setters:[function(e){t=e.cclegacy,r=e.error,s=e.warn}],execute:function(){t._RF.push({},"7d1fdWlRvhLPpJvXTalo/mv","HttpRequest",void 0);var n={},u={};let a=e("HttpEvent",function(e){return e.NO_NETWORK="http_request_no_network",e.UNKNOWN_ERROR="http_request_unknown_error",e.TIMEOUT="http_request_timout",e}({}));class i{constructor(){this.isSucc=!1,this.res=void 0,this.err=void 0}}e("HttpReturn",i);e("HttpRequest",class{constructor(){this.server="http://127.0.0.1/",this.timeout=1e4,this.header=new Map}addHeader(e,t){this.header.set(e,t)}get(e,t,r=null){this.sendRequest(e,r,!1,t)}getAsync(e,t=null){return new Promise(((r,s)=>{this.sendRequest(e,t,!1,(e=>{r(e)}))}))}getByArraybuffer(e,t,r=null){this.sendRequest(e,r,!1,t,"arraybuffer",!1)}getAsyncByArraybuffer(e,t=null){return new Promise(((r,s)=>{this.sendRequest(e,t,!1,(e=>{r(e)}),"arraybuffer",!1)}))}post(e,t,r=null){this.sendRequest(e,r,!0,t)}postAsync(e,t=null){return new Promise(((r,s)=>{this.sendRequest(e,t,!0,(e=>{r(e)}))}))}abort(e){var t=n[this.server+e];t&&t.abort()}getParamString(e){var t="";for(var r in e){let n=e[r];if(n instanceof Object)for(var s in n)t+=`${s}=${n[s]}&`;else t+=`${r}=${n}&`}return t.substring(0,t.length-1)}sendRequest(e,t,o,c,h,l=!0){if(null!=e&&""!=e){var d,p,f="";if(d=0==e.toLocaleLowerCase().indexOf("http")?e:this.server+e,t?(f=this.getParamString(t),p=d.indexOf("?")>-1?d+"&"+f:d+"?"+f):p=d,null==n[p]||u[p]!=f){var R=new XMLHttpRequest;n[p]=R,u[p]=f,o?R.open("POST",d):R.open("GET",p);for(const[e,t]of this.header)R.setRequestHeader(e,t);var v={};v.url=d,v.params=t,l&&(R.timeout=this.timeout,R.ontimeout=()=>{this.deleteCache(p),y.isSucc=!1,y.err=a.TIMEOUT,c(v)});var y=new i;R.onloadend=()=>{500==R.status&&(this.deleteCache(p),y.isSucc=!1,y.err=a.NO_NETWORK,c(y))},R.onerror=()=>{this.deleteCache(p),y.isSucc=!1,0==R.readyState||1==R.readyState||0==R.status?y.err=a.NO_NETWORK:y.err=a.UNKNOWN_ERROR,c(y)},R.onreadystatechange=()=>{4==R.readyState&&(this.deleteCache(p),200==R.status&&c&&(y.isSucc=!0,"arraybuffer"==h?(R.responseType=h,y.res=R.response):y.res=JSON.parse(R.response),c(y)))},null==t||""==t?R.send():R.send(f)}else s(`地址【${d}】已正在请求中，不能重复请求`)}else r("请求地址不能为空")}deleteCache(e){delete n[e],delete u[e]}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./ResLoader.ts"],(function(e){var s,t,n;return{setters:[function(e){s=e.cclegacy,t=e.JsonAsset},function(e){n=e.resLoader}],execute:function(){s._RF.push({},"92590UCu09DGb9od0SixV6W","JsonUtil",void 0);var a="excelconfig/",o=new Map;e("JsonUtil",class{static get(e){if(o.has(e))return o.get(e)}static load(e,s){if(o.has(e))s(o.get(e));else{var r=a+e;n.load(r,t,((t,n)=>{t?(console.warn(t.message),s(null)):(o.set(e,n.json),s(n.json))}))}}static loadAsync(e){return new Promise(((s,r)=>{if(o.has(e))s(o.get(e));else{var l=a+e;n.load(l,t,((t,n)=>{t?(console.warn(t.message),s(null)):(o.set(e,n.json),s(n.json))}))}}))}static release(e){var s=a+e;o.delete(e),n.release(s)}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/LabelChange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LabelNumber.ts"],(function(i){var t,e,s,n,a;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){s=i.cclegacy,n=i._decorator},function(i){a=i.default}],execute:function(){var h,l,c;s._RF.push({},"3b27a17WwpPopSYGtZbJnnv","LabelChange",void 0);const{ccclass:r,property:u,menu:o}=n;i("LabelChange",r("LabelChange")(h=o("ui/label/LabelChange")((c=t((l=class extends a{constructor(...i){super(...i),e(this,"isInteger",c,this),this.duration=0,this.callback=void 0,this.isBegin=!1,this.speed=0,this.end=0}changeTo(i,t,e){0!=i?this.playAnim(i,this.num,t,e):e&&e()}changeBy(i,t,e){0!=i?this.playAnim(i,this.num,this.num+t,e):e&&e()}stop(i=!0){this.num=this.end,this.isBegin=!1,i&&this.callback&&this.callback()}playAnim(i,t,e,s){this.duration=i,this.end=e,this.callback=s,this.speed=(e-t)/i,this.num=t,this.isBegin=!0}isEnd(i){return this.speed>0?i>=this.end:i<=this.end}update(i){if(this.isBegin){if(this.num==this.end)return this.isBegin=!1,void(this.callback&&this.callback());let t=this.num+i*this.speed;this.isInteger&&(t=this.end<this.num?Math.floor(t):Math.ceil(t)),this.isEnd(t)&&(t=this.end,this.isBegin=!1,this.callback&&this.callback()),this.num=t}}}).prototype,"isInteger",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=l))||h)||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/LabelNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,o,u,n;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t._decorator,u=t.Label,n=t.error}],execute:function(){var s,a,l,p,b,c,m,h,y;i._RF.push({},"1adabWuaIJFxbsUATUQ07Zh","LabelNumber",void 0);const{ccclass:f,property:d,menu:L}=o;t("default",(s=f("LabelNumber"),a=L("ui/label/LabelNumber"),l=d({tooltip:"数字"}),p=d({tooltip:"数字"}),b=d({tooltip:"货币符号"}),s(c=a((h=e((m=class extends u{constructor(...t){super(...t),r(this,"_num",h,this),r(this,"symbol",y,this)}get num(){return this._num}set num(t){this._num=t,this.updateLabel()}start(){this.updateLabel()}updateLabel(){"number"!=typeof this._num&&n("[LabelNumber] num不是一个合法数字"),this.string=this.num.toString()+this.symbol}}).prototype,"_num",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(m.prototype,"num",[p],Object.getOwnPropertyDescriptor(m.prototype,"num"),m.prototype),y=e(m.prototype,"symbol",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=m))||c)||c));i._RF.pop()}}}));

System.register("chunks:///_virtual/LabelTime.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,o,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t._decorator,s=t.Label}],execute:function(){var n,l,a,h,c,u,d,m,p,b,f,g;r._RF.push({},"ebea0v92NBGfa+K4p+iBDg9","LabelTime",void 0);const{ccclass:y,property:D,menu:S}=o;t("default",(n=y("LabelTime"),l=S("ui/label/LabelTime"),a=D({tooltip:"到计时间总时间（单位秒）"}),h=D({tooltip:"天数数据格式化"}),c=D({tooltip:"时间格式化"}),u=D({tooltip:"是否有00"}),n(d=l((p=e((m=class extends s{constructor(...t){super(...t),i(this,"countDown",p,this),i(this,"dayFormat",b,this),i(this,"timeFormat",f,this),i(this,"zeroize",g,this),this.dateDisable=void 0,this.result=void 0,this.onSecond=null,this.onComplete=null}replace(t,...e){return t.replace(/\{(\d+)\}/g,(function(t,i){return e[i]}))}format(){let t=this.countDown,e=Math.floor(t/86400);t-=86400*e;let i=Math.floor(t/3600);t-=3600*i;let r=Math.floor(t/60);t-=60*r;let o=t;if(this.dateDisable=this.dateDisable||!1,0==e&&0==i&&0==r&&0==o)this.zeroize?this.result=this.replace(this.timeFormat,"00","00","00"):this.result=this.replace(this.timeFormat,"0","0","0");else if(e>0&&!this.dateDisable){let t=this.dayFormat,r=t.indexOf("{1}");0==i&&r>-1&&(t=t.substring(0,r-1));let o=t;e>1&&t.indexOf("days")<0&&(o=o.replace("day","days")),e<2&&(o=o.replace("days","day")),this.result=this.replace(o,e,i)}else i+=24*e,this.zeroize?this.result=this.replace(this.timeFormat,this.coverString(i),this.coverString(r),this.coverString(o)):this.result=this.replace(this.timeFormat,i,r,o);this.string=this.result}coverString(t){return t<10?"0"+t:t.toString()}setDateDisable(t){this.dateDisable=t}setTime(t){this.countDown=t,this.timing_end(),this.timing_start()}start(){this.timing_start()}onScheduleSecond(){this.countDown--,this.format(),this.onSecond&&this.onSecond(this.node),0==this.countDown&&this.onScheduleComplete()}onScheduleComplete(){this.timing_end(),this.onComplete&&this.onComplete(this.node)}timing_start(){this.schedule(this.onScheduleSecond,1),this.format()}timing_end(){this.unscheduleAllCallbacks(),this.format()}}).prototype,"countDown",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),b=e(m.prototype,"dayFormat",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0} day"}}),f=e(m.prototype,"timeFormat",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{0}:{1}:{2}"}}),g=e(m.prototype,"zeroize",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=m))||d)||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["cc","./Logger.ts","./LanguageData.ts","./LanguagePack.ts"],(function(e){var a,g,t,n;return{setters:[function(e){a=e.cclegacy},function(e){g=e.Logger},function(e){t=e.LanguageData},function(e){n=e.LanguagePack}],execute:function(){a._RF.push({},"97efdh3Ze5FoJqjvHM6zQO2","Language",void 0);e("LanguageManager",class{constructor(){this._languages=["zh","en","tr"],this._languagePack=new n,this._defaultLanguage="zh"}get languages(){return this._languages}set languages(e){this._languages=e}set default(e){this._defaultLanguage=e||"zh"}get current(){return t.current}get pack(){return this._languagePack}isExist(e){return this.languages.indexOf(e)>-1}getNextLang(){let e=this.languages,a=e.indexOf(t.current);return e[(a+1)%e.length]}setLanguage(e,a){e=null==e||""==e?this._defaultLanguage:e.toLowerCase(),this.languages.indexOf(e)<0&&(console.log(`当前不支持【${e}】语言，将自动切换到【${this._defaultLanguage}】语言`),e=this._defaultLanguage),e!==t.current?this.loadLanguageAssets(e,(n=>{g.logConfig(`当前语言为【${e}】`);var s=t.current;t.current=e,this._languagePack.updateLanguage(e),this._languagePack.releaseLanguageAssets(s),a(!0)})):a(!1)}getLangByID(e){return t.getLangByID(e)}loadLanguageAssets(e,a){return e=e.toLowerCase(),this._languagePack.loadLanguageAssets(e,a)}releaseLanguageAssets(e){e=e.toLowerCase(),this._languagePack.releaseLanguageAssets(e)}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"149fd75XQ9Nao8jHNiimMkL","LanguageData",void 0);class a{static getLangByID(e){var t=this.json[e];if(t)return t;if(this.excel){var a=this.excel[e];if(a)return a[this.current]}return e}}e("LanguageData",a),a.path_json="language/json",a.path_texture="language/texture",a.path_spine="language/spine",a.current="",a.json={},a.excel=null,a.font=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(t){var e,a,i,n,r,s,o,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.CCString,r=t._decorator,s=t.Component,o=t.warn,p=t.Label,l=t.RichText},function(t){u=t.LanguageData}],execute:function(){var g,c,h,d,m,y,b,_,L,f,D,I,z,v;i._RF.push({},"3d12fHrIW5FuoZVmxcDvV0E","LanguageLabel",void 0);const{ccclass:S,property:F,menu:w}=r;let U=t("LangLabelParamsItem",S("LangLabelParamsItem")((h=e((c=class{constructor(){a(this,"key",h,this),a(this,"value",d,this)}}).prototype,"key",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(c.prototype,"value",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=c))||g);t("LanguageLabel",(m=S("LanguageLabel"),y=w("ui/language/LanguageLabel"),b=F({type:U,displayName:"params"}),_=F({type:U,displayName:"params"}),L=F({serializable:!0}),f=F({type:n,serializable:!0}),m(D=y((z=e((I=class extends s{constructor(...t){super(...t),a(this,"_params",z,this),a(this,"_dataID",v,this),this.initFontSize=0,this._needUpdate=!1}set params(t){this._params=t,this._needUpdate=!0}get params(){return this._params||[]}get dataID(){return this._dataID||""}set dataID(t){this._dataID=t,this._needUpdate=!0}get string(){let t=u.getLangByID(this._dataID);return t&&this._params.length>0&&this._params.forEach((e=>{t=t.replace(`%{${e.key}}`,e.value)})),t||(o("[LanguageLabel] 未找到语言标识，使用dataID替换"),t=this._dataID),t}language(){this._needUpdate=!0}onLoad(){this._needUpdate=!0}setVars(t,e){let a=!1;for(let i=0;i<this._params.length;i++){let n=this._params[i];n.key===t&&(n.value=e,a=!0)}if(!a){let a=new U;a.key=t,a.value=e,this._params.push(a)}this._needUpdate=!0}update(){this._needUpdate&&(this.updateContent(),this._needUpdate=!1)}updateContent(){var t=this.getComponent(p),e=this.getComponent(l),a=u.font;t?(a&&!t.useSystemFont&&(t.font=a),t.string=this.string,this.initFontSize=t.fontSize):e?(a&&!e.useSystemFont&&(e.font=a),this.initFontSize=e.fontSize,e.string=this.string,this.initFontSize=e.fontSize):o("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件")}}).prototype,"_params",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(I.prototype,"params",[_],Object.getOwnPropertyDescriptor(I.prototype,"params"),I.prototype),v=e(I.prototype,"_dataID",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(I.prototype,"dataID",[f],Object.getOwnPropertyDescriptor(I.prototype,"dataID"),I.prototype),D=I))||D)||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePack.ts",["cc","./ResLoader.ts","./Logger.ts","./JsonUtil.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguageSpine.ts","./LanguageSprite.ts"],(function(e){var n,a,t,o,l,g,s,i,u,r,c,d;return{setters:[function(e){n=e.cclegacy,a=e.director,t=e.error,o=e.JsonAsset,l=e.TTFFont},function(e){g=e.resLoader},function(e){s=e.Logger},function(e){i=e.JsonUtil},function(e){u=e.LanguageData},function(e){r=e.LanguageLabel},function(e){c=e.LanguageSpine},function(e){d=e.LanguageSprite}],execute:function(){n._RF.push({},"1d9adCW731FQ4yP1hojpFIL","LanguagePack",void 0);e("LanguagePack",class{updateLanguage(e){let n=a.getScene().children;for(let e=0;e<n.length;++e){let a=n[e].getComponentsInChildren(r);for(let e=0;e<a.length;e++)a[e].language();let t=n[e].getComponentsInChildren(d);for(let e=0;e<t.length;e++)t[e].language();let o=n[e].getComponentsInChildren(c);for(let e=0;e<o.length;e++)o[e].language()}}async loadLanguageAssets(e,n){await this.loadTexture(e),await this.loadSpine(e),await this.loadJson(e),await this.loadTable(e),n(e)}loadTable(e){return new Promise((async(e,n)=>{u.excel=await i.loadAsync("Language"),u.excel&&s.logConfig("config/game/Language","下载语言包 table 资源"),e(null)}))}loadTexture(e){return new Promise(((n,a)=>{const o=`${u.path_texture}/${e}`;g.loadDir(o,((e,a)=>{if(e)return t(e),void n(null);s.logConfig(o,"下载语言包 textures 资源"),n(null)}))}))}loadJson(e){return new Promise((async(n,a)=>{const t=`${u.path_json}/${e}`,i=await g.loadAsync(t,o);i?(u.json=i.json,s.logConfig(t,"下载语言包 json 资源"),s.logConfig(u.json,"LanguageData.json="),g.load(t,l,((e,a)=>{null==e&&s.logConfig(t,"下载语言包 ttf 资源"),u.font=a,n(null)}))):n(null)}))}loadSpine(e){return new Promise((async(n,a)=>{const o=`${u.path_spine}/${e}`;g.loadDir(o,((e,a)=>{if(e)return t(e),void n(null);s.logConfig(o,"下载语言包 spine 资源"),n(null)}))}))}releaseLanguageAssets(e){let n=`${u.path_texture}/${e}`;g.releaseDir(n);let a=`${u.path_json}/${e}`,t=g.get(a,o);t&&t.decRef();let s=g.get(a,l);s&&s.decRef();let i=`${u.path_spine}/${e}`;g.release(i)}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,a,n,i,o,r,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.CCString,o=e._decorator,r=e.Component,s=e.sp},function(e){p=e.resLoader},function(e){u=e.LanguageData}],execute:function(){var l,g,c,d,D,h,S;n._RF.push({},"d4c086BnshISrkEW6ul50q3","LanguageSpine",void 0);const{ccclass:f,property:L,menu:m}=o;e("LanguageSpine",(l=f("LanguageSpine"),g=m("ui/language/LanguageSpine"),c=L({serializable:!0}),d=L({type:i,serializable:!0}),l(D=g((S=t((h=class extends r{constructor(...e){super(...e),a(this,"_dataID",S,this),this._defaultAnimation=""}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this.updateSpine()}onLoad(){let e=this.getComponent(s.Skeleton);this._defaultAnimation=e.animation}start(){this.updateSpine()}language(){this.updateSpine()}updateSpine(){let e=`language/spine/${u.current}/${this.dataID}`,t=p.get(e,s.SkeletonData);if(t){let e=this.getComponent(s.Skeleton);e.skeletonData=t,e.setAnimation(0,this._defaultAnimation,!0)}else console.error("[LanguageSpine] 资源不存在 "+e)}}).prototype,"_dataID",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(h.prototype,"dataID",[d],Object.getOwnPropertyDescriptor(h.prototype,"dataID"),h.prototype),D=h))||D)||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./LanguageData.ts"],(function(e){var t,a,r,i,n,o,s,p,u,g,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.CCString,n=e._decorator,o=e.Component,s=e.SpriteFrame,p=e.Sprite,u=e.UITransform},function(e){g=e.resLoader},function(e){l=e.LanguageData}],execute:function(){var c,d,S,f,D,h,y,m,I;r._RF.push({},"9ec48WHdoJG0oI/Nxf9s0fx","LanguageSprite",void 0);const{ccclass:L,property:b,menu:z}=n;e("LanguageSprite",(c=L("LanguageSprite"),d=z("ui/language/LanguageSprite"),S=b({serializable:!0}),f=b({type:i,serializable:!0}),D=b({tooltip:"是否设置为图片原始资源大小"}),c(h=d((m=t((y=class extends o{constructor(...e){super(...e),a(this,"_dataID",m,this),a(this,"isRawSize",I,this)}get dataID(){return this._dataID||""}set dataID(e){this._dataID=e,this.updateSprite()}start(){this.updateSprite()}language(){this.updateSprite()}updateSprite(){let e=`language/texture/${l.current}/${this.dataID}/spriteFrame`,t=g.get(e,s);if(t){let e=this.getComponent(p);if(e.spriteFrame=t,this.isRawSize){let a=t._originalSize;e.getComponent(u)?.setContentSize(a)}}else console.error("[LanguageSprite] 资源不存在 "+e)}}).prototype,"_dataID",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(y.prototype,"dataID",[f],Object.getOwnPropertyDescriptor(y.prototype,"dataID"),y.prototype),I=t(y.prototype,"isRawSize",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=y))||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["cc","./Defines.ts","./LayerPopup.ts"],(function(s){var a,e,t;return{setters:[function(s){a=s.cclegacy},function(s){e=s.ViewParams},function(s){t=s.LayerPopUp}],execute:function(){a._RF.push({},"d4037phLL9JgLdd8gNZcz1t","LayerDialog",void 0);s("LayerDialog",class extends t{constructor(...s){super(...s),this.params=[]}add(s,a,e){this.ui_nodes.size>0?this.params.push({config:s,params:a,callbacks:e}):(this.black.enabled=!0,this.show(s,a,e))}show(s,a,t){var i=this.ui_cache.get(s.prefab);return null==i&&((i=new e).valid=!0,i.config=s),i.params=a||{},i.callbacks=t??{},this.ui_nodes.set(i.config.prefab,i),this.load(i,s.bundle),s.prefab}onCloseWindow(s){super.onCloseWindow(s),setTimeout(this.next.bind(this),0)}setBlackDisable(){0==this.params.length&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())}next(){if(this.params.length>0){let s=this.params.shift();this.show(s.config,s.params,s.callbacks)}}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["cc","./GUI.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts"],(function(e){var i,t,a,s,o,r,n,p,h,l,c,d,u;return{setters:[function(e){i=e.cclegacy,t=e.warn,a=e.Node,s=e.Camera,o=e.Layers,r=e.Widget},function(e){n=e.GUI},function(e){p=e.DelegateComponent},function(e){h=e.LayerDialog},function(e){l=e.LayerNotify},function(e){c=e.LayerPopUp},function(e){d=e.LayerUI},function(e){u=e.UIMap}],execute:function(){i._RF.push({},"af46bjCOd5GbrrXZWNSd1jL","LayerManager",void 0);let f=e("LayerType",function(e){return e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e}({}));e("LayerManager",class{get portrait(){return this.root.getComponent(n).portrait}init(e){this.configs=e}toast(e,i=!1){this.notify.toast(e,i)}waitOpen(){this.notify.waitOpen()}waitClose(){this.notify.waitClose()}setConfig(e,i){this.configs[e]=i}setUIMap(e){null==this.uiMap&&(this.uiMap=new u),this.uiMap.init(this,e)}open(e,i=null,a){var s=this.configs[e];if(null!=s)switch(s.layer){case f.UI:this.ui.add(s,i,a);break;case f.PopUp:this.popup.add(s,i,a);break;case f.Dialog:this.dialog.add(s,i,a);break;case f.System:this.system.add(s,i,a)}else t(`打开编号为【${e}】的界面失败，配置信息不存在`)}async openAsync(e,i=null){return new Promise(((t,a)=>{var s={onAdded:(e,i)=>{t(e)},onLoadFailure:()=>{t(null)}};this.open(e,i,s)}))}replace(e,i,t=null){this.open(i,t),this.remove(e)}replaceAsync(e,i,t=null){return new Promise((async(a,s)=>{var o=await this.openAsync(i,t);this.remove(e),a(o)}))}has(e){var i=this.configs[e];if(null==i)return t(`编号为【${e}】的界面配置不存在，配置信息不存在`),!1;var a=!1;switch(i.layer){case f.UI:a=this.ui.has(i.prefab);break;case f.PopUp:a=this.popup.has(i.prefab);break;case f.Dialog:a=this.dialog.has(i.prefab);break;case f.System:a=this.system.has(i.prefab)}return a}get(e){var i=this.configs[e];if(null==i)return t(`编号为【${e}】的界面配置不存在，配置信息不存在`),null;var a=null;switch(i.layer){case f.UI:a=this.ui.get(i.prefab);break;case f.PopUp:a=this.popup.get(i.prefab);break;case f.Dialog:a=this.dialog.get(i.prefab);break;case f.System:a=this.system.get(i.prefab)}return a}remove(e,i){var a=this.configs[e];if(null!=a)switch(a.layer){case f.UI:this.ui.remove(a.prefab,i);break;case f.PopUp:this.popup.remove(a.prefab,i);break;case f.Dialog:this.dialog.remove(a.prefab,i);break;case f.System:this.system.remove(a.prefab,i)}else t(`删除编号为【${e}】的界面失败，配置信息不存在`)}removeByNode(e,i){if(e instanceof a){let a=e.getComponent(p);if(a&&a.vp){if(e.parent)e.parent.remove(a.vp.config.prefab,i);else if(i)switch(a.vp.config.layer){case f.UI:this.ui.removeCache(a.vp.config.prefab);break;case f.PopUp:this.popup.removeCache(a.vp.config.prefab);break;case f.Dialog:this.dialog.removeCache(a.vp.config.prefab);break;case f.System:this.system.removeCache(a.vp.config.prefab)}}else t("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy()}}clear(e=!1){this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.system.clear(e)}constructor(e){this.root=void 0,this.camera=void 0,this.game=void 0,this.guide=void 0,this.uiMap=void 0,this.ui=void 0,this.popup=void 0,this.dialog=void 0,this.system=void 0,this.notify=void 0,this.configs={},this.root=e,this.camera=this.root.getComponentInChildren(s),this.game=this.create_node(f.Game),this.ui=new d(f.UI),this.popup=new c(f.PopUp),this.dialog=new h(f.Dialog),this.system=new h(f.System),this.notify=new l(f.Notify),this.guide=this.create_node(f.Guide),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.system),e.addChild(this.notify),e.addChild(this.guide)}create_node(e){var i=new a(e);i.layer=o.Enum.UI_2D;var t=i.addComponent(r);return t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0,i}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["cc","./ViewUtil.ts","./Notify.ts"],(function(t){var i,n,e,o,s,a,l,h,r;return{setters:[function(t){i=t.cclegacy,n=t.Node,e=t.Widget,o=t.Layers,s=t.BlockInputEvents,a=t.find,l=t.instantiate},function(t){h=t.ViewUtil},function(t){r=t.Notify}],execute:function(){i._RF.push({},"289b1Zx8X1Msbcc/T4Tk8MV","LayerNotify",void 0);t("LayerNotify",class extends n{constructor(t){super(t),this.black=void 0,this.wait=null,this.notify=null,this.notifyItem=null;var i=this.addComponent(e);i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,this.init()}init(){this.layer=o.Enum.UI_2D,this.black=this.addComponent(s),this.black.enabled=!1}waitOpen(){null==this.wait&&(this.wait=h.createPrefabNode("common/prefab/wait")),null==this.wait.parent&&(this.wait.parent=this,this.black.enabled=!0)}waitClose(){this.wait.parent&&(this.wait.parent=null,this.black.enabled=!1)}toast(t,i){null==this.notify&&(this.notify=h.createPrefabNode("common/prefab/notify"),this.notifyItem=a("item",this.notify),this.notifyItem.parent=null),this.notify.parent=this;let n=l(this.notifyItem),e=n.getChildByName("prompt").getComponent(r);n.parent=this.notify,e.onComplete=()=>{0==this.notify.children.length&&(this.notify.parent=null)},e.toast(t,i),this.notify.children.length>3&&this.notify.children[0].destroy()}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["cc","./ViewUtil.ts","./LayerUI.ts"],(function(e){var s,i,t,a,n,o;return{setters:[function(e){s=e.cclegacy,i=e.Layers,t=e.BlockInputEvents,a=e.Node},function(e){n=e.ViewUtil},function(e){o=e.LayerUI}],execute:function(){s._RF.push({},"945a63oU41ENoYIq/DMuOVp","LayerPopup",void 0);e("LayerPopUp",class extends o{constructor(e){super(e),this.black=void 0,this.mask=void 0,this.init()}init(){this.layer=i.Enum.UI_2D,this.black=this.addComponent(t),this.black.enabled=!1}showUi(e){super.showUi(e),this.openVacancyRemove(e.config),this.black.enabled=!0}onCloseWindow(e){super.onCloseWindow(e),this.setBlackDisable()}setBlackDisable(){0==this.ui_nodes.size&&(this.black.enabled=!1),this.closeVacancyRemove(),this.closeMask()}closeMask(){var e=!0;for(var s of this.ui_nodes.values())if(s.config.mask){e=!1;break}e&&(this.mask.parent=null)}openVacancyRemove(e){this.hasEventListener(a.EventType.TOUCH_END,this.onTouchEnd,this)||this.on(a.EventType.TOUCH_END,this.onTouchEnd,this),null==this.mask&&(this.mask=n.createPrefabNode("common/prefab/mask")),e.mask&&(this.mask.parent=this,this.mask.setSiblingIndex(0))}closeVacancyRemove(){var e=!0;for(var s of this.ui_nodes.values())if(s.config.vacancy){e=!1;break}e&&this.hasEventListener(a.EventType.TOUCH_END,this.onTouchEnd,this)&&this.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}onTouchEnd(e){e.target===this&&this.ui_nodes.forEach((e=>{e.valid&&e.config.vacancy&&this.remove(e.config.prefab,e.config.destroy)}))}clear(e){super.clear(e),this.black.enabled=!1,this.active=!1,this.closeVacancyRemove(),this.closeMask()}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["cc","./Oops.ts","./Defines.ts","./DelegateComponent.ts"],(function(e){var o,i,t,n,s,a,d;return{setters:[function(e){o=e.cclegacy,i=e.Node,t=e.Widget,n=e.instantiate},function(e){s=e.oops},function(e){a=e.ViewParams},function(e){d=e.DelegateComponent}],execute:function(){o._RF.push({},"fc9c2xwP2JHFaPKKv7QNMcI","LayerUI",void 0);e("LayerUI",class extends i{constructor(e){super(e),this.ui_nodes=new Map,this.ui_cache=new Map;var o=this.addComponent(t);o.isAlignLeft=o.isAlignRight=o.isAlignTop=o.isAlignBottom=!0,o.left=o.right=o.top=o.bottom=0,o.alignMode=2,o.enabled=!0}add(e,o,i){if(this.ui_nodes.has(e.prefab))console.warn(`路径为【${e.prefab}】的预制重复加载`);else{var t=this.ui_cache.get(e.prefab);null==t&&((t=new a).config=e),this.ui_nodes.set(e.prefab,t),t.params=o??{},t.callbacks=i??{},t.valid=!0,this.load(t,e.bundle)}}load(e,o){e&&e.node?this.showUi(e):(o=o||s.res.defaultBundleName,s.res.load(o,e.config.prefab,((o,i)=>{if(o)return this.ui_nodes.delete(e.config.prefab),console.warn(`路径为【${e.config.prefab}】的预制加载失败`),void(e.callbacks&&e.callbacks.onLoadFailure&&e.callbacks.onLoadFailure());let t=n(i);e.node=t;let s=t.addComponent(d);s.vp=e,s.onCloseWindow=this.onCloseWindow.bind(this),this.showUi(e)})))}onCloseWindow(e){this.ui_nodes.delete(e.config.prefab)}showUi(e){e.node.getComponent(d).add(),e.node.parent=this,e.valid=!0}remove(e,o){var i=void 0;void 0!==o&&(i=o);var t=this.ui_nodes.get(e);t&&(void 0===i&&(i=void 0===t.config.destroy||t.config.destroy),!1===i&&this.ui_cache.set(t.config.prefab,t),t.node.getComponent(d).remove(i));!0===i&&this.removeCache(e)}removeCache(e){let o=this.ui_cache.get(e);o&&(this.ui_nodes.delete(o.config.prefab),this.ui_cache.delete(e),o.node.destroy())}get(e){var o=this.ui_nodes.get(e);return o?o.node:null}has(e){return this.ui_nodes.has(e)}clear(e){this.ui_nodes.forEach(((o,i)=>{this.remove(o.config.prefab,e),o.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach(((e,o)=>{this.removeCache(o)}))}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ListItem.ts"],(function(t){var e,i,s,l,o,n,a,h,r,c,_,d,u,m,p,g,I,y,T,f,S,v,w,z;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,l=t.ScrollView,o=t.Enum,n=t.Node,a=t.Prefab,h=t.CCFloat,r=t.EventHandler,c=t.CCBoolean,_=t.CCInteger,d=t._decorator,u=t.Component,m=t.Layout,p=t.isValid,g=t.UITransform,I=t.instantiate,y=t.NodePool,T=t.Vec3,f=t.Size,S=t.Widget,v=t.tween},function(t){w=t.DEV},function(t){z=t.default}],execute:function(){var b,D,N,E,P,L,G,C,O,R,A,U,B,M,k,x,V,H,F,X,Y,Z,W,j,q,J,K,Q,$,tt,et,it,st,lt,ot,nt,at,ht,rt,ct,_t,dt,ut;s._RF.push({},"5a154v5bS9CFJrqHSJ56hAS","List",void 0);const{ccclass:mt,property:pt,disallowMultiple:gt,menu:It,executionOrder:yt,requireComponent:Tt}=d;var ft=function(t){return t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB",t}(ft||{}),St=function(t){return t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE",t}(St||{}),vt=function(t){return t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT",t}(vt||{});t("default",(b=gt(),D=It("List"),N=Tt(l),E=yt(-5e3),P=pt({type:o(ft),tooltip:w}),L=pt({type:n,tooltip:w,visible(){return this.templateType==ft.NODE}}),G=pt({type:a,tooltip:w,visible(){return this.templateType==ft.PREFAB}}),C=pt({}),O=pt({type:o(St),tooltip:w}),R=pt({type:h,range:[0,1,.1],tooltip:w,slide:!0,visible(){return this._slideMode==St.PAGE}}),A=pt({type:r,tooltip:w,visible(){return this._slideMode==St.PAGE}}),U=pt({}),B=pt({type:c,tooltip:w}),M=pt({tooltip:w,visible(){let t=this.slideMode==St.NORMAL;return t||(this.cyclic=!1),t}}),k=pt({tooltip:w,visible(){return this.virtual}}),x=pt({tooltip:w,visible(){let t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}}),V=pt({type:_}),H=pt({type:_,range:[0,6,1],tooltip:w,slide:!0}),F=pt({type:_,range:[0,12,1],tooltip:w,slide:!0}),X=pt({type:r,tooltip:w}),Y=pt({type:o(vt),tooltip:w}),Z=pt({type:r,tooltip:w,visible(){return this.selectedMode>vt.NONE}}),W=pt({tooltip:w,visible(){return this.selectedMode==vt.SINGLE}}),j=pt({serializable:!1}),mt(q=b(q=D(q=N(q=E((K=e((J=class extends u{constructor(...t){super(...t),i(this,"templateType",K,this),i(this,"tmpNode",Q,this),i(this,"tmpPrefab",$,this),i(this,"_slideMode",tt,this),i(this,"pageDistance",et,this),i(this,"pageChangeEvent",it,this),i(this,"_virtual",st,this),i(this,"cyclic",lt,this),i(this,"lackCenter",ot,this),i(this,"lackSlide",nt,this),i(this,"_updateRate",at,this),i(this,"frameByFrameRenderNum",ht,this),i(this,"renderEvent",rt,this),i(this,"selectedMode",ct,this),i(this,"selectedEvent",_t,this),i(this,"repeatEventSingle",dt,this),this._selectedId=-1,this._lastSelectedId=void 0,this.multSelected=void 0,this._forceUpdate=!1,this._align=void 0,this._horizontalDir=void 0,this._verticalDir=void 0,this._startAxis=void 0,this._alignCalcType=void 0,this.content=void 0,this._contentUt=void 0,this.firstListId=void 0,this.displayItemNum=void 0,this._updateDone=!0,this._updateCounter=void 0,this._actualNumItems=void 0,this._cyclicNum=void 0,this._cyclicPos1=void 0,this._cyclicPos2=void 0,i(this,"_numItems",ut,this),this._inited=!1,this._scrollView=void 0,this._layout=void 0,this._resizeMode=void 0,this._topGap=void 0,this._rightGap=void 0,this._bottomGap=void 0,this._leftGap=void 0,this._columnGap=void 0,this._lineGap=void 0,this._colLineNum=void 0,this._lastDisplayData=void 0,this.displayData=void 0,this._pool=void 0,this._itemTmp=void 0,this._itemTmpUt=void 0,this._needUpdateWidget=!1,this._itemSize=void 0,this._sizeType=void 0,this._customSize=void 0,this.frameCount=void 0,this._aniDelRuning=!1,this._aniDelCB=void 0,this._aniDelItem=void 0,this._aniDelBeforePos=void 0,this._aniDelBeforeScale=void 0,this.viewTop=void 0,this.viewRight=void 0,this.viewBottom=void 0,this.viewLeft=void 0,this._doneAfterUpdate=!1,this.elasticTop=void 0,this.elasticRight=void 0,this.elasticBottom=void 0,this.elasticLeft=void 0,this.scrollToListId=void 0,this.adhering=!1,this._adheringBarrier=!1,this.nearestListId=void 0,this.curPageNum=0,this._beganPos=void 0,this._scrollPos=void 0,this._curScrollIsTouch=void 0,this._scrollToListId=void 0,this._scrollToEndTime=void 0,this._scrollToSo=void 0,this._lack=void 0,this._allItemSize=void 0,this._allItemSizeNoEdge=void 0,this._scrollItem=void 0,this._thisNodeUt=void 0}set slideMode(t){this._slideMode=t}get slideMode(){return this._slideMode}set virtual(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()}get virtual(){return this._virtual}set updateRate(t){t>=0&&t<=6&&(this._updateRate=t)}get updateRate(){return this._updateRate}set selectedId(t){let e,i=this;switch(i.selectedMode){case vt.SINGLE:{if(!i.repeatEventSingle&&t==i._selectedId)return;let s;if(e=i.getItemByListId(t),i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&(s=e.getComponent(z),s.selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){let t=i.getItemByListId(i._lastSelectedId);t&&(t.getComponent(z).selected=!1)}i.selectedEvent&&r.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break}case vt.MULT:{if(e=i.getItemByListId(t),!e)return;let s=e.getComponent(z);i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;let l=!s.selected;s.selected=l;let o=i.multSelected.indexOf(t);l&&o<0?i.multSelected.push(t):!l&&o>=0&&i.multSelected.splice(o,1),i.selectedEvent&&r.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,l);break}}}get selectedId(){return this._selectedId}set numItems(t){let e=this;if(e.checkInited(!1))if(null==t||t<0)console.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=St.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);let t=e.content.getComponent(m);if(t&&(t.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){let t=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum;for(let i=0;i<t;i++)e._createOrUpdateItem2(i);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(let t=0;t<e._numItems;t++)e._createOrUpdateItem2(t);e.displayItemNum=e._numItems}}}get numItems(){return this._actualNumItems}get scrollView(){return this._scrollView}onLoad(){this._init()}onDestroy(){let t=this;p(t._itemTmp)&&t._itemTmp.destroy(),p(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()}onEnable(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))}onDisable(){this._unregisterEvent()}_registerEvent(){let t=this;t.node.on(n.EventType.TOUCH_START,t._onTouchStart,t),t.node.on("touch-up",t._onTouchUp,t),t.node.on(n.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.on("scroll-began",t._onScrollBegan,t),t.node.on("scroll-ended",t._onScrollEnded,t),t.node.on("scrolling",t._onScrolling,t),t.node.on(n.EventType.SIZE_CHANGED,t._onSizeChanged,t)}_unregisterEvent(){let t=this;t.node.off(n.EventType.TOUCH_START,t._onTouchStart,t),t.node.off("touch-up",t._onTouchUp,t),t.node.off(n.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.off("scroll-began",t._onScrollBegan,t),t.node.off("scroll-ended",t._onScrollEnded,t),t.node.off("scrolling",t._onScrolling,t),t.node.off(n.EventType.SIZE_CHANGED,t._onSizeChanged,t)}_init(){let t=this;if(!t._inited)if(t._thisNodeUt=t.node.getComponent(g),t._scrollView=t.node.getComponent(l),t.content=t._scrollView.content,t._contentUt=t.content.getComponent(g),t.content){switch(t._layout=t.content.getComponent(m),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(I(t.templateType==ft.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=St.ADHERING&&t._slideMode!=St.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new y,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case m.Type.HORIZONTAL:switch(t._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case m.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case m.Type.VERTICAL:switch(t._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case m.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case m.Type.GRID:switch(t._startAxis){case m.AxisDirection.HORIZONTAL:switch(t._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case m.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case m.AxisDirection.VERTICAL:switch(t._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case m.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else console.error(t.node.name+"'s ScrollView unset content!")}_processAutoScrolling(t){const e=1e-4,i=new T;let s=this._scrollView;const o=s._isNecessaryAutoScrollBrake(),n=o?.05:1;s._autoScrollAccumulatedTime+=t*(1/n);let a=Math.min(1,s._autoScrollAccumulatedTime/s._autoScrollTotalTime);var h;s._autoScrollAttenuate&&(h=a,a=(h-=1)*h*h*h*h+1);const r=s._autoScrollTargetDelta.clone();r.multiplyScalar(a);const c=s._autoScrollStartPosition.clone();c.add(r);let _=Math.abs(a-1)<=e;if(Math.abs(a-1)<=s.getScrollEndedEventTiming()&&!s._isScrollEndedWithThresholdEventFired&&(s._dispatchEvent(l.EventType.SCROLL_ENG_WITH_THRESHOLD),s._isScrollEndedWithThresholdEventFired=!0),s.elastic){const t=c.clone();t.subtract(s._autoScrollBrakingStartPosition),o&&t.multiplyScalar(n),c.set(s._autoScrollBrakingStartPosition),c.add(t)}else{const t=c.clone();t.subtract(s._getContentPosition());const l=s._getHowMuchOutOfBoundary(t);l.equals(i,e)||(c.add(l),_=!0)}_&&(s._autoScrolling=!1);const d=new T(c);d.subtract(s._getContentPosition()),s._clampDelta(d),s._moveContent(d,_),s._dispatchEvent(l.EventType.SCROLLING),s._autoScrolling||(s._isBouncing=!1,s._scrolling=!1,s._dispatchEvent(l.EventType.SCROLL_ENDED))}setTemplateItem(t){if(!t)return;let e=this;if(e._itemTmp=t,e._itemTmpUt=t.getComponent(g),e._resizeMode==m.ResizeMode.CHILDREN)e._itemSize=e._layout.cellSize;else{let i=t.getComponent(g);e._itemSize=new f(i.width,i.height)}let i=t.getComponent(z),s=!1;switch(i||(s=!0),s&&(e.selectedMode=vt.NONE),i=t.getComponent(S),i&&i.enabled&&(e._needUpdateWidget=!0),e.selectedMode==vt.MULT&&(e.multSelected=[]),e._align){case m.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case m.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case m.Type.GRID:switch(e._startAxis){case m.AxisDirection.HORIZONTAL:let t=e._contentUt.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((t+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case m.AxisDirection.VERTICAL:let i=e._contentUt.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((i+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}checkInited(t=!0){return!!this._inited||(t&&console.error("List initialization not completed!"),!1)}_resizeContent(){let t,e=this;switch(e._align){case m.Type.HORIZONTAL:if(e._customSize){let i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case m.Type.VERTICAL:if(e._customSize){let i=e._getFixedSize(null);t=e._topGap+i.val+e._itemSize.height*(e._numItems-i.count)+e._lineGap*(e._numItems-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case m.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case m.AxisDirection.HORIZONTAL:let i=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*i+e._lineGap*(i-1)+e._bottomGap;break;case m.AxisDirection.VERTICAL:let s=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*s+e._columnGap*(s-1)+e._rightGap}}let i=e.content.getComponent(m);if(i&&(i.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){let t=e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width;e._cyclicPos1=0,t-=e._cyclicPos1,e._cyclicNum=Math.ceil(t/e._allItemSizeNoEdge)+1;let i=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+i,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+i*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=i*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width);let s=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width)-s:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e._contentUt.height=l:e._contentUt.width=l}_onScrolling(t=null){if(null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)return void this.frameCount--;if(this.frameCount=this._updateRate,this._aniDelRuning)return;if(this.cyclic){let t=this.content.getPosition();t=this._sizeType?t.y:t.x;let e=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),i=this._sizeType?new T(0,e,0):new T(e,0,0),s=this.content.getPosition();switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(s.set(-this._cyclicPos2,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i))):t<-this._cyclicPos2&&(s.set(-this._cyclicPos1,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)));break;case 2:t<this._cyclicPos1?(s.set(this._cyclicPos2,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(s.set(this._cyclicPos1,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i)));break;case 3:t<this._cyclicPos1?(s.set(s.x,this._cyclicPos2,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(s.set(s.x,this._cyclicPos1,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i)));break;case 4:t>-this._cyclicPos1?(s.set(s.x,-this._cyclicPos2,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i))):t<-this._cyclicPos2&&(s.set(s.x,-this._cyclicPos1,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)))}}let e,i,s,l;if(this._calcViewPos(),this._sizeType?(e=this.viewTop,s=this.viewBottom):(i=this.viewRight,l=this.viewLeft),this._virtual){let t;this.displayData=[];let o=0,n=this._numItems-1;if(this._customSize){let a=!1;for(;o<=n&&!a;o++)switch(t=this._calcItemPos(o),this._align){case m.Type.HORIZONTAL:t.right>=l&&t.left<=i?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.Type.VERTICAL:t.bottom<=e&&t.top>=s?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.Type.GRID:switch(this._startAxis){case m.AxisDirection.HORIZONTAL:t.bottom<=e&&t.top>=s?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.AxisDirection.VERTICAL:t.right>=l&&t.left<=i?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0)}}}else{let t=this._itemSize.width+this._columnGap,a=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:o=(l-this._leftGap)/t,n=(i-this._leftGap)/t;break;case 2:o=(-i-this._rightGap)/t,n=(-l-this._rightGap)/t;break;case 3:o=(-e-this._topGap)/a,n=(-s-this._topGap)/a;break;case 4:o=(s-this._bottomGap)/a,n=(e-this._bottomGap)/a}for(o=Math.floor(o)*this._colLineNum,n=Math.ceil(n)*this._colLineNum,n--,o<0&&(o=0),n>=this._numItems&&(n=this._numItems-1);o<=n;o++)this.displayData.push(this._calcItemPos(o))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;let a=this._lastDisplayData.length,h=this.displayItemNum!=a;if(h&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(((t,e)=>t-e)),h=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[a-1]),this._forceUpdate||h)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(let t=0;t<this.displayItemNum;t++)this._createOrUpdateItem(this.displayData[t]);this._forceUpdate=!1}this._calcNearestItem()}}_calcViewPos(){let t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this._thisNodeUt.width,this.elasticRight=this.viewRight>this._contentUt.width?Math.abs(this.viewRight-this._contentUt.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this._thisNodeUt.width,this.elasticLeft=this.viewLeft<-this._contentUt.width?Math.abs(this.viewLeft+this._contentUt.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this._thisNodeUt.height,this.elasticBottom=this.viewBottom<-this._contentUt.height?Math.abs(this.viewBottom+this._contentUt.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this._thisNodeUt.height,this.elasticTop=this.viewTop>this._contentUt.height?Math.abs(this.viewTop-this._contentUt.height):0,this.viewTop-=this.elasticTop}}_calcItemPos(t){let e,i,s,l,o,n,a,h;switch(this._align){case m.Type.HORIZONTAL:switch(this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){let i=this._getFixedSize(t);o=this._leftGap+(this._itemSize.width+this._columnGap)*(t-i.count)+(i.val+this._columnGap*i.count);let s=this._customSize[t];e=s>0?s:this._itemSize.width}else o=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter){o-=this._leftGap,o+=this._contentUt.width/2-this._allItemSizeNoEdge/2}return n=o+e,{id:t,left:o,right:n,x:o+this._itemTmpUt.anchorX*e,y:this._itemTmp.y};case m.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){let i=this._getFixedSize(t);n=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-i.count)-(i.val+this._columnGap*i.count);let s=this._customSize[t];e=s>0?s:this._itemSize.width}else n=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter){n+=this._rightGap,n-=this._contentUt.width/2-this._allItemSizeNoEdge/2}return o=n-e,{id:t,right:n,left:o,x:o+this._itemTmpUt.anchorX*e,y:this._itemTmp.y}}break;case m.Type.VERTICAL:switch(this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){let e=this._getFixedSize(t);s=-this._topGap-(this._itemSize.height+this._lineGap)*(t-e.count)-(e.val+this._lineGap*e.count);let l=this._customSize[t];i=l>0?l:this._itemSize.height}else s=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter){s+=this._topGap,s-=this._contentUt.height/2-this._allItemSizeNoEdge/2}return l=s-i,{id:t,top:s,bottom:l,x:this._itemTmp.x,y:l+this._itemTmpUt.anchorY*i};case m.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){let e=this._getFixedSize(t);l=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-e.count)+(e.val+this._lineGap*e.count);let s=this._customSize[t];i=s>0?s:this._itemSize.height}else l=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter){l-=this._bottomGap,l+=this._contentUt.height/2-this._allItemSizeNoEdge/2}return s=l+i,{id:t,top:s,bottom:l,x:this._itemTmp.x,y:l+this._itemTmpUt.anchorY*i}}case m.Type.GRID:{let e=Math.floor(t/this._colLineNum);switch(this._startAxis){case m.AxisDirection.HORIZONTAL:switch(this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:s=-this._topGap-(this._itemSize.height+this._lineGap)*e,l=s-this._itemSize.height,h=l+this._itemTmpUt.anchorY*this._itemSize.height;break;case m.VerticalDirection.BOTTOM_TO_TOP:l=this._bottomGap+(this._itemSize.height+this._lineGap)*e,s=l+this._itemSize.height,h=l+this._itemTmpUt.anchorY*this._itemSize.height}switch(a=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmpUt.anchorX*this._itemSize.width,a-=this._contentUt.anchorX*this._contentUt.width;break;case m.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmpUt.anchorX)*this._itemSize.width,a-=(1-this._contentUt.anchorX)*this._contentUt.width,a*=-1}return{id:t,top:s,bottom:l,x:a,y:h};case m.AxisDirection.VERTICAL:switch(this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:o=this._leftGap+(this._itemSize.width+this._columnGap)*e,n=o+this._itemSize.width,a=o+this._itemTmpUt.anchorX*this._itemSize.width,a-=this._contentUt.anchorX*this._contentUt.width;break;case m.HorizontalDirection.RIGHT_TO_LEFT:n=-this._rightGap-(this._itemSize.width+this._columnGap)*e,o=n-this._itemSize.width,a=o+this._itemTmpUt.anchorX*this._itemSize.width,a+=(1-this._contentUt.anchorX)*this._contentUt.width}switch(h=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:h-=(1-this._itemTmpUt.anchorY)*this._itemSize.height,h+=(1-this._contentUt.anchorY)*this._contentUt.height;break;case m.VerticalDirection.BOTTOM_TO_TOP:h-=this._itemTmpUt.anchorY*this._itemSize.height,h+=this._contentUt.anchorY*this._contentUt.height,h*=-1}return{id:t,left:o,right:n,x:a,y:h}}break}}}_calcExistItemPos(t){let e=this.getItemByListId(t);if(!e)return null;let i=e.getComponent(g),s=e.getPosition(),l={id:t,x:s.x,y:s.y};return this._sizeType?(l.top=s.y+i.height*(1-i.anchorY),l.bottom=s.y-i.height*i.anchorY):(l.left=s.x-i.width*i.anchorX,l.right=s.x+i.width*(1-i.anchorX)),l}getItemPos(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)}_getFixedSize(t){if(!this._customSize)return null;null==t&&(t=this._numItems);let e=0,i=0;for(let s in this._customSize)parseInt(s)<t&&(e+=this._customSize[s],i++);return{val:e,count:i}}_onScrollBegan(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft}_onScrollEnded(){let t=this;if(t._curScrollIsTouch=!1,null!=t.scrollToListId){let e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&v(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=St.ADHERING||t.adhering?t._slideMode==St.PAGE&&(null!=t._beganPos&&t._curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()}_onTouchStart(t,e){if(this._scrollView._hasNestedViewGroup(t,e))return;if(this._curScrollIsTouch=!0,!(t.eventPhase===Event.AT_TARGET&&t.target===this.node)){let e=t.target;for(;null==e._listId&&e.parent;)e=e.parent;this._scrollItem=null!=e._listId?e:t.target}}_onTouchUp(){let t=this;t._scrollPos=null,t._slideMode==St.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==St.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null}_onTouchCancelled(t,e){let i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==St.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==St.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)}_onSizeChanged(){this.checkInited(!1)&&this._onScrolling()}_onItemAdaptive(t){let e=t.getComponent(g);if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});let i=this._sizeType?e.height:e.width;this._customSize[t._listId]!=i&&(this._customSize[t._listId]=i,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}}_pageAdhere(){let t=this;if(!t.cyclic&&(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0))return;let e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){let i=.5;switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(i):t.nextPage(i);break;case 2:case 3:t._beganPos<e?t.prePage(i):t.nextPage(i)}}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}adhere(){let t=this;if(!t.checkInited())return;if(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)return;t.adhering=!0,t._calcNearestItem();let e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width);t.scrollTo(t.nearestListId,.7,e)}update(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){let t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum;for(let e=this._updateCounter;e<t;e++){let t=this.displayData[e];t&&this._createOrUpdateItem(t)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==St.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){let t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum;for(let e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==St.PAGE&&(this.curPageNum=this.nearestListId)}_createOrUpdateItem(t){let e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(new T(t.x,t.y,0)),this._resetItemSize(e),this.renderEvent&&r.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{let i=this._pool.size()>0;if(e=i?this._pool.get():I(this._itemTmp),i&&p(e)||(e=I(this._itemTmp),i=!1),e._listId!=t.id){e._listId=t.id,e.getComponent(g).setContentSize(this._itemSize)}if(e.setPosition(new T(t.x,t.y,0)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){let t=e.getComponent(S);t&&t.updateAlignment()}e.setSiblingIndex(this.content.children.length-1);let s=e.getComponent(z);e.listItem=s,s&&(s.listId=t.id,s.list=this,s._registerEvent()),this.renderEvent&&r.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)}_createOrUpdateItem2(t){let e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&r.emitEvents([this.renderEvent],i,t%this._actualNumItems)):(i=I(this._itemTmp),i._listId=t,this.content.addChild(i),e=i.getComponent(z),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&r.emitEvents([this.renderEvent],i,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)}_updateListItem(t){if(t&&this.selectedMode>vt.NONE){let e=t.node;switch(this.selectedMode){case vt.SINGLE:t.selected=this.selectedId==e._listId;break;case vt.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}}_resetItemSize(t){}_updateItemPos(t){let e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)}setMultSelected(t,e){let i=this;if(i.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else{let s,l;if(e)for(let e=t.length-1;e>=0;e--)s=t[e],l=i.multSelected.indexOf(s),l<0&&i.multSelected.push(s);else for(let e=t.length-1;e>=0;e--)s=t[e],l=i.multSelected.indexOf(s),l>=0&&i.multSelected.splice(l,1)}i._forceUpdate=!0,i._onScrolling()}}getMultSelected(){return this.multSelected}hasMultSelected(t){return this.multSelected&&this.multSelected.indexOf(t)>=0}updateItem(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(let e=0,i=t.length;e<i;e++){let i=t[e],s=this.getItemByListId(i);s&&r.emitEvents([this.renderEvent],s,i%this._actualNumItems)}}}updateAll(){this.checkInited()&&(this.numItems=this.numItems)}getItemByListId(t){if(this.content)for(let e=this.content.children.length-1;e>=0;e--){let i=this.content.children[e];if(i._listId==t)return i}}_getOutsideItem(){let t,e=[];for(let i=this.content.children.length-1;i>=0;i--)t=this.content.children[i],this.displayData.find((e=>e.id==t._listId))||e.push(t);return e}_delRedundantItem(){if(this._virtual){let t=this._getOutsideItem();for(let e=t.length-1;e>=0;e--){let i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(let t=this._lastDisplayData.length-1;t>=0;t--)if(this._lastDisplayData[t]==i._listId){this._lastDisplayData.splice(t,1);break}}}}else for(;this.content.children.length>this._numItems;)this._delSingleItem(this.content.children[this.content.children.length-1])}_delSingleItem(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null}aniDelItem(t,e,i){let s=this;if(!s.checkInited()||s.cyclic||!s._virtual)return console.error("This function is not allowed to be called!");if(!e)return console.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(s._aniDelRuning)return console.warn("Please wait for the current deletion to finish!");let l,o=s.getItemByListId(t);if(!o)return void e(t);l=o.getComponent(z),s._aniDelRuning=!0,s._aniDelCB=e,s._aniDelItem=o,s._aniDelBeforePos=o.position,s._aniDelBeforeScale=o.scale;let n=s.displayData[s.displayData.length-1].id,a=l.selected;l.showAni(i,(()=>{let i;if(n<s._numItems-2&&(i=n+1),null!=i){let t=s._calcItemPos(i);s.displayData.push(t),s._virtual?s._createOrUpdateItem(t):s._createOrUpdateItem2(i)}else s._numItems--;if(s.selectedMode==vt.SINGLE)a?s._selectedId=-1:s._selectedId-1>=0&&s._selectedId--;else if(s.selectedMode==vt.MULT&&s.multSelected.length){let e=s.multSelected.indexOf(t);e>=0&&s.multSelected.splice(e,1);for(let e=s.multSelected.length-1;e>=0;e--){s.multSelected[e]>=t&&s.multSelected[e]--}}if(s._customSize){s._customSize[t]&&delete s._customSize[t];let e,i={};for(let l in s._customSize){e=s._customSize[l];let o=parseInt(l);i[o-(o>=t?1:0)]=e}s._customSize=i}let l,h;for(let a=null!=i?i:n;a>=t+1;a--)if(o=s.getItemByListId(a),o){let i=s._calcItemPos(a-1);l=v(o).to(.2333,{position:new T(i.x,i.y,0)}),a<=t+1&&(h=!0,l.call((()=>{s._aniDelRuning=!1,e(t),delete s._aniDelCB}))),l.start()}h||(s._aniDelRuning=!1,e(t),s._aniDelCB=null)}),!0)}scrollTo(t,e=.5,i=null,s=!1){let l=this;if(!l.checkInited(!1))return;null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=l._numItems&&(t=l._numItems-1),!l._virtual&&l._layout&&l._layout.enabled&&l._layout.updateLayout();let o,n,a=l.getItemPos(t);if(!a)return w;switch(l._alignCalcType){case 1:o=a.left,o-=null!=i?l._thisNodeUt.width*i:l._leftGap,a=new T(o,0,0);break;case 2:o=a.right-l._thisNodeUt.width,o+=null!=i?l._thisNodeUt.width*i:l._rightGap,a=new T(o+l._contentUt.width,0,0);break;case 3:n=a.top,n+=null!=i?l._thisNodeUt.height*i:l._topGap,a=new T(0,-n,0);break;case 4:n=a.bottom+l._thisNodeUt.height,n-=null!=i?l._thisNodeUt.height*i:l._bottomGap,a=new T(0,-n+l._contentUt.height,0)}let h=l.content.getPosition();h=Math.abs(l._sizeType?h.y:h.x);let r=l._sizeType?a.y:a.x;Math.abs((null!=l._scrollPos?l._scrollPos:h)-r)>.5&&(l._scrollView.scrollToOffset(a,e),l._scrollToListId=t,l._scrollToEndTime=(new Date).getTime()/1e3+e,l._scrollToSo=l.scheduleOnce((()=>{if(l._adheringBarrier||(l.adhering=l._adheringBarrier=!1),l._scrollPos=l._scrollToListId=l._scrollToEndTime=l._scrollToSo=null,s){let e=l.getItemByListId(t);e&&v(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}}),e+.1),e<=0&&l._onScrolling())}_calcNearestItem(){let t,e,i,s,l,o,n=this;n.nearestListId=null,n._virtual&&n._calcViewPos(),i=n.viewTop,s=n.viewRight,l=n.viewBottom,o=n.viewLeft;let a=!1;for(let h=0;h<n.content.children.length&&!a;h+=n._colLineNum)if(t=n._virtual?n.displayData[h]:n._calcExistItemPos(h),t)switch(e=n._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,n._alignCalcType){case 1:t.right>=o&&(n.nearestListId=t.id,o>e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 2:t.left<=s&&(n.nearestListId=t.id,s<e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 3:t.bottom<=i&&(n.nearestListId=t.id,i<e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 4:t.top>=l&&(n.nearestListId=t.id,l>e&&(n.nearestListId+=n._colLineNum),a=!0)}if(t=n._virtual?n.displayData[n.displayItemNum-1]:n._calcExistItemPos(n._numItems-1),t&&t.id==n._numItems-1)switch(e=n._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,n._alignCalcType){case 1:s>e&&(n.nearestListId=t.id);break;case 2:o<e&&(n.nearestListId=t.id);break;case 3:l<e&&(n.nearestListId=t.id);break;case 4:i>e&&(n.nearestListId=t.id)}}prePage(t=.5){this.checkInited()&&this.skipPage(this.curPageNum-1,t)}nextPage(t=.5){this.checkInited()&&this.skipPage(this.curPageNum+1,t)}skipPage(t,e){let i=this;if(i.checkInited())return i._slideMode!=St.PAGE?console.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&r.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))}calcCustomSize(t){let e=this;if(!e.checkInited())return;if(!e._itemTmp)return console.error("Unset template item!");if(!e.renderEvent)return console.error("Unset Render-Event!");e._customSize={};let i=I(e._itemTmp),s=i.getComponent(g);e.content.addChild(i);for(let l=0;l<t;l++)r.emitEvents([e.renderEvent],i,l),s.height==e._itemSize.height&&s.width==e._itemSize.width||(e._customSize[l]=e._sizeType?s.height:s.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}}).prototype,"templateType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ft.NODE}}),Q=e(J.prototype,"tmpNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(J.prototype,"tmpPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(J.prototype,"_slideMode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return St.NORMAL}}),e(J.prototype,"slideMode",[O],Object.getOwnPropertyDescriptor(J.prototype,"slideMode"),J.prototype),et=e(J.prototype,"pageDistance",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),it=e(J.prototype,"pageChangeEvent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),st=e(J.prototype,"_virtual",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(J.prototype,"virtual",[B],Object.getOwnPropertyDescriptor(J.prototype,"virtual"),J.prototype),lt=e(J.prototype,"cyclic",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=e(J.prototype,"lackCenter",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nt=e(J.prototype,"lackSlide",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at=e(J.prototype,"_updateRate",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(J.prototype,"updateRate",[H],Object.getOwnPropertyDescriptor(J.prototype,"updateRate"),J.prototype),ht=e(J.prototype,"frameByFrameRenderNum",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rt=e(J.prototype,"renderEvent",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),ct=e(J.prototype,"selectedMode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vt.NONE}}),_t=e(J.prototype,"selectedEvent",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),dt=e(J.prototype,"repeatEventSingle",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ut=e(J.prototype,"_numItems",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=J))||q)||q)||q)||q)||q));s._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,i,n,s,o,l,r,a,c,d,h,p,u,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Sprite,o=e.Node,l=e.Enum,r=e.SpriteFrame,a=e._decorator,c=e.Component,d=e.Button,h=e.EventHandler,p=e.UITransform,u=e.tween,m=e.Vec3},function(e){b=e.DEV}],execute:function(){var g,f,v,y,_,C,w,S,E,F,I,N,z,T,k,D,H;n._RF.push({},"850b3xYLj1Ef5JlQ4X/4ZZH","ListItem",void 0);const{ccclass:L,property:M,disallowMultiple:G,menu:O,executionOrder:R}=a;var W=function(e){return e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH",e}(W||{});e("default",(g=G(),f=O("List Item"),v=R(-5001),y=M({type:s,tooltip:b}),_=M({type:o,tooltip:b}),C=M({type:l(W),tooltip:b}),w=M({type:o,tooltip:b,visible(){return this.selectedMode>W.NONE}}),S=M({type:r,tooltip:b,visible(){return this.selectedMode==W.SWITCH}}),E=M({tooltip:b}),L(F=g(F=f(F=v((N=t((I=class extends c{constructor(...e){super(...e),i(this,"icon",N,this),i(this,"title",z,this),i(this,"selectedMode",T,this),i(this,"selectedFlag",k,this),i(this,"selectedSpriteFrame",D,this),this._unselectedSpriteFrame=null,i(this,"adaptiveSize",H,this),this._selected=!1,this._btnCom=void 0,this.list=void 0,this._eventReg=!1,this.listId=void 0}set selected(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case W.TOGGLE:this.selectedFlag.active=e;break;case W.SWITCH:let t=this.selectedFlag.getComponent(s);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}}get selected(){return this._selected}get btnCom(){return this._btnCom||(this._btnCom=this.node.getComponent(d)),this._btnCom}onLoad(){if(this.selectedMode==W.SWITCH){let e=this.selectedFlag.getComponent(s);this._unselectedSpriteFrame=e.spriteFrame}}onDestroy(){this.node.off(o.EventType.SIZE_CHANGED,this._onSizeChange,this)}_registerEvent(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(o.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)}_onSizeChange(){this.list._onItemAdaptive(this.node)}createEvt(e,t,i=null){if(!e.isValid)return;e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");let n=new h;return n.target=i||e.node,n.component=e.comName,n.handler=t,n}showAni(e,t,i){let n,s=this,o=s.node.getComponent(p);switch(e){case 0:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,2*o.height)});break;case 1:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(2*o.width,0)});break;case 2:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,-2*o.height)});break;case 3:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(-2*o.width,0)});break;default:n=u(s.node).to(.3,{scale:new m(.1,.1)})}(t||i)&&n.call((()=>{if(i){s.list._delSingleItem(s.node);for(let e=s.list.displayData.length-1;e>=0;e--)if(s.list.displayData[e].id==s.listId){s.list.displayData.splice(e,1);break}}t()})),n.start()}onClickThis(){this.list.selectedId=this.listId}}).prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"title",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(I.prototype,"selectedMode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.NONE}}),k=t(I.prototype,"selectedFlag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"selectedSpriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"adaptiveSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=I))||F)||F)||F)||F));n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,r,a;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){e=t.cclegacy,n=t.Node,r=t._decorator,a=t.Component}],execute:function(){var c,s,l,d,u;e._RF.push({},"372c8RqjztKG7oYPW8LkSjd","LoadingIndicator",void 0);const{ccclass:g,property:p}=r;t("LoadingIndicator",(c=g("LoadingIndicator"),s=p(n),c((u=o((d=class extends a{constructor(...t){super(...t),i(this,"loading",u,this),this.loading_rotate=0}update(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)}}).prototype,"loading",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=d))||l));e._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(t){var s,e;return{setters:[function(t){s=t.cclegacy,e=t.log}],execute:function(){s._RF.push({},"fb9ccDtf8dGRaNroxFJs7q9","Logger",void 0);let i=t("LogType",function(t){return t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace",t}({}));var n={1:"网络日志",2:"数据日志",4:"业务日志",8:"视图日志",16:"配置日志",32:"标准日志"};class r{static init(){this.tags=i.Net|i.Model|i.Business|i.View|i.Config|i.Trace}static setTags(t=null){t&&(this.tags=t)}static start(t="Time"){console.time(t)}static end(t="Time"){console.timeEnd(t)}static table(t,s){this.isOpen(i.Trace)&&console.table(t)}static trace(t,s="color:#ffffff;"){this.isOpen(i.Trace)&&(console.log||e).call(null,"%c%s%s",s,this.getDateString(),t)}static logNet(t,s){this.orange(i.Net,t,s)}static logModel(t,s){this.violet(i.Model,t,s)}static logBusiness(t,s){this.blue(i.Business,t,s)}static logView(t,s){this.green(i.View,t,s)}static logConfig(t,s){this.gray(i.Config,t,s)}static orange(t,s,e){this.print(t,s,"color:#ee7700;",e)}static violet(t,s,e){this.print(t,s,"color:Violet;",e)}static blue(t,s,e){this.print(t,s,"color:#3a5fcd;",e)}static green(t,s,e){this.print(t,s,"color:green;",e)}static gray(t,s,e){this.print(t,s,"color:gray;",e)}static isOpen(t){return 0!=(this.tags&t)}static print(t,s,i,r){if(this.isOpen(t)){var a=console.log||e,l=n[t];r?a.call(null,"%c%s%s%s:%s%o",i,this.getDateString(),"["+l+"]",this.stack(5),r,s):a.call(null,"%c%s%s%s:%o",i,this.getDateString(),"["+l+"]",this.stack(5),s)}}static stack(t){var s=(new Error).stack.split("\n"),e=[];s.forEach((t=>{var s=(t=t.substring(7)).split(" ");s.length<2?e.push(s[0]):e.push({[s[0]]:s[1]})}));var i,n=[],r=[];if(t<e.length-1)for(var a in e[t]){if(2==(r=a.split(".")).length)n=r.concat();else{var l=(i=e[t][a]).lastIndexOf("/"),o=i.lastIndexOf(".");if(l>-1&&o>-1){var c=i.substring(l+1,o);n.push(c)}else n.push(i)}}return 1==n.length?"["+n[0]+".ts]":2==n.length?"["+n[0]+".ts->"+n[1]+"]":""}static getDateString(){let t=new Date,s=t.getHours().toString(),e="";return e+=(1==s.length?"0"+s:s)+":",s=t.getMinutes().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getSeconds().toString(),e+=(1==s.length?"0"+s:s)+":",s=t.getMilliseconds().toString(),1==s.length&&(s="00"+s),2==s.length&&(s="0"+s),e+=s,e="["+e+"]",e}}t("Logger",r),r.tags=0,r.init(),s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Config.ts","./Oops.ts","./Root.ts","./AudioEffect.ts","./AudioManager.ts","./AudioMusic.ts","./EventDispatcher.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./Logger.ts","./StorageManager.ts","./Timer.ts","./TimerManager.ts","./DirectorExt.ts","./NodeExt.ts","./GameManager.ts","./GUI.ts","./Defines.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerManager.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIMap.ts","./LoadingIndicator.ts","./Notify.ts","./EncryptUtil.ts","./JsonUtil.ts","./List.ts","./ListItem.ts","./StringUtil.ts","./ViewUtil.ts","./Badge.ts","./ButtonEffect.ts","./ButtonSimple.ts","./ButtonTouchLong.ts","./UIButton.ts","./LabelChange.ts","./LabelNumber.ts","./LabelTime.ts","./Language.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguagePack.ts","./LanguageSpine.ts","./LanguageSprite.ts","./HttpRequest.ts","./NetInterface.ts","./NetManager.ts","./NetNode.ts","./NetNodeIO.ts","./NetSimpleManager.ts","./WebSimpleIO.ts","./WebSock.ts","./WebSocketIO.ts","./EventMessage_work.ts","./ChatDatas.ts","./StorageKeys.ts","./NetChannelManager.ts","./NetConfig.ts","./NetListener.ts","./NetSimpleTips.ts","./Main.ts","./UIConfig.ts","./UIChatView.ts","./UIHotUpView.ts","./UpdatePanel.ts","./UILoginView.ts","./UIMainView.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./Oops.ts","./Root.ts","./UIConfig.ts"],(function(t){var n,o,a,s,e,i;return{setters:[function(t){n=t.cclegacy,o=t._decorator},function(t){a=t.oops},function(t){s=t.Root},function(t){e=t.UIConfigData,i=t.UIID}],execute:function(){var c;n._RF.push({},"1071bqexddL7LaK3yvX8TIG","Main",void 0);const{ccclass:u,property:r}=o;t("Main",u("Main")(c=class extends s{start(){a.language.setLanguage("zh",(()=>{a.res.loadDir("common",(()=>{a.gui.toast("加载组件完成"),a.gui.init(e),a.gui.open(i.HotUp)}))}))}update(t){}})||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["cc"],(function(e){var t,s,n;return{setters:[function(e){t=e.cclegacy,s=e.warn,n=e.log}],execute:function(){t._RF.push({},"c2dc3TRu75Kv4RnCL82z+Z9","MessageManager",void 0);class l{constructor(){this.event=void 0,this.listener=void 0,this.object=void 0}}e("MessageEventData",class{constructor(){this.events=new Map}on(e,t,s){let n=this.events.get(e);null==n&&(n=[],this.events.set(e,n));let i=new l;i.event=e,i.listener=t,i.object=s,n.push(i),o.on(e,t,s)}off(e){let t=this.events.get(e);if(t){for(let s of t)o.off(e,s.listener,s.object);this.events.delete(e)}}dispatchEvent(e,...t){o.dispatchEvent(e,...t)}clear(){for(let e in this.events)this.off(e)}});class i{constructor(){this.events=new Map}on(e,t,n){if(!e||!t)return void s(`注册【${e}】事件的侦听器函数为空`);let i=this.events.get(e);null==i&&(i=[],this.events.set(e,i));let o=i.length;for(let l=0;l<o;l++){let o=i[l];o.listener==t&&o.object==n&&s(`名为【${e}】的事件重复注册侦听器`)}let c=new l;c.event=e,c.listener=t,c.object=n,i.push(c)}once(e,t,s){let n=(l,...i)=>{this.off(e,n,s),n=null,t.call(s,l,i)};this.on(e,n,s)}off(e,t,s){let l=this.events.get(e);if(!l)return void n(`名为【${e}】的事件不存在`);let i=l.length;for(let e=0;e<i;e++){let n=l[e];if(n.listener==t&&n.object==s){l.splice(e,1);break}}0==l.length&&this.events.delete(e)}offAll(e){for(let t of this.events){let s=t[0],n=t[1];for(let t=n.length-1;t>=0;t--){n[t].object==e&&n.splice(t,1)}0==n.length&&this.events.delete(s)}}dispatchEvent(e,...t){let s=this.events.get(e);if(null!=s){let n=s.concat(),l=n.length;for(let s=0;s<l;s++){let l=n[s];l.listener.call(l.object,e,...t)}}}}e("MessageManager",i);const o=e("message",new i);t._RF.pop()}}}));

System.register("chunks:///_virtual/NetChannelManager.ts",["cc","./Oops.ts","./WebSimpleIO.ts","./ChatDatas.ts","./NetConfig.ts","./NetListener.ts"],(function(t){var e,n,a,c,s,h;return{setters:[function(t){e=t.cclegacy},function(t){n=t.oops},function(t){a=t.WebSimpleIO},function(t){c=t.chatmgr},function(t){s=t.netConfig},function(t){h=t.netListener_chat}],execute:function(){e._RF.push({},"eb6b1amhBNEY6MeniyNvv7s","NetChannelManager",void 0);let i=t("NetChannelType",function(t){return t[t.Chat=0]="Chat",t}({}));class o{constructor(){this.chat=void 0}chatCreate(){this.chat||(this.chat=new a,c.init()),n.netmgr.setNetNode(this.chat,i.Chat),this.chat.onMessage=t=>{h.onMessage(t)}}chatConnect(){n.netmgr.connect({url:s.chaturl},i.Chat)}chatClose(){n.netmgr.close(i.Chat)}}t("NetChannelManager",o);t("netChannel",new o);e._RF.pop()}}}));

System.register("chunks:///_virtual/NetConfig.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"c7517y7Md5NzZmqcuHTiqJr","NetConfig",void 0);t("netConfig",new class{constructor(){this.protocol="ws",this.chatIp="192.168.3.22",this.chatPort="3000",this.chaturl="ws://192.168.3.22:3000"}});c._RF.pop()}}}));

System.register("chunks:///_virtual/NetInterface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"930cfE0MehIrLzs/syBBepr","NetInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/NetListener.ts",["cc","./Oops.ts","./EventMessage_work.ts"],(function(e){var s,t,a;return{setters:[function(e){s=e.cclegacy},function(e){t=e.oops},function(e){a=e.EventMessage_work}],execute:function(){s._RF.push({},"d8fb874Lr1CV7PrWKy1SpCB","NetListener",void 0);let n=e("Cmd",function(e){return e[e.test1=1]="test1",e[e.ChatMsg=2]="ChatMsg",e[e.ChatNumUsers=3]="ChatNumUsers",e}({}));class c{onMessage(e){let s=e.cmd;switch(console.log(e),s){case n.test1:t.message.dispatchEvent(s+"",e);break;case n.ChatMsg:t.message.dispatchEvent(a.RecvChatMsg,e);break;case n.ChatNumUsers:t.message.dispatchEvent(a.RecvChatNumUsers,e)}}}e("ChatNetListener",c);e("netListener_chat",new c);s._RF.pop()}}}));

System.register("chunks:///_virtual/NetManager.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"ecc0fCPl2VFsJWqnxkuDgtX","NetManager",void 0);class t{constructor(){this._channels={}}static getInstance(){return this._instance||(this._instance=new t),this._instance}setNetNode(e,n=0){this._channels[n]=e}removeNetNode(e){delete this._channels[e]}connect(e,n=0){return!!this._channels[n]&&this._channels[n].connect(e)}send(e,n=!1,t=0){let s=this._channels[t];return s?s.send(e,n):-1}request(e,n,t=!0,s=!1,c=0){let i=this._channels[c];i&&i.request(e,n,t,s)}requestUnique(e,n,t=!0,s=!1,c=0){let i=this._channels[c];return!!i&&i.requestUnique(e,n,t,s)}close(e,n,t=0){if(this._channels[t])return this._channels[t].closeSocket(e,n)}}e("NetManager",t),t._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/NetNode.ts",["cc","./Logger.ts"],(function(e){var t,s,i,n;return{setters:[function(e){t=e.cclegacy,s=e.error,i=e.warn},function(e){n=e.Logger}],execute:function(){t._RF.push({},"21f91S45MhKBJ+ZQhyUZLIk","NetNode",void 0);var r=["已关闭","连接中","验证中","可传输数据"];let o=e("NetTipsType",function(e){return e[e.Connecting=0]="Connecting",e[e.ReConnecting=1]="ReConnecting",e[e.Requesting=2]="Requesting",e}({})),c=e("NetNodeState",function(e){return e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Checking=2]="Checking",e[e.Working=3]="Working",e}({}));e("NetNode",class{constructor(){this._connectOptions=null,this._autoReconnect=0,this._isSocketInit=!1,this._isSocketOpen=!1,this._state=c.Closed,this._socket=null,this._networkTips=null,this._protocolHelper=null,this._connectedCallback=null,this._disconnectCallback=null,this._callbackExecuter=null,this._keepAliveTimer=null,this._receiveMsgTimer=null,this._reconnectTimer=null,this._heartTime=1e4,this._receiveTime=6e6,this._reconnetTimeOut=8e6,this._requests=Array(),this._listener={}}init(e,t,s=null,i=null){n.logNet("网络初始化"),this._socket=e,this._protocolHelper=t,this._networkTips=s,this._callbackExecuter=i||((e,t)=>{e.callback.call(e.target,t)})}connect(e){return!(!this._socket||this._state!=c.Closed)&&(this._isSocketInit||this.initSocket(),this._state=c.Connecting,this._socket.connect(e)?(null==this._connectOptions&&"number"==typeof e.autoReconnect&&(this._autoReconnect=e.autoReconnect),this._connectOptions=e,this.updateNetTips(o.Connecting,!0),!0):(this.updateNetTips(o.Connecting,!1),!1))}initSocket(){this._socket&&(this._socket.onConnected=e=>{this.onConnected(e)},this._socket.onMessage=e=>{this.onMessage(e)},this._socket.onError=e=>{this.onError(e)},this._socket.onClosed=e=>{this.onClosed(e)},this._isSocketInit=!0)}updateNetTips(e,t){this._networkTips&&(e==o.Requesting?this._networkTips.requestTips(t):e==o.Connecting?this._networkTips.connectTips(t):e==o.ReConnecting&&this._networkTips.reconnectTips(t))}onConnected(e){n.logNet("网络已连接"),this._isSocketOpen=!0,null!==this._connectedCallback?(this._state=c.Checking,this._connectedCallback((()=>{this.onChecked()}))):this.onChecked(),n.logNet(`网络已连接当前状态为【${r[this._state]}】`)}onChecked(){n.logNet("连接验证成功，进入工作状态"),this._state=c.Working,this.updateNetTips(o.Connecting,!1),this.updateNetTips(o.ReConnecting,!1);var e=this._requests.concat();if(e.length>0){n.logNet(`请求【${this._requests.length}】个待发送的信息`);for(var t=0;t<e.length;){let s=e[t];this._socket.send(s.buffer),null==s.rspObject||""!=s.rspCmd?e.splice(t,1):++t}this.updateNetTips(o.Requesting,this._requests.length>0)}}onMessage(e){var t=JSON.parse(e);if(!this._protocolHelper.checkResponsePackage(t))return void s("校验接受消息数据异常");this._protocolHelper.handlerResponsePackage(t)||this._networkTips&&this._networkTips.responseErrorCode(t.code),this.resetReceiveMsgTimer(),this.resetHearbeatTimer();let i=this._protocolHelper.getPackageId(t);if(n.logNet(`接受到命令【${i}】的消息`),this._requests.length>0){for(let e in this._requests){let s=this._requests[e];if(s.rspCmd==i&&s.rspObject){n.logNet(`触发请求命令【${i}】的回调`),this._callbackExecuter(s.rspObject,t.data),this._requests.splice(parseInt(e),1);break}}0==this._requests.length?this.updateNetTips(o.Requesting,!1):n.logNet(`请求队列中还有【${this._requests.length}】个请求在等待`)}let r=this._listener[i];if(null!=r)for(const e of r)n.logNet(`触发监听命令【${i}】的回调`),this._callbackExecuter(e,t.data)}onError(e){s(e)}onClosed(e){this.clearTimer(),!this._disconnectCallback||this._disconnectCallback()?this.isAutoReconnect()?(this.updateNetTips(o.ReConnecting,!0),this._reconnectTimer=setTimeout((()=>{this._socket.close(),this._state=c.Closed,this.connect(this._connectOptions),this._autoReconnect>0&&(this._autoReconnect-=1)}),this._reconnetTimeOut)):this._state=c.Closed:n.logNet("断开连接")}close(e,t){this.clearTimer(),this._listener={},this._requests.length=0,this._networkTips&&(this._networkTips.connectTips(!1),this._networkTips.reconnectTips(!1),this._networkTips.requestTips(!1)),this._socket?this._socket.close(e,t):this._state=c.Closed}closeSocket(e,t){this._socket&&this._socket.close(e,t)}send(e,t=!1){return this._state==c.Working||t?this._socket.send(e):this._state==c.Checking||this._state==c.Connecting?(this._requests.push({buffer:e,rspCmd:"",rspObject:null}),n.logNet(`当前状态为【${r[this._state]}】,繁忙并缓冲发送数据`),0):(s(`当前状态为【${r[this._state]}】,请求错误`),-1)}request(e,t,s=!0,i=!1){var n=this._protocolHelper.handlerRequestPackage(e);this.base_request(e,n,t,s,i)}requestUnique(e,t,s=!0,i=!1){var r=this._protocolHelper.handlerRequestPackage(e);for(let e=0;e<this._requests.length;++e)if(this._requests[e].rspCmd==r)return n.logNet(`命令【${r}】重复请求`),!1;return this.base_request(e,r,t,s,i),!0}base_request(e,t,s,i=!0,r=!1){var l=JSON.stringify(e);(this._state==c.Working||r)&&this._socket.send(l),n.logNet(`队列命令为【${t}】的请求，等待请求数据的回调`),this._requests.push({buffer:l,rspCmd:t,rspObject:s}),i&&this.updateNetTips(o.Requesting,!0)}setResponeHandler(e,t,i){return null==t?(s(`命令为【${e}】设置响应处理程序错误`),!1):(this._listener[e]=[{target:i,callback:t}],!0)}addResponeHandler(e,t,i){if(null==t)return s(`命令为【${e}】添加响应处理程序错误`),!1;let n={target:i,callback:t};if(null==this._listener[e])this._listener[e]=[n];else{-1==this.getNetListenersIndex(e,n)&&this._listener[e].push(n)}return!0}removeResponeHandler(e,t,s){if(null!=this._listener[e]&&null!=t){let i=this.getNetListenersIndex(e,{target:s,callback:t});-1!=i&&this._listener[e].splice(i,1)}}cleanListeners(e=""){""==e?this._listener={}:delete this._listener[e]}getNetListenersIndex(e,t){let s=-1;for(let i=0;i<this._listener[e].length;i++){let n=this._listener[e][i];if(n.callback==t.callback&&n.target==t.target){s=i;break}}return s}resetReceiveMsgTimer(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),this._receiveMsgTimer=setTimeout((()=>{i("接收消息定时器关闭网络连接"),this._socket.close()}),this._receiveTime)}resetHearbeatTimer(){null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),this._keepAliveTimer=setTimeout((()=>{n.logNet("网络节点保持活跃发送心跳信息"),this.send(this._protocolHelper.getHearbeat())}),this._heartTime)}clearTimer(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),null!==this._reconnectTimer&&clearTimeout(this._reconnectTimer)}isAutoReconnect(){return 0!=this._autoReconnect}rejectReconnect(){this._autoReconnect=0,this.clearTimer()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/NetNodeIO.ts",["cc","./Logger.ts","./NetNode.ts"],(function(t){var e,s,n,o,i,c;return{setters:[function(t){e=t.cclegacy,s=t.error},function(t){n=t.Logger},function(t){o=t.NetNode,i=t.NetNodeState,c=t.NetTipsType}],execute:function(){e._RF.push({},"18491TvBvJJGoI/r2LjN6fb","NetNodeIO",void 0);var h=["已关闭","连接中","验证中","可传输数据"];t("NetNodeIO",class extends o{constructor(...t){super(...t),this._connectOptions=null,this._isSocketInit=!1,this._isSocketOpen=!1,this._state=i.Closed,this._socket=null,this._networkTips=null,this._connectedCallback=null,this._disconnectCallback=null,this._callbackExecuter=null}init(t,e=null,s=null,o=null){n.logNet("网络初始化"),this._socket=t,this._networkTips=s}connect(t){return!(!this._socket||this._state!=i.Closed)&&(this._isSocketInit||this.initSocket(),this._state=i.Connecting,this._socket.connect(t)?(null==this._connectOptions&&"number"==typeof t.autoReconnect&&(this._autoReconnect=t.autoReconnect),this._connectOptions=t,this.updateNetTips(c.Connecting,!0),!0):(this.updateNetTips(c.Connecting,!1),!1))}initSocket(){this._socket&&(this._socket.onConnected=t=>{this.onConnected(t)},this._socket.onMessage=t=>{this.onMessage(t)},this._socket.onError=t=>{this.onError(t)},this._socket.onClosed=t=>{this.onClosed(t)},this._isSocketInit=!0)}updateNetTips(t,e){this._networkTips&&(t==c.Requesting?this._networkTips.requestTips(e):t==c.Connecting?this._networkTips.connectTips(e):t==c.ReConnecting&&this._networkTips.reconnectTips(e))}onConnected(t){n.logNet("网络已连接"),this._isSocketOpen=!0,this.onChecked(),n.logNet(`网络已连接当前状态为【${h[this._state]}】`)}onChecked(){n.logNet("连接验证成功，进入工作状态"),this._state=i.Working,this.updateNetTips(c.Connecting,!1),this.updateNetTips(c.ReConnecting,!1),this._requests.concat().length>0&&n.logNet(`请求【${this._requests.length}】个待发送的信息`)}onMessage(t){JSON.parse(t)}onError(t){s(t)}onClosed(t){}close(t,e){this._socket?this._socket.close(t,e):this._state=i.Closed}closeSocket(t,e){this._socket&&this._socket.close(t,e)}send(t,e=!1){return this._state==i.Working||e?this._socket.send(t):this._state==i.Checking||this._state==i.Connecting?(this._requests.push({buffer:t,rspCmd:"",rspObject:null}),n.logNet(`当前状态为【${h[this._state]}】,繁忙并缓冲发送数据`),0):(s(`当前状态为【${h[this._state]}】,请求错误`),-1)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/NetSimpleManager.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"de91aIz9GxK0bb8Eap2TeBB","NetSimpleManager",void 0);class t{constructor(){this._channels={}}static getInstance(){return this._instance||(this._instance=new t),this._instance}setNetNode(e,n=0){this._channels[n]=e}removeNetNode(e){delete this._channels[e]}connect(e,n=0){return!!this._channels[n]&&this._channels[n].connect(e)}close(e=0){if(this._channels[e])return this._channels[e].close()}send(e,n=0){let t=this._channels[n];return t?(t.send(e),0):-1}}e("NetSimpleManager",t),t._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/NetSimpleTips.ts",["cc","./Oops.ts"],(function(e){var o,s;return{setters:[function(e){o=e.cclegacy},function(e){s=e.oops}],execute:function(){o._RF.push({},"68aa5f4WLFFeKwAGjEnCRv4","NetSimpleTips",void 0);e("NetSimpleTips",class{connectTips(e){s.log.logNet("connectTips")}reconnectTips(e){s.log.logNet("reconnectTips")}requestTips(e){s.log.logNet("requestTips")}responseErrorCode(e){s.log.logNet("responseErrorCode:"+e)}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/NodeExt.ts",["cc"],(function(){var t,e,o,n,i,r,s,c,p,u,l,h,g,a,f,y,d,_,m,C,P,b,x;return{setters:[function(O){t=O.cclegacy,e=O.Node,o=O.UITransform,n=O.Size,i=O.UIOpacity,r=O.UIRenderer,s=O.Color,c=O.v3,p=O.Graphics,u=O.Label,l=O.RichText,h=O.Sprite,g=O.Button,a=O.Canvas,f=O.EditBox,y=O.Layout,d=O.PageView,_=O.ProgressBar,m=O.ScrollView,C=O.Slider,P=O.Toggle,b=O.Widget,x=O.Mask}],execute:function(){if(t._RF.push({},"36255jB0dBGxZc/NvV7hGDJ","NodeExt",void 0),!e.prototype.$__definedProperties__){e.prototype.$__definedProperties__=!0;let t={uiGraphics:p,uiLabel:u,uiRichText:l,uiSprite:h,uiButton:g,uiCanvas:a,uiEditBox:f,uiLayout:y,uiPageView:d,uiProgressBar:_,uiScrollView:m,uiSlider:C,uiToggle:P,uiWidget:b,uiOpacity:i,uiTransform:o,uiMask:x};for(const o in t)Object.defineProperty(e.prototype,o,{get:function(){return this.getComponent(t[o])},set:function(t){}});Object.defineProperty(e.prototype,"angle_x",{get:function(){return this.eulerAngles.x},set:function(t){let e=this;e.setRotationFromEuler(t,e.eulerAngles.y,e.eulerAngles.z)}}),Object.defineProperty(e.prototype,"angle_y",{get:function(){return this.eulerAngles.y},set:function(t){let e=this;e.setRotationFromEuler(e.eulerAngles.x,t,e.eulerAngles.z)}}),Object.defineProperty(e.prototype,"angle_z",{get:function(){return this.eulerAngles.y},set:function(t){let e=this;e.setRotationFromEuler(e.eulerAngles.x,e.eulerAngles.y,t)}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.setPosition(t,this.position.y)}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.setPosition(this.position.x,t)}}),Object.defineProperty(e.prototype,"z",{get:function(){return this.position.z},set:function(t){let e=this;e.setPosition(e.position.x,e.position.y,t)}}),Object.defineProperty(e.prototype,"w",{configurable:!0,get:function(){return this.getComponent(o)?.width??0},set:function(t){(this.getComponent(o)||this.addComponent(o)).width=t}}),Object.defineProperty(e.prototype,"h",{configurable:!0,get:function(){return this.getComponent(o)?.height??0},set:function(t){(this.getComponent(o)||this.addComponent(o)).height=t}}),Object.defineProperty(e.prototype,"size",{get:function(){let t=this.getComponent(o);return new n(t.width,t.height)},set:function(t){let e=this.getComponent(o)||this.addComponent(o);e.width=t.width,e.height=t.height}}),Object.defineProperty(e.prototype,"anchor_x",{get:function(){return this.getComponent(o)?.anchorX??.5},set:function(t){(this.getComponent(o)||this.addComponent(o)).anchorX=t}}),Object.defineProperty(e.prototype,"anchor_y",{get:function(){return this.getComponent(o)?.anchorY??.5},set:function(t){(this.getComponent(o)||this.addComponent(o)).anchorY=t}}),Object.defineProperty(e.prototype,"opacity",{get:function(){let t=this.getComponent(i);if(null!=t)return t.opacity;let e=this.getComponent(r);return e?e.color.a:255},set:function(t){let e=this,o=e.getComponent(i);if(null!=o)return void(o.opacity=t);let n=e.getComponent(r);n?(this.$__color__?this.$__color__.a=t:this.$__color__=new s(n.color.r,n.color.g,n.color.b,t),n.color=this.$__color__):e.addComponent(i).opacity=t}}),Object.defineProperty(e.prototype,"color",{get:function(){return this.getComponent(r)?.color},set:function(t){let e=this.getComponent(r);e&&(e.color=t)}}),Object.defineProperty(e.prototype,"scale_x",{get:function(){return this.scale.x},set:function(t){let e=this;e.scale=c(t,e.scale.y,e.scale.z)}}),Object.defineProperty(e.prototype,"scale_y",{get:function(){return this.scale.y},set:function(t){let e=this;e.scale=c(e.scale.x,t,e.scale.z)}}),Object.defineProperty(e.prototype,"scale_z",{get:function(){return this.scale.z},set:function(t){let e=this;e.scale=c(e.scale.x,e.scale.y,t)}})}t._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts"],(function(t){var n,e,i,o,a,l,r,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,a=t.Animation,l=t._decorator,r=t.Component},function(t){s=t.LanguageLabel}],execute:function(){var c,u,p,h,b,d,f;i._RF.push({},"24748TcuUlCuJyn+4x6NVd/","Notify",void 0);const{ccclass:y,property:m}=l;t("Notify",(c=y("Notify"),u=m(o),p=m(a),c((d=n((b=class extends r{constructor(...t){super(...t),e(this,"lab_content",d,this),e(this,"animation",f,this),this.onComplete=null}onLoad(){this.animation&&this.animation.on(a.EventType.FINISHED,this.onFinished,this)}onFinished(){this.node.destroy(),this.onComplete&&this.onComplete()}toast(t,n){let e=this.lab_content.getComponent(s);n?(e.enabled=!0,e.dataID=t):(e.enabled=!1,this.lab_content.string=t)}}).prototype,"lab_content",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=n(b.prototype,"animation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Oops.ts",["cc","./Language.ts","./HttpRequest.ts","./NetSimpleManager.ts","./Logger.ts"],(function(e){var t,o,n,i,g;return{setters:[function(e){t=e.cclegacy},function(e){o=e.LanguageManager},function(e){n=e.HttpRequest},function(e){i=e.NetSimpleManager},function(e){g=e.Logger}],execute:function(){t._RF.push({},"83fb7HuM/ZJp4c1om3T1ZVK","Oops",void 0);class s{}e("oops",s),s.log=g,s.res=void 0,s.config=void 0,s.gui=void 0,s.storage=void 0,s.audio=void 0,s.timer=void 0,s.message=void 0,s.game=void 0,s.language=new o,s.http=new n,s.netmgr=new i,t._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["cc"],(function(e){var s,l,r,t,a,n,d;return{setters:[function(e){s=e.cclegacy,l=e.assetManager,r=e.error,t=e.warn,a=e.Asset,n=e.js,d=e.resources}],execute:function(){s._RF.push({},"b0e27HQOEdAWI7YW0MzB94O","ResLoader",void 0);class o{constructor(){this.defaultBundleName="resources"}loadRemote(e,...s){var r=null,t=null;2==s.length?(r=s[0],t=s[1]):t=s[0],l.loadRemote(e,r,t)}loadBundle(e,s){return new Promise(((t,a)=>{l.loadBundle(e,{version:s},((e,s)=>{if(e)return r(e);t(s)}))}))}load(e,s,l,r,t){let a=null;"string"==typeof s||s instanceof Array?(a=this.parseLoadResArgs(s,l,r,t),a.bundle=e):(a=this.parseLoadResArgs(e,s,l,r),a.bundle=this.defaultBundleName),this.loadByArgs(a)}loadAsync(e,s,l){return new Promise(((r,a)=>{this.load(e,s,l,((e,s)=>{e&&t(e.message),r(s)}))}))}loadDir(e,s,l,r,t){let a=null;"string"==typeof s?(a=this.parseLoadResArgs(s,l,r,t),a.bundle=e):(a=this.parseLoadResArgs(e,s,l,r),a.bundle=this.defaultBundleName),a.dir=a.paths,this.loadByArgs(a)}release(e,s){null==s&&(s=this.defaultBundleName);var r=l.getBundle(s);if(r){var t=r.get(e);t&&this.releasePrefabtDepsRecursively(t)}}releaseDir(e,s){null==s&&(s=this.defaultBundleName);var r=l.getBundle(s);if(r){var t=r.getDirWithPath(e);t&&t.map((e=>{this.releasePrefabtDepsRecursively(e.uuid)})),""==e&&"resources"!=s&&l.removeBundle(r)}}releasePrefabtDepsRecursively(e){if(e instanceof a)e.decRef();else{var s=l.assets.get(e);s&&s.decRef()}}get(e,s,r){return null==r&&(r=this.defaultBundleName),l.getBundle(r).get(e,s)}dump(){l.assets.forEach(((e,s)=>{console.log(l.assets.get(s))})),console.log(`当前资源总数:${l.assets.count}`)}parseLoadResArgs(e,s,l,r){let t=e,d=s,o=l,u=r;if(void 0===r){const e=n.isChildClassOf(s,a);l?(u=l,e&&(o=null)):void 0!==l||e||(u=s,o=null,d=null),void 0===l||e||(o=s,d=null)}return{paths:t,type:d,onProgress:o,onComplete:u}}loadByBundleAndArgs(e,s){s.dir?e.loadDir(s.paths,s.type,s.onProgress,s.onComplete):(s.paths,e.load(s.paths,s.type,s.onProgress,s.onComplete))}loadByArgs(e){if(e.bundle)if(l.bundles.has(e.bundle)){let s=l.bundles.get(e.bundle);this.loadByBundleAndArgs(s,e)}else l.loadBundle(e.bundle,((s,l)=>{s||this.loadByBundleAndArgs(l,e)}));else this.loadByBundleAndArgs(d,e)}}e("ResLoader",o);e("resLoader",new o);s._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Oops.ts","./AudioManager.ts","./EventMessage.ts","./MessageManager.ts","./ResLoader.ts","./StorageManager.ts","./TimerManager.ts","./GameManager.ts","./GUI.ts","./LayerManager.ts"],(function(e){var t,o,i,n,a,s,r,u,c,g,l,d,p,f,m,h,M,R,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,a=e._decorator,s=e.Component,r=e.director,u=e.JsonAsset,c=e.game},function(e){g=e.Config},function(e){l=e.oops},function(e){d=e.AudioManager},function(e){p=e.EventMessage},function(e){f=e.message},function(e){m=e.resLoader},function(e){h=e.StorageManager},function(e){M=e.TimerManager},function(e){R=e.GameManager},function(e){v=e.GUI},function(e){y=e.LayerManager}],execute:function(){var C,b,w,A,N;i._RF.push({},"e93878cjjRLfK4lf0Xf0vCu","Root",void 0);const{ccclass:E,property:L}=a;var D=!1;e("Root",(C=L({type:n,tooltip:"游戏层"}),b=L({type:n,tooltip:"界面层"}),A=t((w=class extends s{constructor(...e){super(...e),o(this,"game",A,this),o(this,"gui",N,this),this.persistRootNode=null}onLoad(){D||(D=!0,this.enabled=!1,this.loadConfig())}async loadConfig(){this.persistRootNode=new n("PersistRootNode"),r.addPersistRootNode(this.persistRootNode),l.res=m;const e="config",t=await l.res.loadAsync(e,u);t?(l.config=new g(t),l.storage=new h,l.storage.init(l.config.localDataKey,l.config.localDataIv),l.message=f,l.audio=this.persistRootNode.addComponent(d),l.audio.load(),l.timer=this.persistRootNode.addComponent(M),l.game=new R(this.game),l.gui=new y(this.gui),l.http.server=l.config.httpServer,l.http.timeout=l.config.httpTimeout,c.frameRate=l.config.frameRate,this.enabled=!0,this.init(),this.run(),l.res.release(e)):this.loadConfig()}run(){}init(){this.gui.addComponent(v)}start(){}update(e){}onShow(){l.timer.load(),l.audio.resumeAll(),r.resume(),c.resume(),l.message.dispatchEvent(p.GAME_SHOW)}onHide(){l.timer.save(),l.audio.pauseAll(),r.pause(),c.pause(),l.message.dispatchEvent(p.GAME_HIDE)}}).prototype,"game",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(w.prototype,"gui",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w));i._RF.pop()}}}));

System.register("chunks:///_virtual/StorageKeys.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"7c766FZzANAlIpnZ+YucQT6","StorageKeys",void 0);t("StorageKeys",function(t){return t.chathistorys="chathistorys",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["cc","./env","./EncryptUtil.ts"],(function(e){var t,r,i,n;return{setters:[function(e){t=e.cclegacy,r=e.sys},function(e){i=e.PREVIEW},function(e){n=e.EncryptUtil}],execute:function(){t._RF.push({},"b4418kGWXVL94oiUB8yRYcS","StorageManager",void 0);e("StorageManager",class{constructor(){this._key=null,this._iv=null,this._id=null}init(e,t){n.initCrypto(e,t),this._key=n.md5(e),this._iv=n.md5(t)}setUser(e){this._id=e}set(e,t){var i=this.getKey(e);if(null!=e){if(this.encrypted&&(i=n.md5(i)),null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error(`解析失败，str = ${t}`)}else"number"==typeof t&&(t+="");this.encrypted&&null!=this._key&&null!=this._iv&&(t=n.aesEncrypt(`${t}`,this._key,this._iv)),r.localStorage.setItem(i,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")}get(e,t=""){if(null==e)return console.error("存储的key不能为空"),null;e=this.getKey(e),this.encrypted&&(e=n.md5(e));let i=r.localStorage.getItem(e);return null!=i&&""!==i&&this.encrypted&&null!=this._key&&null!=this._iv&&(i=n.aesDecrypt(i,this._key,this._iv)),null===i?t:i}getNumber(e,t=0){var r=this.get(e);return"0"==r?Number(r):Number(r)||t}getBoolean(e){return"true"===this.get(e).toLowerCase()}getJson(e,t){var r=this.get(e);return r&&JSON.parse(r)||t}remove(e){if(null!=e){var t=this.getKey(e);this.encrypted&&(t=n.md5(t)),r.localStorage.removeItem(t)}else console.error("存储的key不能为空")}clear(){r.localStorage.clear()}getKey(e){return null==this._id||""==this._id?e:`${this._id}_${e}`}get encrypted(){return!i}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"09b23Qi79RHjr1c6YFtSZZX","StringUtil",void 0);t("StringUtil",class{static guid(){let t="";for(let r=1;r<=32;r++){t+=Math.floor(16*Math.random()).toString(16),8!=r&&12!=r&&16!=r&&20!=r||(t+="-")}return t}static numberTotPermil(t){return t.toLocaleString()}static numberToThousand(t,r=2){var e=1e3;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","K","M","G"][n]}static numberToTenThousand(t,r=2){var e=1e4;if(t<e)return t.toString();var n=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,n)).toFixed(r)+["","万","亿","万亿"][n]}static format(t,r){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return r}static stringToArray1(t){return""==t?[]:t.split(",")}static stringToArray2(t){return""==t?[]:t.split("|")}static stringToArray3(t){return""==t?[]:t.split(":")}static stringToArray4(t){return""==t?[]:t.split(";")}static sub(t,r,e=!1){var n=/[^\x00-\xff]/g;if(t.replace(n,"mm").length<=r)return t;for(var a=Math.floor(r/2);a<t.length;a++)if(t.substr(0,a).replace(n,"mm").length>=r)return e?t.substr(0,a)+"...":t.substr(0,a);return t}static stringLen(t){for(var r=0,e=t.length,n=-1,a=0;a<e;a++)r+=(n=t.charCodeAt(a))>=0&&n<=128?1:2;return r}static IsEmpty(t){return null==t||null==t||0==t.length}static substitute(t,...r){if(null==t)return"";var e,n=r.length;1==n&&r[0]instanceof Array?n=(e=r[0]).length:e=r;for(var a=0;a<n;a++)t=t.replace(new RegExp("\\{"+a+"\\}","g"),e[a]);return t}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"b84166hoxVKY77Hf4nVZ5wt","Timer",void 0);e("Timer",class{get elapsedTime(){return this._elapsedTime}get step(){return this._step}set step(e){this._step=e,this._elapsedTime=0}get progress(){return this._elapsedTime/this._step}constructor(e=0){this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}update(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,this.callback?.call(this),!0))}reset(){this._elapsedTime=0}stop(){this._elapsedTime=0,this.step=-1}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["cc","./StringUtil.ts","./Timer.ts"],(function(e){var t,i,s,r,n;return{setters:[function(e){t=e.cclegacy,i=e.Component,s=e.game},function(e){r=e.StringUtil},function(e){n=e.Timer}],execute:function(){t._RF.push({},"9b8d0mLs0tL/r9EicZJUQaL","TimerManager",void 0);e("TimerManager",class extends i{constructor(...e){super(...e),this.times={},this.date_s=new Date,this.date_s_start=new Date,this.polymeric_s=0,this.date_c=new Date}update(e){for(let t in this.times){let i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}}onTimerComplete(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]}register(e,t,i,s){var m=new n;m.step=1;let o={};return o.id=r.guid(),o.timer=m,o.object=e,o.field=t,o.onSecond=i,o.onComplete=s,this.times[o.id]=o,o.id}unRegister(e){this.times[e]&&delete this.times[e]}setServerTime(e){this.polymeric_s=this.getTime(),this.date_s_start.setTime(e)}getServerTime(){return this.date_s_start.getTime()+this.getTime()-this.polymeric_s}getServerDate(){return this.date_s.setTime(this.getServerTime()),this.date_s}getClientTime(){return Date.now()}getClientDate(){return this.date_c.setTime(this.getClientTime()),this.date_c}getTime(){return s.totalTime}save(){for(let e in this.times)this.times[e].startTime=this.getTime()}load(){for(let e in this.times){let t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<=0?(i.object[i.field]=0,this.onTimerComplete(i)):this.times[e].startTime=null}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/UIButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts"],(function(t){var e,i,o,n,r,u,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.AudioClip,r=t._decorator,u=t.Button,c=t.game},function(t){s=t.oops}],execute:function(){var a,l,p,f,h,d,_,m,b,y;o._RF.push({},"7ae08JL7/RAt5S0ncRvEqGP","UIButton",void 0);const{ccclass:g,property:v,menu:E}=r;t("default",(a=g("UIButton"),l=E("ui/button/UIButton"),p=v({tooltip:"每次触发间隔"}),f=v({tooltip:"是否只触发一次"}),h=v({tooltip:"触摸音效",type:n}),a(d=l((m=e((_=class extends u{constructor(...t){super(...t),i(this,"interval",m,this),i(this,"once",b,this),i(this,"effect",y,this),this._touchCount=0,this._touchEndTime=0}_onTouchEnded(t){if(this.once){if(this._touchCount>0)return void(t.propagationStopped=!0);this._touchCount++}this._touchEndTime&&c.totalTime-this._touchEndTime<this.interval?t.propagationStopped=!0:(this._touchEndTime=c.totalTime,super._onTouchEnded(t)),this.effect&&s.audio.playEffect(this.effect)}onDestroy(){this.effect&&s.audio.releaseEffect(this.effect)}}).prototype,"interval",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),b=e(_.prototype,"once",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=e(_.prototype,"effect",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIChatView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./List.ts","./LanguageLabel.ts","./EventMessage_work.ts","./ChatDatas.ts","./NetChannelManager.ts"],(function(e){var s,t,n,a,i,r,o,l,u,m,c,g,h;return{setters:[function(e){s=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.EditBox,i=e._decorator,r=e.Component,o=e.Label},function(e){l=e.oops},function(e){u=e.default},function(e){m=e.LanguageLabel},function(e){c=e.EventMessage_work},function(e){g=e.chatmgr},function(e){h=e.NetChannelType}],execute:function(){var d,p,f,b,C,v,y,_,w;n._RF.push({},"40adeQx3sdDRIf8pbfafY5h","UIChatView",void 0);const{ccclass:L,property:R}=i;e("UIChatView",(d=L("UIChatView"),p=R(u),f=R(a),b=R(m),d((y=s((v=class extends r{constructor(...e){super(...e),t(this,"list",y,this),t(this,"editmessage",_,this),t(this,"lb_numusers",w,this)}onLoad(){this.lb_numusers.dataID="curnumusers"}start(){this.lb_numusers.params=[{key:"0",value:g.numusers.toString()}],this.list.numItems=g.allmessages.length,l.message.on(c.ChatMsgAdded,this.ChatMsgAddded,this),l.message.on(c.RecvChatNumUsers,this.RecvChatNumUsers,this)}RecvChatNumUsers(e,s){this.lb_numusers.params=[{key:"0",value:s.numUsers}]}ChatMsgAddded(){this.list.numItems=g.allmessages.length}onListRender(e,s){e.getComponent(o).string=g.allmessages[s].username+": "+g.allmessages[s].message}onClickEmit(){let e=this.editmessage.string;this.editmessage.string="",l.netmgr.send({message:e},h.Chat)}update(e){}onclickClose(){l.gui.removeByNode(this.node)}onBeforeRemove(){l.message.offAll(this),l.log.logBusiness("chatviewonBeforeRemovevalled")}}).prototype,"list",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=s(v.prototype,"editmessage",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=s(v.prototype,"lb_numusers",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig.ts",["cc","./LayerManager.ts"],(function(i){var e,a;return{setters:[function(i){e=i.cclegacy},function(i){a=i.LayerType}],execute:function(){e._RF.push({},"84f38KwWwBG8pi4PVdkwrn1","UIConfig",void 0);let n=i("UIID",function(i){return i[i.Loading=1]="Loading",i[i.Window=2]="Window",i[i.Netinstable=3]="Netinstable",i[i.HotUp=4]="HotUp",i[i.Login=5]="Login",i[i.Main=6]="Main",i[i.Chat=7]="Chat",i}({}));i("UIConfigData",{[n.Loading]:{layer:a.UI,prefab:"loading/prefab/loading",bundle:"resources"},[n.Netinstable]:{layer:a.PopUp,prefab:"common/prefab/netinstable"},[n.Window]:{layer:a.Dialog,prefab:"common/prefab/window"},[n.HotUp]:{layer:a.UI,prefab:"ui/uihotup/uihotupview"},[n.Login]:{layer:a.UI,prefab:"ui/uilogin/uiloginview"},[n.Main]:{layer:a.UI,prefab:"ui/uimain/uimainview"},[n.Chat]:{layer:a.UI,prefab:"ui/uichat/uichatview"}});e._RF.pop()}}}));

System.register("chunks:///_virtual/UIHotUpView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Oops.ts","./UIConfig.ts","./UpdatePanel.ts"],(function(t){var e,s,i,a,n,r,o,l,h,g,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t._decorator,n=t.Component,r=t.sys,o=t.native,l=t.game},function(t){h=t.oops},function(t){g=t.UIID},function(t){p=t.UpdatePanel}],execute:function(){var c,f,d,U,u,M;i._RF.push({},"e3b5am9addB75Whv64Cmik/","UIHotUpView",void 0);const{ccclass:S,property:k}=a;t("UIHotUpView",(c=S("UIHotUpView"),f=k(p),c(((M=class t extends n{constructor(...e){super(...e),s(this,"panel",u,this),this.manifest="",this.storagePath="",this.assetsMgr=null,this.state=t.State.None}start(){r.isNative?h.res.load("project",((t,e)=>{if(t)this.panel.info.string="【热更新界面】缺少热更新配置文件";else{this.manifest=e.nativeUrl,this.storagePath=`${o.fileUtils.getWritablePath()}remote`,this.assetsMgr=new o.AssetsManager(this.manifest,this.storagePath,((t,e)=>{this.panel.info.string="【热更新】客户端版本: "+t+", 当前最新版本: "+e;let s=t.split("."),i=e.split(".");for(let t=0;t<s.length;++t){let e=parseInt(s[t]),a=parseInt(i[t]||"0");if(e!==a)return e-a}return i.length>s.length?-1:0})),this.assetsMgr.setVerifyCallback(((t,e)=>{e.compressed,e.md5,e.path,e.size;return!0}));var s=this.assetsMgr.getLocalManifest();this.panel.info.string="【热更新】热更资源存放路径: "+this.storagePath,this.panel.info.string="【热更新】本地资源配置路径: "+this.manifest,this.panel.info.string="【热更新】本地包地址: "+s.getPackageUrl(),this.panel.info.string="【热更新】远程 project.manifest 地址: "+s.getManifestFileUrl(),this.panel.info.string="【热更新】远程 version.manifest 地址: "+s.getVersionFileUrl(),this.checkUpdate()}})):this.onClickGotoLogin()}checkUpdate(){this.panel.info.string=" checkUpdate() ",this.assetsMgr?this.assetsMgr.getState()!==jsb.AssetsManager.State.UNINITED?this.assetsMgr.getLocalManifest().isLoaded()?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=t.State.Check,this.assetsMgr.checkUpdate()):this.panel.info.string="【热更新】加载本地 manifest 失败 ...":this.panel.info.string="【热更新】未初始化":this.panel.info.string="【热更新】请先初始化"}onHotUpdateCallBack(e){let s=e.getEventCode();switch(s){case o.EventAssetsManager.ALREADY_UP_TO_DATE:this.panel.info.string="【热更新】当前版本与远程版本一致且无须更新",this.onClickGotoLogin();break;case o.EventAssetsManager.NEW_VERSION_FOUND:this.panel.info.string="【热更新】发现新版本,请更新",this.onClickUpdate();break;case o.EventAssetsManager.ASSET_UPDATED:this.panel.info.string="【热更新】资产更新";break;case o.EventAssetsManager.UPDATE_PROGRESSION:this.state===t.State.Update&&(this.panel.info.string="【热更新】更新中...",this.panel.byteProgress.progress=e.getPercent(),this.panel.fileProgress.progress=e.getPercentByFile(),this.panel.fileLabel.string=e.getDownloadedFiles()+" / "+e.getTotalFiles(),this.panel.byteLabel.string=e.getDownloadedBytes()+" / "+e.getTotalBytes());break;case o.EventAssetsManager.UPDATE_FINISHED:this.onUpdateFinished();break;default:this.onUpdateFailed(s)}}onUpdateFailed(t){this.assetsMgr.setEventCallback(null)}onUpdateFinished(){this.assetsMgr.setEventCallback(null);let t=o.fileUtils.getSearchPaths();this.panel.info.string="native.fileUtils.getSearchPaths:"+JSON.stringify(t);let e=this.assetsMgr.getLocalManifest().getSearchPaths();this.panel.info.string="this.assetsMgr.getLocalManifest().getSearchPaths():"+JSON.stringify(e),Array.prototype.unshift.apply(t,e),this.panel.info.string="native.fileUtils.getSearchPaths:"+JSON.stringify(t),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),o.fileUtils.setSearchPaths(t),this.panel.info.string="【热更新】更新成功",setTimeout((()=>{l.restart()}),1e3)}onClickGotoLogin(){h.gui.removeByNode(this.node,!0),h.gui.open(g.Login)}onClickUpdate(){this.clearHotUpdateStorage(),this.hotUpdate()}clearHotUpdateStorage(){o.fileUtils.removeDirectory(this.storagePath)}hotUpdate(){this.assetsMgr?(this.assetsMgr.setEventCallback(this.onHotUpdateCallBack.bind(this)),this.state=t.State.Update,this.assetsMgr.update()):this.panel.info.string="【热更新】请先初始化"}update(t){}}).State={None:0,Check:1,Update:2},u=e((U=M).prototype,"panel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=U))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/UILoginView.ts",["cc","./Oops.ts","./NetChannelManager.ts","./UIConfig.ts"],(function(n){var e,t,o,i,c,s;return{setters:[function(n){e=n.cclegacy,t=n.Component,o=n._decorator},function(n){i=n.oops},function(n){c=n.netChannel},function(n){s=n.UIID}],execute:function(){var a;e._RF.push({},"7c230i/PH9KyYJ9nZl1GxX3","UILoginView",void 0);const{ccclass:r,property:u}=o;n("UILoginView",r("UILoginView")(a=class extends t{start(){this.OpenMain()}OpenMain(){i.gui.open(s.Main),i.gui.removeByNode(this.node),c.chatCreate(),c.chatConnect()}update(n){}})||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIMainView.ts",["cc","./Oops.ts","./UIConfig.ts"],(function(t){var n,e,i,o,c;return{setters:[function(t){n=t.cclegacy,e=t.Component,i=t._decorator},function(t){o=t.oops},function(t){c=t.UIID}],execute:function(){var s;n._RF.push({},"6e3d8CL+79PWo2AWU5Pijt4","UIMainView",void 0);const{ccclass:a,property:r}=i;t("UIMainView",a("UIMainView")(s=class extends e{start(){}onClickChatBtn(){o.gui.open(c.Chat)}update(t){}})||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIMap.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3e627KW+chIcZKt68LgpeNq","UIMap",void 0);class n{constructor(){this.id=void 0,this.pid=void 0,this.parent=null,this.child=[],this.name=void 0,this.panel=void 0}}e("UIMap",class{constructor(){this.manager=void 0,this.nodes=new Map}init(e,t){for(var i in this.manager=e,t){var s=t[i],a=new n;a.id=parseInt(i),a.pid=s.parent,a.name=s.name,a.panel=s.panel,this.nodes.set(a.id,a)}this.nodes.forEach(((e,t)=>{e.parent=this.nodes.get(e.pid),e.parent&&e.parent.child.push(e)}))}pathFinding(e,t){var n=this.nodes.get(e),i=this.nodes.get(t),s=this.findUp(n),a=this.findUp(i);return s.forEach((e=>{this.manager.remove(e.id,!0)})),a.forEach((e=>{this.manager.open(e.id)})),{paths_close:s,paths_open:a}}findUp(e){for(var t=[],n=e;null!=n.parent;)t.push(n),n=n.parent;return t}release(){this.nodes.clear()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/UpdatePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,l,o,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,l=e.ProgressBar,o=e.Node,a=e._decorator,u=e.Component}],execute:function(){var s,c,p,b,f,h,y,g,d,m,z,P,w,B,L,v,U,_,j,k,D;r._RF.push({},"aa727OwajVMBpJT76jW88z3","UpdatePanel",void 0);const{ccclass:x,property:F}=a;e("UpdatePanel",(s=x("UpdatePanel"),c=F(n),p=F(l),b=F(n),f=F(l),h=F(n),y=F(o),g=F(o),d=F(o),m=F(o),s((w=t((P=class extends u{constructor(...e){super(...e),i(this,"info",w,this),i(this,"fileProgress",B,this),i(this,"fileLabel",L,this),i(this,"byteProgress",v,this),i(this,"byteLabel",U,this),i(this,"close",_,this),i(this,"checkBtn",j,this),i(this,"retryBtn",k,this),i(this,"updateBtn",D,this)}onLoad(){}}).prototype,"info",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(P.prototype,"fileProgress",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(P.prototype,"fileLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(P.prototype,"byteProgress",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(P.prototype,"byteLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(P.prototype,"close",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(P.prototype,"checkBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(P.prototype,"retryBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(P.prototype,"updateBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=P))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["cc","./ResLoader.ts"],(function(e){var t,a,n,o,r,i,c,l,s;return{setters:[function(e){t=e.cclegacy,a=e.UITransform,n=e.v3,o=e.Size,r=e.Prefab,i=e.instantiate,c=e.Animation,l=e.AnimationClip},function(e){s=e.resLoader}],execute:function(){t._RF.push({},"433d18oWflP+b23sajcockH","ViewUtil",void 0);class d{static nodeTreeInfoLite(e,t){let a=t||new Map,n=e.children;for(let e=0;e<n.length;e++){let t=n[e];t.name.indexOf(" ")<0&&a.set(t.name,t),d.nodeTreeInfoLite(t,a)}return a}static findNodes(e,t,a){let n=a||[],o=t.children;for(let t=0;t<o.length;t++){let a=o[t].name;e.test(a)&&n.push(o[t]),d.findNodes(e,o[t],n)}return n}static calculateASpaceToBSpacePos(e,t,n){var o=e.getComponent(a).convertToWorldSpaceAR(n);return t.getComponent(a).convertToNodeSpaceAR(o)}static calculateScreenPosToSpacePos(e,t){let o=e.getUILocation(),r=n(o.x,o.y);return t.getComponent(a).convertToNodeSpaceAR(r)}static uniformScale(e,t,a,n){var r,i=a/e,c=n/t;return r=i<c?i:c,new o(Math.floor(e*r),Math.floor(t*r))}static createPrefabNode(e){var t=s.get(e,r);return i(t)}static createPrefabNodeAsync(e){return new Promise((async(t,a)=>{s.load(e,r,((a,n)=>{if(a)console.error(`名为【${e}】的资源加载失败`);else{var o=this.createPrefabNode(e);t(o)}}))}))}static addNodeAnimation(e,t,a=!0,n=!1){if(t&&t.isValid){var o=t.getComponent(c);null==o&&(o=t.addComponent(c));var r=s.get(e,l);if(r&&!(a&&o.getState(r.name)&&o.getState(r.name).isPlaying)){if(n)return o.defaultClip=r,void o.play();o.once(c.EventType.FINISHED,(()=>{o.defaultClip&&o.play()}),this),o.getState(r.name)||o.createState(r,r.name),o.play(r.name)}}}}e("ViewUtil",d),t._RF.pop()}}}));

System.register("chunks:///_virtual/WebSimpleIO.ts",["cc","./socket.io.mjs_cjs=&original=.js","./Logger.ts","./socket.io.js"],(function(s){var e,o,t;return{setters:[function(s){e=s.cclegacy},null,function(s){o=s.Logger},function(s){t=s.default}],execute:function(){e._RF.push({},"651a7G3l/dCO78OXWy1q/Md","WebSimpleIO",void 0);s("WebSimpleIO",class{constructor(){this._sio=null,this.onMessage=null}connect(s){let e=null;if(s.url)e=s.url;else{let o=s.ip,t=s.port;e=`${s.protocol}://${o}:${t}`}return this._sio=t(e),this._sio.on("connect",(()=>{o.logNet("connect:sid="+this._sio.id)})),this._sio.on("connect_error",(s=>{o.logNet(s)})),this._sio.on("disconnect",(s=>{o.logNet(s)})),this._sio.on("message",(s=>{this.onMessage.call(null,s)})),!0}close(){this._sio.disconnect()}send(s,e="message"){this._sio.emit(e,s)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/WebSock.ts",["cc","./Logger.ts"],(function(e){var s,t;return{setters:[function(e){s=e.cclegacy},function(e){t=e.Logger}],execute:function(){s._RF.push({},"a13b8NvwWBAbL6WRx5uiwHV","WebSock",void 0);e("WebSock",class{constructor(){this._ws=null,this.onConnected=null,this.onMessage=null,this.onError=null,this.onClosed=null}connect(e){if(this._ws&&this._ws.readyState===WebSocket.CONNECTING)return t.logNet("websocket connecting, wait for a moment..."),!1;let s=null;if(e.url)s=e.url;else{let t=e.ip,n=e.port;s=`${e.protocol}://${t}:${n}`}return this._ws=new WebSocket(s),this._ws.binaryType=e.binaryType?e.binaryType:"arraybuffer",this._ws.onmessage=e=>{(0,this.onMessage)(e.data)},this._ws.onopen=this.onConnected,this._ws.onerror=this.onError,this._ws.onclose=this.onClosed,!0}send(e){return this._ws&&this._ws.readyState==WebSocket.OPEN?(this._ws.send(e),1):-1}close(e,s){this._ws&&this._ws.close(e,s)}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/WebSocketIO.ts",["cc","./socket.io.mjs_cjs=&original=.js","./Logger.ts","./socket.io.js"],(function(o){var t,e,n;return{setters:[function(o){t=o.cclegacy},null,function(o){e=o.Logger},function(o){n=o.default}],execute:function(){t._RF.push({},"e023eHdaFBEL40F9Yfr/vfT","WebSocketIO",void 0);o("WebSocketIO",class{constructor(){this._sio=null,this.onConnected=void 0,this.onMessage=void 0,this.onError=void 0,this.onClosed=void 0}send(o){throw this._sio.send(o),new Error("Method not implemented.")}close(o,t){this._sio.disconnect()}connect(o){let t=null;if(o.url)t=o.url;else{let e=o.ip,n=o.port;t=`${o.protocol}://${e}:${n}`}return this._sio=n(t),this._sio.on("connect",(()=>{e.logNet(this._sio.id),this.onConnected.call(null)})),this._sio.on("connect_error",(o=>{e.logNet(o),this.onError.call(null,o)})),this._sio.on("disconnect",(o=>{e.logNet(o),"io server disconnect"===o||"io client disconnect"===o||this.onClosed.call(null,o)})),!0}}),t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});